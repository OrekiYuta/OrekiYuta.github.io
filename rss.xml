<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Canoe</title>
  
  <subtitle>ã€Œã‚ãã§ãªã—ã€</subtitle>
  <link href="/rss.xml" rel="self"/>
  
  <link href="http://www.orekiyuta.cn/"/>
  <updated>2021-02-03T17:37:10.334Z</updated>
  <id>http://www.orekiyuta.cn/</id>
  
  <author>
    <name>Orekiyuta</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SSH Port Mapping</title>
    <link href="http://www.orekiyuta.cn/archives/SSHPortMapping/"/>
    <id>http://www.orekiyuta.cn/archives/SSHPortMapping/</id>
    <published>2021-02-03T16:28:34.000Z</published>
    <updated>2021-02-03T17:37:10.334Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Scene"><a href="#Scene" class="headerlink" title="Scene"></a>Scene</h2><ol><li><ul><li>æ­£å¸¸æ¥è¯´åœ¨æœåŠ¡å™¨éƒ¨ç½²äº†ä¸€ä¸ªæœåŠ¡ï¼Œè¦è®¿é—®è¯¥æœåŠ¡å¾—ç”¨è¯¥äº‘æœåŠ¡å™¨ ip + ç«¯å£</li><li>ç„¶åå»äº‘æœåŠ¡å™¨å•†è®¾ç½®å¼€æ”¾ç«¯å£ï¼Œæœ€åæ‰èƒ½è®¿é—®</li><li>ä½†æ˜¯ï¼Œæˆ‘ä»¬åªæ˜¯æƒ³éšæ‰‹ç”¨ä¸€ä¸‹è€Œå·²ï¼Œåˆæ‡’å¾—å»å¼€æ”¾ç«¯å£</li><li>è¿™ç§æ—¶å€™å¯ä»¥ç”¨ SSH ç«¯å£æ˜ å°„</li></ul></li></ol><hr><ol start="2"><li><ul><li>æˆ‘ä»¬æƒ³ä»å…¬ç½‘å»è®¿é—®å±€åŸŸç½‘å†…éƒ¨çš„æœåŠ¡</li><li>ä¹Ÿå¯ä»¥åˆ©ç”¨ SSH ç«¯å£æ˜ å°„ æŠŠ äº‘æœåŠ¡å™¨çš„è¯·æ±‚è½¬å‘åˆ° å±€åŸŸç½‘å†…éƒ¨è®¾å¤‡é‡Œ</li></ul></li></ol><hr><ol start="3"><li><ul><li>ä¸åŒå­ç½‘ä¹‹é—´çš„è®¿é—®</li><li>å†…ç½‘ç©¿é€åŸç†åº”è¯¥ä¹Ÿæ˜¯å·®ä¸å¤š</li></ul></li></ol><a id="more"></a><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><h3 id="æœ¬åœ°ç«¯å£è½¬å‘-ä»æœ¬åœ°è®¿é—®å…¬ç½‘å†…éƒ¨å­ç½‘æœåŠ¡"><a href="#æœ¬åœ°ç«¯å£è½¬å‘-ä»æœ¬åœ°è®¿é—®å…¬ç½‘å†…éƒ¨å­ç½‘æœåŠ¡" class="headerlink" title="æœ¬åœ°ç«¯å£è½¬å‘-ä»æœ¬åœ°è®¿é—®å…¬ç½‘å†…éƒ¨å­ç½‘æœåŠ¡"></a>æœ¬åœ°ç«¯å£è½¬å‘-ä»æœ¬åœ°è®¿é—®å…¬ç½‘å†…éƒ¨å­ç½‘æœåŠ¡</h3><ul><li>è¿™é‡Œçš„æ“ä½œè§†è§’ä¸º æœ¬æœº -&gt; äº‘æœåŠ¡å™¨</li><li>è¿™é‡Œçš„ç”¨æˆ·è§†è§’ä¸º æœ¬æœºæˆ–å¤„äºåŒä¸€ç½‘ç»œä¸‹çš„æœºå™¨ -&gt; äº‘æœåŠ¡å™¨</li><li><code>ssh root@ip</code> æ­£å¸¸ç™»å½•æœåŠ¡å™¨ </li><li><code>ssh -L 2222:localhost:8080 root@ip</code> è¿™é‡Œå°±ç›¸å½“äºæŠŠæœ¬æœºçš„ 2222 ç«¯å£ è½¬å‘åˆ° äº‘æœåŠ¡å™¨çš„ 8080 ç«¯å£<ul><li><code>ssh -L æœ¬æœºåœ°å€:äº‘æœåŠ¡å™¨å†…ç½‘åœ°å€ root@ip</code></li><li>2222 å…¶å®æ˜¯ localhost:2222 æœ¬æœº</li><li>è€Œ localhost:8080 æŒ‡çš„æ˜¯ æœåŠ¡å™¨å†…ç½‘ä¸­è¯¥æœåŠ¡å™¨çš„åœ°å€</li><li>è¿™ä¸ªè½¬å‘ä¼šåœ¨é€€å‡ºæœåŠ¡å™¨ç™»å½•æ—¶å¤±æ•ˆ</li></ul></li><li><code>ssh -L 192.168.1.200:2222:localhost:8080 root@ip</code> </li><li>æœ€åï¼Œå°±å¯ä»¥ä½¿å¾—ä¸æœ¬æœºå¤„äºåŒä¸€ç½‘æ®µçš„æœºå™¨ä¸€èµ·ä½¿ç”¨è¯¥åœ°å€è½¬å‘åˆ° äº‘æœåŠ¡å™¨çš„ 8080 ç«¯å£</li></ul><h3 id="è¿œç¨‹ç«¯å£è½¬å‘-ä»å…¬ç½‘è®¿é—®ä¸æœ¬æœºä¸åœ¨åŒä¸€ç½‘æ®µçš„æœåŠ¡"><a href="#è¿œç¨‹ç«¯å£è½¬å‘-ä»å…¬ç½‘è®¿é—®ä¸æœ¬æœºä¸åœ¨åŒä¸€ç½‘æ®µçš„æœåŠ¡" class="headerlink" title="è¿œç¨‹ç«¯å£è½¬å‘-ä»å…¬ç½‘è®¿é—®ä¸æœ¬æœºä¸åœ¨åŒä¸€ç½‘æ®µçš„æœåŠ¡"></a>è¿œç¨‹ç«¯å£è½¬å‘-ä»å…¬ç½‘è®¿é—®ä¸æœ¬æœºä¸åœ¨åŒä¸€ç½‘æ®µçš„æœåŠ¡</h3><ul><li>è¿™é‡Œçš„æ“ä½œè§†è§’ä¸º è¿œç«¯å­ç½‘æœºå™¨ -&gt; äº‘æœåŠ¡å™¨</li><li>è¿™é‡Œçš„ç”¨æˆ·è§†è§’ä¸º ç”¨æˆ·æœºå™¨ -&gt; äº‘æœåŠ¡å™¨ -&gt; è¿œç«¯å­ç½‘æœºå™¨</li><li><p><code>ssh -R 3333:10.10.10.254:7777 root@ip</code> è¿™é‡Œæ„æ€å°±æ˜¯å°†äº‘æœåŠ¡å™¨çš„ç«¯å£ è½¬å‘åˆ° è¿œç«¯å­ç½‘æœºå™¨çš„ 3333 ç«¯å£ </p><ul><li><code>ssh -R äº‘æœåŠ¡å™¨å†…ç½‘åœ°å€:è¿œç«¯å­ç½‘æœºå™¨åœ°å€ root@ip</code></li><li>3333 å°±æ˜¯ äº‘æœåŠ¡å™¨çš„ localhost:3000</li><li>10.10.10.254:7777 ä¸ºè¿œç«¯å­ç½‘æœºå™¨çš„åœ°å€</li><li>æ‰§è¡Œè¯¥å‘½ä»¤åå¯ç”¨ <code>netstat -anp | grep 3333</code> æŸ¥çœ‹æ˜¯å¦å¯ç”¨äº†ç›‘å¬è¯¥ç«¯å£çš„æœåŠ¡</li></ul></li><li><p>å½“ç„¶è¿™æ ·è¿˜ä¸è¡Œï¼Œé—®é¢˜åœ¨äºå®‰å…¨é—®é¢˜ï¼Œä¸èƒ½éšæ„æŠŠè¿œç¨‹ç«¯å£å¼€æ”¾äº†</p><ul><li>SSH é»˜è®¤æŠŠè¯¥æ“ä½œå…³é—­äº†</li></ul></li><li>ä¿®æ”¹é…ç½®ï¼Œå¼€æ”¾è¯¥æ“ä½œ</li><li><code>vim /etc/ssh/sshd_config</code><pre><code class="diff"><span class="deletion">-#GatewayPorts no</span><span class="addition">+GatewayPorts yes</span></code></pre></li><li><code>systemctl restart sshd</code>  </li><li><code>ssh -R 0.0.0.0:3333:10.10.10.254:7777 root@ip</code> </li><li><code>netstat -anp | grep 3333</code> å†æ¬¡æŸ¥çœ‹</li><li>å½“ç„¶åŒæ—¶è¿˜è¦åœ¨äº‘æœåŠ¡å™¨å•†è®¾ç½®é‡ŒæŠŠ 3333 ç«¯å£å¼€æ”¾</li><li>æœ€åï¼Œå°±å¯ä»¥é€šè¿‡ äº‘æœåŠ¡å™¨å…¬ç½‘ ip + ç«¯å£ è®¿é—®åˆ° è¿œç¨‹å­ç½‘çš„æœºå™¨é‡Œçš„ç«¯å£æœåŠ¡äº†</li></ul><h3 id="è®¿é—®ä¸åŒç½‘ç»œä¸‹çš„è®¾å¤‡-ä¸¤è€…ç»“åˆ"><a href="#è®¿é—®ä¸åŒç½‘ç»œä¸‹çš„è®¾å¤‡-ä¸¤è€…ç»“åˆ" class="headerlink" title="è®¿é—®ä¸åŒç½‘ç»œä¸‹çš„è®¾å¤‡-ä¸¤è€…ç»“åˆ"></a>è®¿é—®ä¸åŒç½‘ç»œä¸‹çš„è®¾å¤‡-ä¸¤è€…ç»“åˆ</h3><ul><li>åœ¨å‰é¢ä¸¤ä¸ªçš„åŸºç¡€ä¸Šï¼Œè¿œç¨‹æœºå™¨è®¾ç½®è½¬å‘ï¼Œæœ¬åœ°æœºå™¨ä¹Ÿè®¾ç½®è½¬å‘</li><li>å°±å¯ä»¥è¾¾åˆ°ï¼Œåˆ©ç”¨å¤„äºå…¬ç½‘çš„äº‘æœåŠ¡å™¨ä½œä¸ºä¸­ä»‹å»è®¿é—®ä¸åŒç½‘ç»œä¸‹çš„æœºå™¨</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Scene&quot;&gt;&lt;a href=&quot;#Scene&quot; class=&quot;headerlink&quot; title=&quot;Scene&quot;&gt;&lt;/a&gt;Scene&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;ul&gt;
&lt;li&gt;æ­£å¸¸æ¥è¯´åœ¨æœåŠ¡å™¨éƒ¨ç½²äº†ä¸€ä¸ªæœåŠ¡ï¼Œè¦è®¿é—®è¯¥æœåŠ¡å¾—ç”¨è¯¥äº‘æœåŠ¡å™¨ ip + ç«¯å£&lt;/li&gt;
&lt;li&gt;ç„¶åå»äº‘æœåŠ¡å™¨å•†è®¾ç½®å¼€æ”¾ç«¯å£ï¼Œæœ€åæ‰èƒ½è®¿é—®&lt;/li&gt;
&lt;li&gt;ä½†æ˜¯ï¼Œæˆ‘ä»¬åªæ˜¯æƒ³éšæ‰‹ç”¨ä¸€ä¸‹è€Œå·²ï¼Œåˆæ‡’å¾—å»å¼€æ”¾ç«¯å£&lt;/li&gt;
&lt;li&gt;è¿™ç§æ—¶å€™å¯ä»¥ç”¨ SSH ç«¯å£æ˜ å°„&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;&lt;ul&gt;
&lt;li&gt;æˆ‘ä»¬æƒ³ä»å…¬ç½‘å»è®¿é—®å±€åŸŸç½‘å†…éƒ¨çš„æœåŠ¡&lt;/li&gt;
&lt;li&gt;ä¹Ÿå¯ä»¥åˆ©ç”¨ SSH ç«¯å£æ˜ å°„ æŠŠ äº‘æœåŠ¡å™¨çš„è¯·æ±‚è½¬å‘åˆ° å±€åŸŸç½‘å†…éƒ¨è®¾å¤‡é‡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;&lt;ul&gt;
&lt;li&gt;ä¸åŒå­ç½‘ä¹‹é—´çš„è®¿é—®&lt;/li&gt;
&lt;li&gt;å†…ç½‘ç©¿é€åŸç†åº”è¯¥ä¹Ÿæ˜¯å·®ä¸å¤š&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
    
      <category term="Linux" scheme="http://www.orekiyuta.cn/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Bitwarden On Docker</title>
    <link href="http://www.orekiyuta.cn/archives/bitwardenOnDocker/"/>
    <id>http://www.orekiyuta.cn/archives/bitwardenOnDocker/</id>
    <published>2021-02-02T15:32:12.000Z</published>
    <updated>2021-02-02T17:12:16.971Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum install docker</span><br><span class="line"><span class="comment"># ------</span></span><br><span class="line">su root</span><br><span class="line">systemctl <span class="built_in">enable</span> docker</span><br><span class="line">systemctl start docker</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure></div><h2 id="Portainer"><a href="#Portainer" class="headerlink" title="Portainer"></a>Portainer</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo docker pull portainer/portainer</span><br><span class="line">sudo docker volume create portainer_data</span><br><span class="line">sudo docker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer</span><br></pre></td></tr></table></figure></div><h2 id="Bitwarden"><a href="#Bitwarden" class="headerlink" title="Bitwarden"></a>Bitwarden</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull bitwardenrs/server:latest</span><br><span class="line">docker run -d --name bitwarden -v /var/run/bitwarden/:/data/ -p 80:9001 bitwardenrs/server:latest</span><br></pre></td></tr></table></figure></div><a id="more"></a><h2 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h2><h3 id="Job-for-docker-service-failed-because-the-control-process-exited-with-error-code-See-â€œsystemctl-status-docker-serviceâ€-and-â€œjournalctl-xeâ€-for-details"><a href="#Job-for-docker-service-failed-because-the-control-process-exited-with-error-code-See-â€œsystemctl-status-docker-serviceâ€-and-â€œjournalctl-xeâ€-for-details" class="headerlink" title="Job for docker.service failed because the control process exited with error code. See â€œsystemctl status docker.serviceâ€ and â€œjournalctl -xeâ€ for details."></a>Job for docker.service failed because the control process exited with error code. See â€œsystemctl status docker.serviceâ€ and â€œjournalctl -xeâ€ for details.</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm /etc/docker/daemon.json</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure></div><h3 id="Image-accelerator"><a href="#Image-accelerator" class="headerlink" title="Image accelerator"></a>Image accelerator</h3><ul><li><a href="https://cr.console.aliyun.com/cn-beijing/instances/mirrors" target="_blank" rel="noopener">https://cr.console.aliyun.com/cn-beijing/instances/mirrors</a></li></ul><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl cat docker | grep <span class="string">'\-\-registry\-mirror'</span></span><br><span class="line">sudo nano /etc/docker/daemon.json</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"registry-mirrors"</span>: [<span class="string">"this link from aliyun"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure></div><h2 id="Refer"><a href="#Refer" class="headerlink" title="Refer"></a>Refer</h2><ul><li><a href="https://bitwarden.com/download/" target="_blank" rel="noopener">bitwarden</a></li><li><a href="https://github.com/dani-garcia/bitwarden_rs" target="_blank" rel="noopener">dani-garcia/bitwarden_rs</a></li><li><a href="https://bitwarden.com/help/article/install-on-premise/" target="_blank" rel="noopener">Install and Deploy</a></li><li><a href="https://hub.docker.com/r/bitwarden/setup" target="_blank" rel="noopener">bitwarden/setup</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Docker&quot;&gt;&lt;a href=&quot;#Docker&quot; class=&quot;headerlink&quot; title=&quot;Docker&quot;&gt;&lt;/a&gt;Docker&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install docker&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ------&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;su root&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; docker&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl start docker&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl restart docker&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Portainer&quot;&gt;&lt;a href=&quot;#Portainer&quot; class=&quot;headerlink&quot; title=&quot;Portainer&quot;&gt;&lt;/a&gt;Portainer&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo docker pull portainer/portainer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo docker volume create portainer_data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo docker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Bitwarden&quot;&gt;&lt;a href=&quot;#Bitwarden&quot; class=&quot;headerlink&quot; title=&quot;Bitwarden&quot;&gt;&lt;/a&gt;Bitwarden&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker pull bitwardenrs/server:latest&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker run -d --name bitwarden -v /var/run/bitwarden/:/data/ -p 80:9001 bitwardenrs/server:latest&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
    
      <category term="Docker" scheme="http://www.orekiyuta.cn/tags/Docker/"/>
    
      <category term="Bitwarden" scheme="http://www.orekiyuta.cn/tags/Bitwarden/"/>
    
  </entry>
  
  <entry>
    <title>Python Dependency Separation</title>
    <link href="http://www.orekiyuta.cn/archives/pythonDependencySeparation/"/>
    <id>http://www.orekiyuta.cn/archives/pythonDependencySeparation/</id>
    <published>2021-01-30T20:53:29.000Z</published>
    <updated>2021-02-02T18:27:56.591Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Scene"><a href="#Scene" class="headerlink" title="Scene"></a>Scene</h2><ul><li>ç”±äºæ¯ä¸ªé¡¹ç›®ä¹‹é—´çš„å¼•å…¥çš„ä¾èµ–ç‰ˆæœ¬ä¸åŒï¼Œå¹¶ä¸”æœ‰çš„ä¾èµ–åº“è¿˜éš¾ä»¥è·å–</li><li>å› æ­¤åœ¨å¼€å‘æ—¶ï¼Œéœ€è¦æŠŠä¾èµ–ç»™ä¿å­˜ä¸‹æ¥ï¼Œå¹¶ä¸”æŒ‡æ˜ä¾èµ–çš„ç‰ˆæœ¬</li></ul><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><h3 id="freeze"><a href="#freeze" class="headerlink" title="freeze"></a>freeze</h3><ul><li><code>pip freeze &gt; requirements.txt</code></li><li>ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å¯ä»¥å¯¼å‡ºå½“å‰ç¯å¢ƒçš„æ‰€æœ‰ä¾èµ–</li></ul><h3 id="pipreqs"><a href="#pipreqs" class="headerlink" title="pipreqs"></a>pipreqs</h3><ul><li><code>pip install pipreqs</code></li><li><code>pipreqs ./</code> åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼Œå¯¼å‡ºå½“å‰ç›®å½•æ‰€å¼•ç”¨çš„ä¾èµ–</li><li><code>pipreqs ./ --encoding==utf-8</code></li><li><code>pipreqs ./ --encoding==utf-8 --force</code></li></ul><h3 id="venv"><a href="#venv" class="headerlink" title="venv"></a>venv</h3><ul><li>ä½¿ç”¨ python çš„è™šæ‹Ÿç¯å¢ƒ  <a id="more"></a><ul><li><code>python -m venv -h</code></li><li><code>python -m venv venvdemo</code> åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</li><li>æ‰¾åˆ°è™šæ‹Ÿç¯å¢ƒçš„æ–‡ä»¶å¤¹ï¼Œè¿›å…¥ Scripts ç›®å½•<ul><li><code>activate</code> æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</li><li><code>activate</code> é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</li></ul></li><li>æ‰€è°“çš„æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼Œåªä¸è¿‡æ˜¯æŠŠå½“å‰ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡æŒ‡å‘è¯¥è™šæ‹Ÿç¯å¢ƒ</li><li>åœ¨ç¯å¢ƒå˜é‡ä¸­ï¼Œä¸€ä¸ªå˜é‡å…ˆæ‰¾åˆ°å“ªä¸ªå°±ç®—å“ªä¸ª</li><li><img src="/images/pythonDependencySeparation/Snipaste_2021-02-01_00-39-18.png" alt></li><li>å¦‚å›¾æ‰€ç¤ºï¼Œæ¿€æ´»è™šæ‹Ÿç¯å¢ƒæ—¶ï¼Œä¼šæŠŠè¯¥è™šæ‹Ÿç¯å¢ƒè·¯å¾„æ”¾åœ¨æœ€å‰é¢ï¼Œå› æ­¤å½“å‰ python çš„ path å°±æŒ‡å‘è¿™ä¸ªè·¯å¾„ ; åé¢çš„ path å°±ä¸ç”Ÿæ•ˆ</li><li>æ¿€æ´»è™šæ‹Ÿç¯å¢ƒåï¼Œå¯æ‰§è¡Œ <code>pip list</code> æŸ¥çœ‹å½“å‰çš„ä¾èµ–åº“</li><li>æ¿€æ´»è™šæ‹Ÿç¯å¢ƒåï¼Œæ‰§è¡Œçš„ <code>pip install</code> éƒ½æ˜¯è£…åˆ°è¯¥è™šæ‹Ÿç¯å¢ƒçš„ç›®å½•é‡Œçš„</li><li>åœ¨ IDE å·¥å…·ä¸­ ,æ¯”å¦‚ PyCharm ä¸­,ç›´æ¥æŠŠé¡¹ç›®è®¾ç½®æŒ‡å‘è™šæ‹Ÿå˜é‡è·¯å¾„å³å¯ï¼Œæœ¬è´¨å°±æ˜¯æ”¹ç¯å¢ƒå˜é‡çš„ PATH</li></ul></li><li>è¿ç§» è™šæ‹Ÿç¯å¢ƒ<ul><li>åœ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒä¸‹ï¼Œå¯¼å‡ºå½“å‰ç¯å¢ƒä¾èµ–åº“</li><li><code>pip freeze &gt; requirements.txt</code></li></ul></li></ul><h2 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h2><ul><li>è™šæ‹Ÿç¯å¢ƒçš„ä½¿ç”¨è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œ</li><li>å› ä¸ºå®‰è£…ä¸€ä¸ªä¾èµ–çš„æ—¶å€™ï¼Œå¾ˆå¤šæ—¶å€™æ˜¯ä¼šæŠŠæŒ‡å®šä¾èµ–ä¸å…¶ç›¸å…³çš„å…¶ä»–ä¾èµ–éƒ½å®‰è£…</li><li>è€Œå¸è½½çš„æ—¶å€™åªå¸è½½äº†æŒ‡å®šçš„ä¾èµ–åº“</li><li><img src="/images/pythonDependencySeparation/Snipaste_2021-02-01_00-55-30.png" alt></li><li>å¦‚æœä¸æ§åˆ¶ä¸€ä¸‹ä¾èµ–åº“ï¼Œä¹…è€Œä¹…ä¹‹å°±å¾ˆéš¾ç®¡ç†äº†</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Scene&quot;&gt;&lt;a href=&quot;#Scene&quot; class=&quot;headerlink&quot; title=&quot;Scene&quot;&gt;&lt;/a&gt;Scene&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;ç”±äºæ¯ä¸ªé¡¹ç›®ä¹‹é—´çš„å¼•å…¥çš„ä¾èµ–ç‰ˆæœ¬ä¸åŒï¼Œå¹¶ä¸”æœ‰çš„ä¾èµ–åº“è¿˜éš¾ä»¥è·å–&lt;/li&gt;
&lt;li&gt;å› æ­¤åœ¨å¼€å‘æ—¶ï¼Œéœ€è¦æŠŠä¾èµ–ç»™ä¿å­˜ä¸‹æ¥ï¼Œå¹¶ä¸”æŒ‡æ˜ä¾èµ–çš„ç‰ˆæœ¬&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;Solution&quot;&gt;&lt;a href=&quot;#Solution&quot; class=&quot;headerlink&quot; title=&quot;Solution&quot;&gt;&lt;/a&gt;Solution&lt;/h2&gt;&lt;h3 id=&quot;freeze&quot;&gt;&lt;a href=&quot;#freeze&quot; class=&quot;headerlink&quot; title=&quot;freeze&quot;&gt;&lt;/a&gt;freeze&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pip freeze &amp;gt; requirements.txt&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å¯ä»¥å¯¼å‡ºå½“å‰ç¯å¢ƒçš„æ‰€æœ‰ä¾èµ–&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;pipreqs&quot;&gt;&lt;a href=&quot;#pipreqs&quot; class=&quot;headerlink&quot; title=&quot;pipreqs&quot;&gt;&lt;/a&gt;pipreqs&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pip install pipreqs&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pipreqs ./&lt;/code&gt; åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼Œå¯¼å‡ºå½“å‰ç›®å½•æ‰€å¼•ç”¨çš„ä¾èµ–&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pipreqs ./ --encoding==utf-8&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pipreqs ./ --encoding==utf-8 --force&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;venv&quot;&gt;&lt;a href=&quot;#venv&quot; class=&quot;headerlink&quot; title=&quot;venv&quot;&gt;&lt;/a&gt;venv&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ python çš„è™šæ‹Ÿç¯å¢ƒ
    
    </summary>
    
    
    
      <category term="Python" scheme="http://www.orekiyuta.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Django Run</title>
    <link href="http://www.orekiyuta.cn/archives/djangoRun/"/>
    <id>http://www.orekiyuta.cn/archives/djangoRun/</id>
    <published>2021-01-28T12:03:52.000Z</published>
    <updated>2021-01-28T16:58:16.926Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h2><h3 id="Error-WinError-10013-ä»¥ä¸€ç§è®¿é—®æƒé™ä¸å…è®¸çš„æ–¹å¼åšäº†ä¸€ä¸ªè®¿é—®å¥—æ¥å­—çš„å°è¯•ã€‚"><a href="#Error-WinError-10013-ä»¥ä¸€ç§è®¿é—®æƒé™ä¸å…è®¸çš„æ–¹å¼åšäº†ä¸€ä¸ªè®¿é—®å¥—æ¥å­—çš„å°è¯•ã€‚" class="headerlink" title="Error: [WinError 10013] ä»¥ä¸€ç§è®¿é—®æƒé™ä¸å…è®¸çš„æ–¹å¼åšäº†ä¸€ä¸ªè®¿é—®å¥—æ¥å­—çš„å°è¯•ã€‚"></a>Error: [WinError 10013] ä»¥ä¸€ç§è®¿é—®æƒé™ä¸å…è®¸çš„æ–¹å¼åšäº†ä¸€ä¸ªè®¿é—®å¥—æ¥å­—çš„å°è¯•ã€‚</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Starting development server at http://127.0.0.1:8000/</span><br><span class="line">Quit the server with CTRL-BREAK.</span><br><span class="line">Error: [WinError 10013] ä»¥ä¸€ç§è®¿é—®æƒé™ä¸å…è®¸çš„æ–¹å¼åšäº†ä¸€ä¸ªè®¿é—®å¥—æ¥å­—çš„å°è¯•ã€‚</span><br></pre></td></tr></table></figure></div><ul><li>ç«¯å£è¢«å ç”¨ï¼Œå…³é—­è¢«å ç”¨ç«¯å£çš„ç¨‹åº</li><li><code>netstat -ano|findstr 8000</code></li><li><code>tasklist | findstr pidå·</code></li><li><code>taskkill /pid pidå· /f</code></li></ul><p><img src="/images/djangoRun/Snipaste_2021-01-28_20-07-56.png" alt></p><ul><li>æˆ–è€…æ”¹ç«¯å£<br><img src="/images/djangoRun/Snipaste_2021-01-28_20-10-41.png" alt></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;Other&quot;&gt;&lt;a href=&quot;#Other&quot; class=&quot;headerlink&quot; title=&quot;Other&quot;&gt;&lt;/a&gt;Other&lt;/h2&gt;&lt;h3 id=&quot;Error-WinError-10013-ä»¥ä¸€ç§è®¿é—®æƒé™ä¸å…è®¸çš„æ–¹å¼åš
      
    
    </summary>
    
    
    
      <category term="Django" scheme="http://www.orekiyuta.cn/tags/Django/"/>
    
      <category term="Python" scheme="http://www.orekiyuta.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python get function from String</title>
    <link href="http://www.orekiyuta.cn/archives/pythonGetFunctionFromString/"/>
    <id>http://www.orekiyuta.cn/archives/pythonGetFunctionFromString/</id>
    <published>2021-01-24T18:02:46.000Z</published>
    <updated>2021-01-24T18:17:18.948Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä»å˜é‡ä¸­è·å–å¯¹è±¡çš„å‡½æ•°å¹¶æ‰§è¡Œ"><a href="#ä»å˜é‡ä¸­è·å–å¯¹è±¡çš„å‡½æ•°å¹¶æ‰§è¡Œ" class="headerlink" title="ä»å˜é‡ä¸­è·å–å¯¹è±¡çš„å‡½æ•°å¹¶æ‰§è¡Œ"></a>ä»å˜é‡ä¸­è·å–å¯¹è±¡çš„å‡½æ•°å¹¶æ‰§è¡Œ</h2><ul><li><p>å•çº¯çš„æ‰§è¡Œæ–¹æ³•å¯ä»¥ç”¨ eval()ã€locals()ã€globals()</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">eval(func)() <span class="comment"># func ä¸ºå˜é‡å€¼</span></span><br><span class="line">locals()[func]()</span><br><span class="line">globals()[func]()</span><br></pre></td></tr></table></figure></div></li><li><p>è€Œä»å¯¹è±¡ä¸­æ‰§è¡Œæ–¹æ³•ç”¨ <code>__getattribute__</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chrome.__getattribute__(itemParser) <span class="comment"># å¯¹è±¡.__getattribute__(å˜é‡å€¼)</span></span><br></pre></td></tr></table></figure></div></li></ul><a id="more"></a><h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><ul><li><p>ä»å˜é‡ä»è¯»å–å‡½æ•°åå¹¶æ‰§è¡Œ,æé«˜å¤ç”¨åº¦</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">config = [&#123;<span class="string">'name'</span>: <span class="string">'qncyw'</span>, <span class="string">'url'</span>: <span class="string">'https://www.qncyw.com/site/signup'</span>,</span><br><span class="line">           <span class="string">'parser'</span>: <span class="string">'selector'</span>,</span><br><span class="line">           <span class="string">'phoneInputParser'</span>: <span class="string">'#username'</span>,</span><br><span class="line">           <span class="string">'sendButtonParser'</span>: <span class="string">'#btnSendCode'</span>&#125;,</span><br><span class="line">          &#123;<span class="string">'name'</span>: <span class="string">'360doc'</span>, <span class="string">'url'</span>: <span class="string">'http://www.360doc.com/register.aspx'</span>,</span><br><span class="line">           <span class="string">'parser'</span>: <span class="string">'selector'</span>,</span><br><span class="line">           <span class="string">'phoneInputParser'</span>: <span class="string">'#signMobileName'</span>,</span><br><span class="line">           <span class="string">'sendButtonParser'</span>: <span class="string">'#sign_sendcode'</span>&#125;,</span><br><span class="line">          &#123;<span class="string">'name'</span>: <span class="string">'iwgame'</span>, <span class="string">'url'</span>: <span class="string">'http://passport.iwgame.com/reg/account/regpage.do'</span>,</span><br><span class="line">           <span class="string">'parser'</span>: <span class="string">'xpath'</span>,</span><br><span class="line">           <span class="string">'phoneInputParser'</span>: <span class="string">'//*[@name="identityId"]'</span>,</span><br><span class="line">           <span class="string">'sendButtonParser'</span>: <span class="string">'//*[@id="regPersonalForm"]/ul/li[5]/div[1]/em/a'</span>&#125;,</span><br><span class="line">          ]</span><br><span class="line">          </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">eboo</span><span class="params">(chrome)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> config:</span><br><span class="line">        itemName = item[<span class="string">'name'</span>]</span><br><span class="line">        itemUrl = item[<span class="string">'url'</span>]</span><br><span class="line">        itemParser = <span class="string">''</span></span><br><span class="line">        setDateTime = time.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>, time.localtime(time.time()))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            chrome.get(itemUrl)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> item[<span class="string">'parser'</span>] == <span class="string">'selector'</span>:</span><br><span class="line">                itemParser = <span class="string">'find_element_by_css_selector'</span></span><br><span class="line">            <span class="keyword">elif</span> item[<span class="string">'parser'</span>] == <span class="string">'xpath'</span>:</span><br><span class="line">                itemParser = <span class="string">'find_element_by_xpath'</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># chrome å¯¹è±¡é€šè¿‡ __getattribute__ æ–¹æ³•å»æ‰§è¡Œåä¸º itemParser å˜é‡å€¼çš„å‡½æ•°</span></span><br><span class="line">            chrome.__getattribute__(itemParser)(item[<span class="string">'phoneInputParser'</span>]).send_keys(phoneNum)</span><br><span class="line">            chrome.__getattribute__(itemParser)(item[<span class="string">'sendButtonParser'</span>]).click()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">except</span> NoSuchElementException <span class="keyword">as</span> error:</span><br><span class="line">            print(<span class="string">f"<span class="subst">&#123;itemName&#125;</span> ---&gt; <span class="subst">&#123;error&#125;</span>"</span>)</span><br><span class="line">            chrome.get_screenshot_as_file(<span class="string">'./error/'</span> + itemName + <span class="string">'_'</span> + setDateTime + <span class="string">'.png'</span>)</span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            print(<span class="string">f"<span class="subst">&#123;itemName&#125;</span> already completed at <span class="subst">&#123;setDateTime&#125;</span>"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ChromeOpen</span><span class="params">()</span>:</span></span><br><span class="line"></span><br><span class="line">    headers = <span class="string">'user-agent="Mozilla/5.0 (Windows NT 10.0; WOW64; rv:38.0) Gecko/20100101 Firefox/38.0" '</span></span><br><span class="line">    options = ChromeOptions()</span><br><span class="line">    options.add_argument(headers)</span><br><span class="line">    chrome = Chrome(options=options)</span><br><span class="line">    <span class="keyword">return</span> chrome</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">chrome_open = ChromeOpen()</span><br><span class="line">eboo(chrome_open)</span><br></pre></td></tr></table></figure></div></li><li><p>ğŸ‘‰ <a href="https://segmentfault.com/a/1190000010476065" target="_blank" rel="noopener">Python é€šè¿‡å­—ç¬¦ä¸²è°ƒç”¨å‡½æ•°æˆ–æ–¹æ³•</a></p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä»å˜é‡ä¸­è·å–å¯¹è±¡çš„å‡½æ•°å¹¶æ‰§è¡Œ&quot;&gt;&lt;a href=&quot;#ä»å˜é‡ä¸­è·å–å¯¹è±¡çš„å‡½æ•°å¹¶æ‰§è¡Œ&quot; class=&quot;headerlink&quot; title=&quot;ä»å˜é‡ä¸­è·å–å¯¹è±¡çš„å‡½æ•°å¹¶æ‰§è¡Œ&quot;&gt;&lt;/a&gt;ä»å˜é‡ä¸­è·å–å¯¹è±¡çš„å‡½æ•°å¹¶æ‰§è¡Œ&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;å•çº¯çš„æ‰§è¡Œæ–¹æ³•å¯ä»¥ç”¨ eval()ã€locals()ã€globals()&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;eval(func)() &lt;span class=&quot;comment&quot;&gt;# func ä¸ºå˜é‡å€¼&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;locals()[func]()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;globals()[func]()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;è€Œä»å¯¹è±¡ä¸­æ‰§è¡Œæ–¹æ³•ç”¨ &lt;code&gt;__getattribute__&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;chrome.__getattribute__(itemParser) &lt;span class=&quot;comment&quot;&gt;# å¯¹è±¡.__getattribute__(å˜é‡å€¼)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
    
      <category term="Python" scheme="http://www.orekiyuta.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>MySQL Split String By Procedure</title>
    <link href="http://www.orekiyuta.cn/archives/mysqlSplitStringByProcedure/"/>
    <id>http://www.orekiyuta.cn/archives/mysqlSplitStringByProcedure/</id>
    <published>2021-01-20T16:17:23.000Z</published>
    <updated>2021-01-21T14:24:23.870Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Scene"><a href="#Scene" class="headerlink" title="Scene"></a>Scene</h2><ul><li>æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œéœ€è¦æŠŠä¸€ä¸ªè¡¨ä¸­çš„æŸä¸ªå­—æ®µå†…çš„å­—ç¬¦ä¸²åˆ†å‰²æˆåˆ—</li></ul><table><thead><tr><th style="text-align:center">roleCode</th><th style="text-align:center">users</th></tr></thead><tbody><tr><td style="text-align:center">4dc51344e6674c03ae0a176d3d0ae14e_20865</td><td style="text-align:center">xb,guojinyu,jiangyuan,ly_bmcc,wwm,lck,wusuihua</td></tr><tr><td style="text-align:center">4dc51344e6674c03ae0a176d3d0ae14e_20866</td><td style="text-align:center">zlj,mashaomeng</td></tr><tr><td style="text-align:center">4dc51344e6674c03ae0a176d3d0ae14e_20867</td><td style="text-align:center">tianye2</td></tr><tr><td style="text-align:center">4dc51344e6674c03ae0a176d3d0ae14e_20869</td><td style="text-align:center">wangyinju,liu_yan</td></tr></tbody></table><ul><li>å°±æ˜¯æŠŠä¸Šé¢çš„è¡¨æ ¼æ‹†åˆ†æˆä¸‹é¢çš„æ ·å­</li></ul><table><thead><tr><th style="text-align:center">roleCode</th><th style="text-align:center">users</th></tr></thead><tbody><tr><td style="text-align:center">4dc51344e6674c03ae0a176d3d0ae14e_20865</td><td style="text-align:center">xb</td></tr><tr><td style="text-align:center">4dc51344e6674c03ae0a176d3d0ae14e_20865</td><td style="text-align:center">guojinyu</td></tr><tr><td style="text-align:center">4dc51344e6674c03ae0a176d3d0ae14e_20865</td><td style="text-align:center">jiangyuan</td></tr><tr><td style="text-align:center">4dc51344e6674c03ae0a176d3d0ae14e_20865</td><td style="text-align:center">ly_bmcc</td></tr><tr><td style="text-align:center">4dc51344e6674c03ae0a176d3d0ae14e_20865</td><td style="text-align:center">wwm</td></tr><tr><td style="text-align:center">4dc51344e6674c03ae0a176d3d0ae14e_20865</td><td style="text-align:center">lck</td></tr><tr><td style="text-align:center">4dc51344e6674c03ae0a176d3d0ae14e_20865</td><td style="text-align:center">wusuihua</td></tr><tr><td style="text-align:center">4dc51344e6674c03ae0a176d3d0ae14e_20866</td><td style="text-align:center">zlj</td></tr><tr><td style="text-align:center">4dc51344e6674c03ae0a176d3d0ae14e_20866</td><td style="text-align:center">mashaomeng</td></tr><tr><td style="text-align:center">4dc51344e6674c03ae0a176d3d0ae14e_20867</td><td style="text-align:center">tianye2</td></tr><tr><td style="text-align:center">4dc51344e6674c03ae0a176d3d0ae14e_20869</td><td style="text-align:center">wangyinju</td></tr><tr><td style="text-align:center">4dc51344e6674c03ae0a176d3d0ae14e_20869</td><td style="text-align:center">liu_yan</td></tr></tbody></table><a id="more"></a><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><ul><li>å› ä¸ºè¦ç”¨åˆ°å¾ªç¯ï¼Œæ‰€ä»¥å¾—ç”¨å­˜å‚¨è¿‡ç¨‹å»è§£å†³è¿™ä¸ªé—®é¢˜<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">DECLARE</span> i <span class="built_in">INT</span>;</span><br><span class="line">    <span class="keyword">DECLARE</span> j <span class="built_in">INT</span>;</span><br><span class="line">    <span class="comment">-- åˆ›å»ºè¡¨å­˜å‚¨ç»“æœ</span></span><br><span class="line">    <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="keyword">result</span>(roleCode <span class="built_in">VARCHAR</span>(<span class="number">255</span>),<span class="keyword">users</span> <span class="built_in">VARCHAR</span>(<span class="number">255</span>));</span><br><span class="line">    <span class="comment">-- ä½¿ç”¨ä¸´æ—¶è¡¨æ‰§è¡Œé€Ÿåº¦ä¼šå¿«äº›</span></span><br><span class="line">    <span class="comment">-- CREATE TEMPORARY TABLE IF NOT EXISTS result(roleCode VARCHAR(255),users VARCHAR(255));</span></span><br><span class="line">    <span class="comment">-- è·å–è¡Œæ•°ï¼Œç”¨äºç¬¬ä¸€å±‚å¾ªç¯</span></span><br><span class="line">    <span class="keyword">SET</span> @cols_num = (<span class="keyword">SELECT</span> <span class="keyword">count</span>(<span class="keyword">users</span>) <span class="keyword">FROM</span> <span class="string">`user`</span>); </span><br><span class="line"><span class="keyword">SET</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    WHILE i &lt; @cols_num DO</span><br><span class="line">        <span class="keyword">SET</span> j = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">-- è·å– users å­—æ®µå†…çš„è¢« â€œ,â€ åˆ†å‰²çš„å­—ç¬¦ä¸²æ•°ç›®</span></span><br><span class="line">        <span class="comment">-- LENGTH(users) - LENGTH(REPLACE(users,',',''))+1 AS userNums</span></span><br><span class="line">        <span class="comment">-- å°†å­—ç¬¦ä¸²æ•°ç›®èµ‹ç»™å˜é‡ @str_num ,ç”¨äºç¬¬äºŒå±‚å¾ªç¯</span></span><br><span class="line">        <span class="comment">-- åŒæ—¶å–å¾—å½“å‰è®°å½•çš„ roleCode,æŠŠå€¼èµ‹ç»™å˜é‡ @roleCode</span></span><br><span class="line">        <span class="keyword">SELECT</span> roleCode,<span class="keyword">LENGTH</span>(<span class="keyword">users</span>) - <span class="keyword">LENGTH</span>(<span class="keyword">REPLACE</span>(<span class="keyword">users</span>,<span class="string">','</span>,<span class="string">''</span>))+<span class="number">1</span> <span class="keyword">AS</span> userNums  </span><br><span class="line">        <span class="keyword">INTO</span> @roleCode,@str_num <span class="keyword">FROM</span> <span class="string">`user`</span> <span class="keyword">LIMIT</span> i,<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        WHILE j &lt; @str_num DO</span><br><span class="line">            <span class="comment">-- å–å¾—å½“å‰æŸ¥è¯¢çš„è®°å½•çš„ users å­—æ®µè¢«åˆ†å‰²çš„æœ€åä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">            <span class="keyword">SELECT</span> SUBSTRING_INDEX(SUBSTRING_INDEX(<span class="keyword">users</span>,<span class="string">','</span>,j+<span class="number">1</span>),<span class="string">','</span>,<span class="number">-1</span>) <span class="keyword">AS</span> <span class="keyword">users</span> </span><br><span class="line">            <span class="keyword">INTO</span> @<span class="keyword">users</span> <span class="keyword">FROM</span> <span class="string">`user`</span> <span class="keyword">LIMIT</span> i,<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">result</span>(roleCode,<span class="keyword">users</span>) <span class="keyword">VALUES</span> (@roleCode,@<span class="keyword">users</span>);</span><br><span class="line">                        </span><br><span class="line">            <span class="keyword">SET</span> j = j+<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">END</span> <span class="keyword">WHILE</span>;</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">SET</span> i = i+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">WHILE</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- æŸ¥è¯¢ç»“æœ</span></span><br><span class="line">    <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">result</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure></div></li></ul><h2 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h2><ul><li>å¦‚æœè¦é€†å‘è¿˜åŸï¼Œåªéœ€æ‰§è¡Œä¸‹é¢è¯­å¥å³å¯<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> roleCode,<span class="keyword">GROUP_CONCAT</span>(<span class="keyword">users</span>) <span class="keyword">AS</span> <span class="keyword">users</span> <span class="keyword">FROM</span> <span class="keyword">result</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> roleCode;</span><br></pre></td></tr></table></figure></div></li></ul><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><p>å­˜å‚¨è¿‡ç¨‹åŸºæœ¬ç”¨æ³•</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">exists</span> test_tbl;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test_tbl (<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>), <span class="keyword">status</span> <span class="built_in">int</span>(<span class="number">2</span>));</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test_tbl <span class="keyword">values</span>(<span class="string">'abc'</span>, <span class="number">1</span>),(<span class="string">'edf'</span>, <span class="number">2</span>),(<span class="string">'xyz'</span>, <span class="number">3</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">procedure</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> pro_test_3;</span><br><span class="line">delimiter //</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> pro_test_3()</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="comment">--  æ–¹å¼ 1</span></span><br><span class="line">    <span class="keyword">DECLARE</span> cnt <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">into</span> cnt <span class="keyword">from</span> test_tbl;</span><br><span class="line">    <span class="keyword">select</span> cnt;</span><br><span class="line"> </span><br><span class="line"><span class="comment">--  æ–¹å¼ 2</span></span><br><span class="line">    <span class="keyword">set</span> @cnt = (<span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> test_tbl);</span><br><span class="line">    <span class="keyword">select</span> @cnt;</span><br><span class="line"></span><br><span class="line"><span class="comment">--  æ–¹å¼ 3</span></span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">into</span> @cnt1 <span class="keyword">from</span> test_tbl;</span><br><span class="line">    <span class="keyword">select</span> @cnt1;</span><br><span class="line"></span><br><span class="line"><span class="comment">--  å¤šä¸ªåˆ—çš„æƒ…å†µä¸‹ä¼¼ä¹åªèƒ½ç”¨ into æ–¹å¼</span></span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">max</span>(<span class="keyword">status</span>), <span class="keyword">avg</span>(<span class="keyword">status</span>) <span class="keyword">into</span> @<span class="keyword">max</span>, @<span class="keyword">avg</span> <span class="keyword">from</span> test_tbl;</span><br><span class="line">    <span class="keyword">select</span> @<span class="keyword">max</span>, @<span class="keyword">avg</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">call</span> pro_test_3();</span><br></pre></td></tr></table></figure></div></li><li><p>ğŸ‘‰ <a href="https://www.cnblogs.com/qdhxhz/category/1222307.html" target="_blank" rel="noopener">MySQLï¼ˆ7ï¼‰â€”å­˜å‚¨è¿‡ç¨‹</a></p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Scene&quot;&gt;&lt;a href=&quot;#Scene&quot; class=&quot;headerlink&quot; title=&quot;Scene&quot;&gt;&lt;/a&gt;Scene&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œéœ€è¦æŠŠä¸€ä¸ªè¡¨ä¸­çš„æŸä¸ªå­—æ®µå†…çš„å­—ç¬¦ä¸²åˆ†å‰²æˆåˆ—&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;roleCode&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;users&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4dc51344e6674c03ae0a176d3d0ae14e_20865&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;xb,guojinyu,jiangyuan,ly_bmcc,wwm,lck,wusuihua&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4dc51344e6674c03ae0a176d3d0ae14e_20866&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;zlj,mashaomeng&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4dc51344e6674c03ae0a176d3d0ae14e_20867&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;tianye2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4dc51344e6674c03ae0a176d3d0ae14e_20869&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;wangyinju,liu_yan&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;å°±æ˜¯æŠŠä¸Šé¢çš„è¡¨æ ¼æ‹†åˆ†æˆä¸‹é¢çš„æ ·å­&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;roleCode&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;users&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4dc51344e6674c03ae0a176d3d0ae14e_20865&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;xb&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4dc51344e6674c03ae0a176d3d0ae14e_20865&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;guojinyu&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4dc51344e6674c03ae0a176d3d0ae14e_20865&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;jiangyuan&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4dc51344e6674c03ae0a176d3d0ae14e_20865&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;ly_bmcc&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4dc51344e6674c03ae0a176d3d0ae14e_20865&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;wwm&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4dc51344e6674c03ae0a176d3d0ae14e_20865&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;lck&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4dc51344e6674c03ae0a176d3d0ae14e_20865&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;wusuihua&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4dc51344e6674c03ae0a176d3d0ae14e_20866&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;zlj&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4dc51344e6674c03ae0a176d3d0ae14e_20866&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;mashaomeng&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4dc51344e6674c03ae0a176d3d0ae14e_20867&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;tianye2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4dc51344e6674c03ae0a176d3d0ae14e_20869&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;wangyinju&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4dc51344e6674c03ae0a176d3d0ae14e_20869&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;liu_yan&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
    
    </summary>
    
    
    
      <category term="MySQL" scheme="http://www.orekiyuta.cn/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQL Sync to Mariadb</title>
    <link href="http://www.orekiyuta.cn/archives/mysqlSyncToMariadb/"/>
    <id>http://www.orekiyuta.cn/archives/mysqlSyncToMariadb/</id>
    <published>2021-01-20T12:43:04.000Z</published>
    <updated>2021-01-20T13:08:24.882Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Unkown-collation-â€™utf8mb4-0900-ai-ciâ€™"><a href="#Unkown-collation-â€™utf8mb4-0900-ai-ciâ€™" class="headerlink" title="Unkown collation:â€™utf8mb4_0900_ai_ciâ€™"></a>Unkown collation:â€™utf8mb4_0900_ai_ciâ€™</h2><ul><li>æŠŠ MySQL æ•°æ®åŒæ­¥åˆ° Mariadb å‡ºç°æ’åºè§„åˆ™ä¸ä¸€è‡´</li><li>MySQL æ•°æ®åº“é»˜è®¤å­—ç¬¦é›†å’Œæ’åºè§„åˆ™<br><img src="/images/mysqlSyncToMariadb/Snipaste_2021-01-20_21-07-07.png" alt></li><li>MySQL è½¬å‚¨çš„ SQL æ–‡ä»¶é»˜è®¤<code>DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci</code></li><li>Mariadb æ•°æ®åº“é»˜è®¤å­—ç¬¦é›†å’Œæ’åºè§„åˆ™<br><img src="/images/mysqlSyncToMariadb/Snipaste_2021-01-20_20-47-17.png" alt></li><li>Mariadb è½¬å‚¨çš„ SQL æ–‡ä»¶é»˜è®¤<code>DEFAULT CHARSET=utf8mb4;</code></li></ul><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><ul><li>åœ¨ Mariadb ä¸­æ’åºè§„åˆ™æ²¡æœ‰ utf8mb4_0900_ai_ci </li><li>è§£å†³æ–¹æ³•æ˜¯ ï¼šè½¬å‚¨ MySQL æ•°æ®ï¼Œç„¶åæŠŠ SQL æ–‡ä»¶é‡Œçš„ <code>COLLATE=utf8mb4_0900_ai_ci</code>å…¨éƒ¨æ›¿æ¢æˆ <code>COLLATE=utf8mb4_general_ci</code> å³å¯<ul><li>æˆ–è€…æ˜¯æŠŠ SQL æ–‡ä»¶é‡Œçš„ <code>COLLATE=utf8mb4_0900_ai_ci</code> å»æ‰</li></ul></li><li>æ€»çš„æ¥è¯´å°±æ˜¯æŠŠè®¾ç½®é…æˆä¸€è‡´å°±å¯ä»¥äº†</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Unkown-collation-â€™utf8mb4-0900-ai-ciâ€™&quot;&gt;&lt;a href=&quot;#Unkown-collation-â€™utf8mb4-0900-ai-ciâ€™&quot; class=&quot;headerlink&quot; title=&quot;Unkown collation:â€™
      
    
    </summary>
    
    
    
      <category term="MySQL" scheme="http://www.orekiyuta.cn/tags/MySQL/"/>
    
      <category term="Mariadb" scheme="http://www.orekiyuta.cn/tags/Mariadb/"/>
    
  </entry>
  
  <entry>
    <title>Local-anywhere and CORS</title>
    <link href="http://www.orekiyuta.cn/archives/localAnywhereAndCORS/"/>
    <id>http://www.orekiyuta.cn/archives/localAnywhereAndCORS/</id>
    <published>2021-01-19T17:36:34.000Z</published>
    <updated>2021-01-19T17:43:24.654Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Scene"><a href="#Scene" class="headerlink" title="Scene"></a>Scene</h2><ul><li>æ‰“å¼€ä¸€ä¸ª html åŠ è½½äº†æœ¬åœ°ç›®å½•ä¸‹çš„æ–‡ä»¶å±…ç„¶è·¨åŸŸäº†ï¼ŒåŸå› åœ¨äºæœ¬åœ°æ–‡ä»¶çš„ä½¿ç”¨çš„æ˜¯ file åè®®</li><li>CORS ç­–ç•¥åªæ”¯æŒè¿™äº›åè®®ï¼šhttpã€dataã€ chromeã€chrome-extension ä»¥åŠ https</li><li>è¿™æ ·çš„è¯ï¼Œå¯ä»¥ç›´æ¥è½¬ä¸ªåè®®å°±å¥½äº†</li></ul><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><ul><li>èµ·ä¸ªåè®®æœåŠ¡</li><li><code>npm i anywhere -g</code> å®‰è£… anywhere</li><li><code>anywhere -h</code> åœ¨æ–‡ä»¶ç›®å½•å¯åŠ¨æœåŠ¡</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Scene&quot;&gt;&lt;a href=&quot;#Scene&quot; class=&quot;headerlink&quot; title=&quot;Scene&quot;&gt;&lt;/a&gt;Scene&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;æ‰“å¼€ä¸€ä¸ª html åŠ è½½äº†æœ¬åœ°ç›®å½•ä¸‹çš„æ–‡ä»¶å±…ç„¶è·¨åŸŸäº†ï¼ŒåŸå› åœ¨äºæœ¬åœ°æ–‡ä»¶çš„ä½¿ç”¨çš„æ˜¯ file åè®®&lt;/li
      
    
    </summary>
    
    
    
      <category term="CORS" scheme="http://www.orekiyuta.cn/tags/CORS/"/>
    
  </entry>
  
  <entry>
    <title>Reptiles and Raspberries</title>
    <link href="http://www.orekiyuta.cn/archives/reptilesAndRaspberries/"/>
    <id>http://www.orekiyuta.cn/archives/reptilesAndRaspberries/</id>
    <published>2021-01-08T13:49:18.000Z</published>
    <updated>2021-01-10T18:16:44.067Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åˆ†ææ¥å£æ•°æ®ç»“æ„"><a href="#åˆ†ææ¥å£æ•°æ®ç»“æ„" class="headerlink" title="åˆ†ææ¥å£æ•°æ®ç»“æ„"></a>åˆ†ææ¥å£æ•°æ®ç»“æ„</h2><ul><li>æ‰¾åˆ°æ•°æ®çš„æ¥å£ä¿¡æ¯ä¹‹åï¼Œè¯·æ±‚è·å–æ•°æ®å¹¶é€å±‚åˆ†ææ•°æ®ç»“æ„</li><li>ç„¶åæå–éœ€è¦çš„æ•°æ®</li><li>æœ€åå°è£…æˆæ–¹æ³•<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_tencent_virus_data</span><span class="params">()</span>:</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit'</span></span><br><span class="line">                      <span class="string">'/537.36 (KHTML, like Gecko) Chrome/53.0.2785.143 Safar'</span></span><br><span class="line">                      <span class="string">'i/537.36'</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># https://news.qq.com/zt2020/page/feiyan.htm#/</span></span><br><span class="line">    url = <span class="string">"https://view.inews.qq.com/g2/getOnsInfo?name=disease_h5"</span></span><br><span class="line">    res = requests.get(url, headers=headers)</span><br><span class="line">    res.encoding = <span class="string">"utf-8"</span></span><br><span class="line">    getSource = json.loads(res.text)</span><br><span class="line">    sourceData = json.loads(getSource[<span class="string">"data"</span>])</span><br><span class="line"></span><br><span class="line">    lastUpdateTime = sourceData[<span class="string">"lastUpdateTime"</span>]  <span class="comment"># æœ€åæ›´æ–°æ—¶é—´</span></span><br><span class="line">    chinaTotal = sourceData[<span class="string">"chinaTotal"</span>]  <span class="comment"># æ€»æƒ…å†µ</span></span><br><span class="line">    chinaAdd = sourceData[<span class="string">"chinaAdd"</span>]  <span class="comment"># æ€»ç¡®è¯Š</span></span><br><span class="line">    areaTree = sourceData[<span class="string">"areaTree"</span>]  <span class="comment"># å›½å®¶</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å›½å®¶åˆ—è¡¨,ä¸­å›½</span></span><br><span class="line">    name = areaTree[<span class="number">0</span>][<span class="string">"name"</span>]  <span class="comment"># ä¸­å›½</span></span><br><span class="line">    today = areaTree[<span class="number">0</span>][<span class="string">"today"</span>]  <span class="comment"># ä»Šå¤©æ–°å¢ç¡®è¯Š</span></span><br><span class="line">    total = areaTree[<span class="number">0</span>][<span class="string">"total"</span>]  <span class="comment"># ä»Šæ—¥æ€»æƒ…å†µ</span></span><br><span class="line">    provinces = areaTree[<span class="number">0</span>][<span class="string">"children"</span>]  <span class="comment"># 34ä¸ªçœä»½</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># print(name)</span></span><br><span class="line">    <span class="comment"># print(today)</span></span><br><span class="line">    <span class="comment"># print(total)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä»Šæ—¥ç¡®è¯Šï¼Œç›®å‰ç¡®è¯Šï¼Œæ€»ç¡®è¯Šï¼Œæ€»æ­»äº¡æ•°ï¼Œæ€»æ­»äº¡æ¦‚ç‡ï¼Œæ€»åº·å¤æ•°ï¼Œæ€»åº·å¤æ¦‚ç‡</span></span><br><span class="line">    daily_data = [name, today[<span class="string">"confirm"</span>], total[<span class="string">"nowConfirm"</span>], total[<span class="string">"confirm"</span>], total[<span class="string">"dead"</span>], total[<span class="string">"deadRate"</span>],</span><br><span class="line">                  total[<span class="string">"heal"</span>], total[<span class="string">"healRate"</span>]]</span><br><span class="line"></span><br><span class="line">    today_details = []</span><br><span class="line">    <span class="keyword">for</span> province <span class="keyword">in</span> provinces:</span><br><span class="line">        <span class="comment"># print(province["name"])  # çœå</span></span><br><span class="line">        <span class="comment"># print(province["today"])</span></span><br><span class="line">        <span class="comment"># print(province["total"])</span></span><br><span class="line">        province_name_ = province[<span class="string">"name"</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># çœæ‰€å±åŸå¸‚</span></span><br><span class="line">        <span class="keyword">for</span> city <span class="keyword">in</span> province[<span class="string">"children"</span>]:</span><br><span class="line">            city_name_ = city[<span class="string">"name"</span>]</span><br><span class="line">            city_today_confirm_ = city[<span class="string">"today"</span>][<span class="string">"confirm"</span>]  <span class="comment"># è¯¥åŸå¸‚ä»Šæ—¥ç¡®è¯Š</span></span><br><span class="line">            city_total_confirm_ = city[<span class="string">"total"</span>][<span class="string">"confirm"</span>]  <span class="comment"># è¯¥åŸå¸‚æ€»ç¡®è¯Š</span></span><br><span class="line">            city_total_heal_ = city[<span class="string">"total"</span>][<span class="string">"heal"</span>]  <span class="comment"># è¯¥åŸå¸‚æ€»åº·å¤</span></span><br><span class="line">            city_total_heal_rate_ = city[<span class="string">"total"</span>][<span class="string">"healRate"</span>]  <span class="comment"># è¯¥åŸå¸‚æ€»åº·å¤æ¦‚ç‡</span></span><br><span class="line">            city_total_dead_ = city[<span class="string">"total"</span>][<span class="string">"dead"</span>]  <span class="comment"># è¯¥åŸå¸‚æ€»æ­»äº¡</span></span><br><span class="line">            city_total_dead_rate_ = city[<span class="string">"total"</span>][<span class="string">"deadRate"</span>]  <span class="comment"># è¯¥åŸå¸‚æ€»æ­»äº¡æ¦‚ç‡</span></span><br><span class="line">            today_details.append([lastUpdateTime, province_name_, city_name_, city_today_confirm_,</span><br><span class="line">                                  city_total_confirm_, city_total_heal_, city_total_heal_rate_,</span><br><span class="line">                                  city_total_dead_, city_total_dead_rate_</span><br><span class="line">                                  ])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> today_details, daily_data</span><br></pre></td></tr></table></figure></div></li></ul><a id="more"></a><h2 id="æ•°æ®åº“è¿æ¥"><a href="#æ•°æ®åº“è¿æ¥" class="headerlink" title="æ•°æ®åº“è¿æ¥"></a>æ•°æ®åº“è¿æ¥</h2><ul><li>è¿™é‡Œä¸»è¦åœ¨äºå»ºç«‹æ•°æ®åº“è¿æ¥ï¼Œå¹¶å–å¾—æ¸¸æ ‡å»æ“ä½œæ•°æ®</li><li>è¿æ¥æ•°æ®åº“æ“ä½œå®Œæ¯•ä¹‹åéœ€è¦åŠæ—¶å…³é—­è¿æ¥<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mariadb_conn</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        conn = mariadb.connect(</span><br><span class="line">            user=<span class="string">"root"</span>,</span><br><span class="line">            password=<span class="string">"raspberry"</span>,</span><br><span class="line">            host=<span class="string">"192.168.137.47"</span>,</span><br><span class="line">            port=<span class="number">3306</span>,</span><br><span class="line">            database=<span class="string">"virus"</span></span><br><span class="line">        )</span><br><span class="line">        cursor = conn.cursor()</span><br><span class="line">        <span class="keyword">return</span> conn, cursor</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> mariadb.Error <span class="keyword">as</span> e:</span><br><span class="line">        print(<span class="string">f"Error connecting to MariaDB Platform: <span class="subst">&#123;e&#125;</span>"</span>)</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mariadb_conn_close</span><span class="params">(conn, cursor)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> cursor:</span><br><span class="line">        cursor.close()</span><br><span class="line">    <span class="keyword">if</span> conn:</span><br><span class="line">        conn.close()</span><br></pre></td></tr></table></figure></div></li></ul><h2 id="è·å–æ•°æ®å¹¶æŒä¹…åŒ–"><a href="#è·å–æ•°æ®å¹¶æŒä¹…åŒ–" class="headerlink" title="è·å–æ•°æ®å¹¶æŒä¹…åŒ–"></a>è·å–æ•°æ®å¹¶æŒä¹…åŒ–</h2><ul><li>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯æ¸¸æ ‡çš„æ“ä½œ <code>cursor.execute()</code></li><li>å¦‚æœæ˜¯æŸ¥è¯¢è¯­å¥çš„è¯ï¼Œæ¸¸æ ‡æ‰§è¡Œä¹‹åå°±èƒ½å¾—åˆ°è¿”å›çš„æ•°æ®</li><li>å…¶ä»–çš„è¯­å¥éœ€è¦æäº¤äº‹åŠ¡<code>conn.commit()</code>æ‰èƒ½å¾—åˆ°è¿”å›çš„æ•°æ®<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›´æ–°æ¯æ—¥çš„è¯¦æƒ…æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update_virus_data</span><span class="params">()</span>:</span></span><br><span class="line">    cursor = <span class="literal">None</span></span><br><span class="line">    conn = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        virus_data = get_tencent_virus_data()[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># conn, cursor = mariadb_conn("root", "raspberry", "192.168.137.165", 3306, "virus")</span></span><br><span class="line">        conn, cursor = mariadb_conn()</span><br><span class="line">        setDataTime = time.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>, time.localtime(time.time()))</span><br><span class="line">        sql_insert_data = <span class="string">"insert into tencent_virus_data(lastUpdateTime,province_name_,"</span> \</span><br><span class="line">                          <span class="string">"city_name_,city_today_confirm_,city_total_confirm_,"</span> \</span><br><span class="line">                          <span class="string">"city_total_heal_,city_total_heal_rate_,"</span> \</span><br><span class="line">                          <span class="string">"city_total_dead_,city_total_dead_rate_,"</span> \</span><br><span class="line">                          <span class="string">"setDataTime"</span><span class="string">") values (%s,%s,%s,%s,%s,%s,%s,%s,%s,%s)"</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># å–æ•°æ®åº“æœ€åä¸€ä¸ªè®°å½•çš„æ—¶é—´å­—æ®µ</span></span><br><span class="line">        sql_lastTime = <span class="string">"select lastUpdateTime from tencent_virus_data order by id desc limit 1"</span></span><br><span class="line">        cursor.execute(sql_lastTime)</span><br><span class="line">        lastUpdateTime = cursor.fetchone()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç¬¬ä¸€æ¬¡åˆå§‹åŒ–æ•°æ®</span></span><br><span class="line">        <span class="keyword">if</span> lastUpdateTime <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            print(<span class="string">f"<span class="subst">&#123;time.asctime()&#125;</span>    ---&gt;    æ»´æ»´ï¼åˆå§‹åŒ–æœ€åˆçš„æ•°æ®ï¼"</span>)</span><br><span class="line">            <span class="keyword">for</span> item <span class="keyword">in</span> virus_data:</span><br><span class="line">                item.append(setDataTime)</span><br><span class="line">                print(item)</span><br><span class="line">                cursor.execute(sql_insert_data, item)</span><br><span class="line">            conn.commit()</span><br><span class="line">            print(<span class="string">f"<span class="subst">&#123;time.asctime()&#125;</span>    ---&gt;    å—’å—’ï¼åˆå§‹åŒ–æ•°æ®å®Œæ¯•ï¼"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># éç¬¬ä¸€æ¬¡æ›´æ–°æ•°æ®</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># virus_data[0][0] æ‹¿ç¬¬ä¸€æ¡æ•°æ®çš„æ—¶é—´å­—æ®µ,å› ä¸ºæ¯æ¡æ•°æ®æ—¶é—´éƒ½æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">            dataNowTime = datetime.strptime(virus_data[<span class="number">0</span>][<span class="number">0</span>], <span class="string">'%Y-%m-%d %H:%M:%S'</span>)</span><br><span class="line">            <span class="comment"># æ•°æ®åº“æœ€æ–°è®°å½•æ—¶é—´ ä¸ å½“å‰è¯·æ±‚çš„æ•°æ®æ—¶é—´å¯¹æ¯”ï¼Œåˆ¤æ–­æ˜¯å¦æ›´æ–°æ•°æ®</span></span><br><span class="line">            <span class="keyword">if</span> dataNowTime &gt; lastUpdateTime[<span class="number">0</span>]:</span><br><span class="line">                print(<span class="string">f"<span class="subst">&#123;time.asctime()&#125;</span>    ---&gt;    æ»´æ»´ï¼å¼€å§‹æ›´æ–°æœ€æ–°æ•°æ®ï¼"</span>)</span><br><span class="line">                <span class="keyword">for</span> item <span class="keyword">in</span> virus_data:</span><br><span class="line">                    item.append(setDataTime)</span><br><span class="line">                    cursor.execute(sql_insert_data, item)</span><br><span class="line">                conn.commit()</span><br><span class="line">                print(<span class="string">f"<span class="subst">&#123;time.asctime()&#125;</span>    ---&gt;    å—’å—’ï¼æ›´æ–°æœ€æ–°æ•°æ®å®Œæ¯•ï¼"</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(<span class="string">f"<span class="subst">&#123;time.asctime()&#125;</span>    ---&gt;    å—¯ï¼å·²æ˜¯æœ€æ–°æ•°æ®ï¼"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        traceback.print_exc()</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        mariadb_conn_close(conn, cursor)</span><br></pre></td></tr></table></figure></div></li></ul><h2 id="ä»é¡µé¢æŠ“å–æ•°æ®"><a href="#ä»é¡µé¢æŠ“å–æ•°æ®" class="headerlink" title="ä»é¡µé¢æŠ“å–æ•°æ®"></a>ä»é¡µé¢æŠ“å–æ•°æ®</h2><h3 id="ä¸€èˆ¬çš„é¡µé¢ï¼Œç›´æ¥è¯·æ±‚è§£æè·å–å³å¯"><a href="#ä¸€èˆ¬çš„é¡µé¢ï¼Œç›´æ¥è¯·æ±‚è§£æè·å–å³å¯" class="headerlink" title="ä¸€èˆ¬çš„é¡µé¢ï¼Œç›´æ¥è¯·æ±‚è§£æè·å–å³å¯"></a>ä¸€èˆ¬çš„é¡µé¢ï¼Œç›´æ¥è¯·æ±‚è§£æè·å–å³å¯</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">baidu_hotPoint</span><span class="params">()</span>:</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit'</span></span><br><span class="line">                      <span class="string">'/537.36 (KHTML, like Gecko) Chrome/53.0.2785.143 Safar'</span></span><br><span class="line">                      <span class="string">'i/537.36'</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    url = <span class="string">"http://top.baidu.com/buzz?b=1&amp;fr=topindex"</span></span><br><span class="line"></span><br><span class="line">    res = requests.get(url, headers=headers)</span><br><span class="line">    res.encoding = <span class="string">"gb2312"</span></span><br><span class="line">    html = res.text</span><br><span class="line">    soup = BeautifulSoup(html, <span class="string">"lxml"</span>)</span><br><span class="line">    titles = soup.find_all(name=<span class="string">"a"</span>, attrs=&#123;<span class="string">"class"</span>: <span class="string">"list-title"</span>&#125;)</span><br><span class="line">    content = [title.text <span class="keyword">for</span> title <span class="keyword">in</span> titles]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> content</span><br></pre></td></tr></table></figure></div><h3 id="å¦‚æœé¡µé¢ç”¨çš„æ˜¯-JS-åŠ è½½çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨-selenium-æ¨¡æ‹Ÿäººå·¥è·å–"><a href="#å¦‚æœé¡µé¢ç”¨çš„æ˜¯-JS-åŠ è½½çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨-selenium-æ¨¡æ‹Ÿäººå·¥è·å–" class="headerlink" title="å¦‚æœé¡µé¢ç”¨çš„æ˜¯ JS åŠ è½½çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ selenium æ¨¡æ‹Ÿäººå·¥è·å–"></a>å¦‚æœé¡µé¢ç”¨çš„æ˜¯ JS åŠ è½½çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ selenium æ¨¡æ‹Ÿäººå·¥è·å–</h3><ul><li>åœ¨è¿™é‡Œéœ€è¦æµè§ˆå™¨å’Œæµè§ˆå™¨é©±åŠ¨é…åˆ</li><li>è·å¾—å’Œ chrome æµè§ˆå™¨ç‰ˆæœ¬ä¸€è‡´çš„ chromedriver é©±åŠ¨</li><li>ğŸ‘‰ <a href="https://npm.taobao.org/mirrors/chromedriver/" target="_blank" rel="noopener">https://npm.taobao.org/mirrors/chromedriver/</a><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sogou_hotSearch</span><span class="params">()</span>:</span></span><br><span class="line">    headers = <span class="string">'user-agent="MQQBrowser/26 Mozilla/5.0 (Linux; U; Android 2.3.7; zh-cn; MB200 Build/GRJ22; '</span> \</span><br><span class="line">              <span class="string">'CyanogenMod-7) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1" '</span></span><br><span class="line"></span><br><span class="line">    url = <span class="string">"https://sa.sogou.com/new-weball/page/sgs/epidemic?type_page=VR"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line"></span><br><span class="line">    options = ChromeOptions()</span><br><span class="line">    options.add_argument(headers)</span><br><span class="line">    options.add_argument(<span class="string">"--headless"</span>)  <span class="comment"># éšè—æµè§ˆå™¨</span></span><br><span class="line">    options.add_argument(<span class="string">"--no-sandbox"</span>)  <span class="comment"># linux éœ€è¦ç¦ç”¨è¿™ä¸ª</span></span><br><span class="line">    options.add_argument(<span class="string">"--disable-gpu"</span>)</span><br><span class="line">    options.add_argument(<span class="string">'blink-settings=imagesEnabled=false'</span>)  <span class="comment"># ä¸åŠ è½½å›¾ç‰‡èµ„æº</span></span><br><span class="line">    chrome = Chrome(executable_path=<span class="string">"./chromedriver.exe"</span>, options=options)  <span class="comment"># è·¯å¾„åŠ è½½é©±åŠ¨</span></span><br><span class="line">    <span class="comment"># chrome = Chrome(options=options)</span></span><br><span class="line">    chrome.get(url)</span><br><span class="line">    el_lis = chrome.find_elements_by_xpath(<span class="string">'//*[@id="no_active_pane"]/div/div/div[2]/ul/li'</span>)</span><br><span class="line">    content = [el_li.text <span class="keyword">for</span> el_li <span class="keyword">in</span> el_lis]</span><br><span class="line">    chrome.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> content</span><br></pre></td></tr></table></figure></div></li></ul><h2 id="å»ºç«‹-Web-æœåŠ¡"><a href="#å»ºç«‹-Web-æœåŠ¡" class="headerlink" title="å»ºç«‹ Web æœåŠ¡"></a>å»ºç«‹ Web æœåŠ¡</h2><h3 id="æ•°æ®äº¤äº’"><a href="#æ•°æ®äº¤äº’" class="headerlink" title="æ•°æ®äº¤äº’"></a>æ•°æ®äº¤äº’</h3><ul><li>è¿™é‡Œä½¿ç”¨ flask å»ºç«‹ç®€å•çš„è¯·æ±‚æœåŠ¡</li><li><p>åœ¨æœåŠ¡ç«¯è¿”å›é¡µé¢éœ€è¦ç”¨åˆ° render_template</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> render_template</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/', methods=["get", "post"])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">"index.html"</span>)</span><br></pre></td></tr></table></figure></div></li><li><p>æ¥ç€åœ¨é¡µé¢å‘é€ ajax è¯·æ±‚å¯¹åº”çš„è·¯ç”±å³å¯</p></li></ul><h3 id="å»ºç«‹å·¥å…·ç±»æ¥å¤„ç†æ•°æ®"><a href="#å»ºç«‹å·¥å…·ç±»æ¥å¤„ç†æ•°æ®" class="headerlink" title="å»ºç«‹å·¥å…·ç±»æ¥å¤„ç†æ•°æ®"></a>å»ºç«‹å·¥å…·ç±»æ¥å¤„ç†æ•°æ®</h3><ul><li>åœ¨é¡¹ç›®æ ¹è·¯å¾„å»ºä¸€ä¸ª xxx.py æ¥ä¸“é—¨å¤„ç†æ•°æ®<ul><li>æ•°æ®åº“è¿æ¥æ–¹æ³•</li><li>æŸ¥è¯¢ç±»æ–¹æ³•</li><li>æ¯ä¸ªæ•°æ®æ¥å£æ–¹æ³•<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_time</span><span class="params">()</span>:</span></span><br><span class="line">    time_str = time.strftime(<span class="string">"%Y&#123;&#125;%m&#123;&#125;%d&#123;&#125; %X"</span>)</span><br><span class="line">    <span class="keyword">return</span> time_str.format(<span class="string">"å¹´"</span>, <span class="string">"æœˆ"</span>, <span class="string">"æ—¥"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mariadb_conn</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        conn = mariadb.connect(</span><br><span class="line">            user=<span class="string">"root"</span>,</span><br><span class="line">            password=<span class="string">"raspberry"</span>,</span><br><span class="line">            host=<span class="string">"192.168.137.47"</span>,</span><br><span class="line">            port=<span class="number">3306</span>,</span><br><span class="line">            database=<span class="string">"virus"</span></span><br><span class="line">        )</span><br><span class="line">        cursor = conn.cursor()</span><br><span class="line">        <span class="keyword">return</span> conn, cursor</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> mariadb.Error <span class="keyword">as</span> e:</span><br><span class="line">        print(<span class="string">f"Error connecting to MariaDB Platform: <span class="subst">&#123;e&#125;</span>"</span>)</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mariadb_conn_close</span><span class="params">(conn, cursor)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> cursor:</span><br><span class="line">        cursor.close()</span><br><span class="line">    <span class="keyword">if</span> conn:</span><br><span class="line">        conn.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(sql, *args)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    :param sql:</span></span><br><span class="line"><span class="string">    :param args</span></span><br><span class="line"><span class="string">    :return è¿”å›æŸ¥è¯¢ç»“æœ ((),())</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    conn, cursor = mariadb_conn()</span><br><span class="line">    cursor.execute(sql, args)</span><br><span class="line">    res = cursor.fetchall()</span><br><span class="line">    mariadb_conn_close(conn, cursor)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_daily_data</span><span class="params">()</span>:</span></span><br><span class="line">    sql = <span class="string">"select today_confirm,total_nowConfirm,"</span> \</span><br><span class="line">          <span class="string">"total_confirm,total_dead,total_deadRate,"</span> \</span><br><span class="line">          <span class="string">"total_heal,total_healRate from daily_data "</span> \</span><br><span class="line">          <span class="string">"where setDataTime=(select setDataTime from daily_data "</span> \</span><br><span class="line">          <span class="string">"order by setDataTime desc limit 1)"</span></span><br><span class="line">    res = query(sql)</span><br><span class="line">    <span class="keyword">return</span> res[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ°å›¾æ•´ä½“æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_area_data</span><span class="params">()</span>:</span></span><br><span class="line">    sql = <span class="string">"select province_name_,sum(city_total_confirm_) "</span> \</span><br><span class="line">          <span class="string">"from tencent_virus_data where lastUpdateTime=("</span> \</span><br><span class="line">          <span class="string">"select lastUpdateTime from tencent_virus_data "</span> \</span><br><span class="line">          <span class="string">"order by lastUpdateTime desc limit 1) "</span> \</span><br><span class="line">          <span class="string">"group by province_name_"</span></span><br><span class="line">    res = query(sql)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ€»è¶‹åŠ¿æœ€è¿‘åå¤©</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_GeneralTrend_data</span><span class="params">()</span>:</span></span><br><span class="line">    sql = <span class="string">"select today_confirm,total_nowConfirm,total_confirm,"</span> \</span><br><span class="line">          <span class="string">"total_dead,total_heal,setDataTime from daily_data "</span> \</span><br><span class="line">          <span class="string">"order by  id desc limit 10"</span></span><br><span class="line">    res = query(sql)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"><span class="comment"># get_GeneralTrend_data()[1:] # ä»ç¬¬äºŒæ¡æ•°æ®å¼€å§‹å–</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»Šæ—¥æœ‰æ–°å¢ç¡®è¯Šçš„çœå¸‚</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_todayNewConfrim_data</span><span class="params">()</span>:</span></span><br><span class="line">    sql = <span class="string">"select CONCAT(province_name_,'-',city_name_) as province_city,"</span> \</span><br><span class="line">          <span class="string">"city_today_confirm_,lastUpdateTime from tencent_virus_data "</span> \</span><br><span class="line">          <span class="string">"where city_today_confirm_ &gt;0 and lastUpdateTime=("</span> \</span><br><span class="line">          <span class="string">"select lastUpdateTime from tencent_virus_data "</span> \</span><br><span class="line">          <span class="string">"ORDER BY lastUpdateTime desc limit 1 )"</span></span><br><span class="line"></span><br><span class="line">    res = query(sql)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›®å‰å„çœå¸‚ç´¯è®¡ç¡®è¯Šæ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_confrimUntilNow</span><span class="params">()</span>:</span></span><br><span class="line">    sql = <span class="string">"select province_name_,sum(city_total_confirm_),lastUpdateTime "</span> \</span><br><span class="line">          <span class="string">"from tencent_virus_data where lastUpdateTime = ( "</span> \</span><br><span class="line">          <span class="string">"select lastUpdateTime from tencent_virus_data "</span> \</span><br><span class="line">          <span class="string">"order by lastUpdateTime desc limit 1) "</span> \</span><br><span class="line">          <span class="string">"group by province_name_"</span></span><br><span class="line"></span><br><span class="line">    res = query(sql)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–æœ€æ–°50æ¡çƒ­æœæ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_hotPoint</span><span class="params">()</span>:</span></span><br><span class="line">    sql = <span class="string">"select content,setDataTime from  hotpoint order by id desc limit 50"</span></span><br><span class="line">    res = query(sql)</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></div></li></ul></li></ul><h3 id="å»ºç«‹è·¯ç”±è°ƒç”¨å·¥å…·ç±»æ–¹æ³•è¿”å›æ•°æ®å€¼"><a href="#å»ºç«‹è·¯ç”±è°ƒç”¨å·¥å…·ç±»æ–¹æ³•è¿”å›æ•°æ®å€¼" class="headerlink" title="å»ºç«‹è·¯ç”±è°ƒç”¨å·¥å…·ç±»æ–¹æ³•è¿”å›æ•°æ®å€¼"></a>å»ºç«‹è·¯ç”±è°ƒç”¨å·¥å…·ç±»æ–¹æ³•è¿”å›æ•°æ®å€¼</h3><ul><li>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯éœ€è¦å¼•å…¥å†™å¥½çš„å·¥å…·ç±»<ul><li><code>import xxx</code></li></ul></li><li>åœ¨è¿™é‡Œå¾—åˆ°å·¥å…·ç±»æŸ¥è¯¢æ•°æ®åº“å¾—åˆ°çš„å€¼ï¼Œå†åšè¿›ä¸€æ­¥å¤„ç†è¿”å›ç»™é¡µé¢å…³æ³¨çš„æ•°æ®ç»“æ„<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route('/', methods=["get", "post"])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">"index.html"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route("/getTime")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_time</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> utils.get_time()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route("/getDailyData")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_daily_data</span><span class="params">()</span>:</span></span><br><span class="line">    data = utils.get_daily_data()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">"today_confirm"</span>: data[<span class="number">0</span>],</span><br><span class="line">                    <span class="string">"total_nowConfirm"</span>: data[<span class="number">1</span>],</span><br><span class="line">                    <span class="string">"total_confirm"</span>: data[<span class="number">2</span>],</span><br><span class="line">                    <span class="string">"total_dead"</span>: data[<span class="number">3</span>],</span><br><span class="line">                    <span class="string">"total_deadRate"</span>: data[<span class="number">4</span>],</span><br><span class="line">                    <span class="string">"total_heal"</span>: data[<span class="number">5</span>],</span><br><span class="line">                    <span class="string">"total_healRate"</span>: data[<span class="number">6</span>]&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route("/getAreaData")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_area_data</span><span class="params">()</span>:</span></span><br><span class="line">    areaData = []</span><br><span class="line">    <span class="keyword">for</span> city <span class="keyword">in</span> utils.get_area_data():</span><br><span class="line">        areaData.append(&#123;<span class="string">"name"</span>: city[<span class="number">0</span>], <span class="string">"value"</span>: int(city[<span class="number">1</span>])&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">"data"</span>: areaData&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route("/getGeneralTrend")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_generalTrend_data</span><span class="params">()</span>:</span></span><br><span class="line">    gT_data = utils.get_GeneralTrend_data()</span><br><span class="line">    today_confirm, total_nowConfirm, total_confirm = [], [], []</span><br><span class="line">    total_dead, total_heal, setDataTime = [], [], []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> a, b, c, d, e, f <span class="keyword">in</span> gT_data:</span><br><span class="line">        today_confirm.append(a)</span><br><span class="line">        total_nowConfirm.append(b)</span><br><span class="line">        total_confirm.append(c)</span><br><span class="line">        total_dead.append(d)</span><br><span class="line">        total_heal.append(e)</span><br><span class="line">        setDataTime.append(f.strftime(<span class="string">"%m-%d"</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># reverse() æ²¡æœ‰è¿”å›å€¼</span></span><br><span class="line">    today_confirm.reverse()</span><br><span class="line">    total_nowConfirm.reverse()</span><br><span class="line">    total_confirm.reverse()</span><br><span class="line">    total_dead.reverse()</span><br><span class="line">    total_heal.reverse()</span><br><span class="line">    setDataTime.reverse()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">"today_confirm"</span>: today_confirm,</span><br><span class="line">                    <span class="string">"total_nowConfirm"</span>: total_nowConfirm,</span><br><span class="line">                    <span class="string">"total_confirm"</span>: total_confirm,</span><br><span class="line">                    <span class="string">"total_dead"</span>: total_dead,</span><br><span class="line">                    <span class="string">"total_heal"</span>: total_heal,</span><br><span class="line">                    <span class="string">"setDataTime"</span>: setDataTime&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route("/getTodayNewConfrim")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_todayNewConfrim_data</span><span class="params">()</span>:</span></span><br><span class="line">    tNC_data = utils.get_todayNewConfrim_data()</span><br><span class="line">    province_city, city_today_confirm_ = [], []</span><br><span class="line">    setDateTime = <span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> tNC_data:</span><br><span class="line">        province_city.append(i[<span class="number">0</span>])</span><br><span class="line">        city_today_confirm_.append(i[<span class="number">1</span>])</span><br><span class="line">        setDateTime = i[<span class="number">2</span>].strftime(<span class="string">"%Y/%m/%d"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">"setDateTime"</span>: setDateTime,</span><br><span class="line">                    <span class="string">"city_today_confirm_"</span>: city_today_confirm_,</span><br><span class="line">                    <span class="string">"province_city"</span>: province_city&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route("/getConfrimUntilNow")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_confrimUntilNow_data</span><span class="params">()</span>:</span></span><br><span class="line">    cUN_data = utils.get_confrimUntilNow()</span><br><span class="line">    provinces = []</span><br><span class="line">    setDateTime = <span class="string">""</span></span><br><span class="line">    provinceConfrim = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> cUN_data:</span><br><span class="line">        provinces.append(i[<span class="number">0</span>])</span><br><span class="line">        setDateTime = i[<span class="number">2</span>].strftime(<span class="string">"%Y/%m/%d"</span>)</span><br><span class="line">        pC = int(decimal.Decimal(i[<span class="number">1</span>]).quantize(decimal.Decimal(<span class="string">'0'</span>)))  <span class="comment"># æŠŠ Decimal è½¬æ¢æˆå¯ç”¨äº json åºåˆ—åŒ–çš„ int ç±»å‹</span></span><br><span class="line">        provinceConfrim.append(&#123;<span class="string">"name"</span>: i[<span class="number">0</span>], <span class="string">"value"</span>: pC&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">"provinces"</span>: provinces,</span><br><span class="line">                    <span class="string">"provinceConfrim"</span>: provinceConfrim,</span><br><span class="line">                    <span class="string">"setDateTime"</span>: setDateTime&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route("/getHotPoint")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_hotPoint_data</span><span class="params">()</span>:</span></span><br><span class="line">    hP_data = utils.get_hotPoint()</span><br><span class="line">    keywords = []</span><br><span class="line">    setDataTime = <span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> hP_data:</span><br><span class="line">        content = i[<span class="number">0</span>]</span><br><span class="line">        keyword_weight = extract_tags(content, topK=<span class="number">20</span>, withWeight=<span class="literal">True</span>)</span><br><span class="line">        setDataTime = i[<span class="number">1</span>].strftime(<span class="string">"%Y/%m/%d"</span>)</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> keyword_weight:</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> j[<span class="number">0</span>].isdigit():  <span class="comment"># å¦‚æœæ˜¯æ•°å­—å°±ä¸åŠ å…¥æ•°ç»„</span></span><br><span class="line">                weight = <span class="number">20</span> * round(j[<span class="number">1</span>], <span class="number">1</span>)</span><br><span class="line">                keywords.append(&#123;<span class="string">"name"</span>: j[<span class="number">0</span>], <span class="string">"value"</span>: str(weight)&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">"keywords"</span>: keywords,</span><br><span class="line">                    <span class="string">"setDataTime"</span>: setDataTime&#125;)</span><br></pre></td></tr></table></figure></div></li></ul><h3 id="é¡µé¢è¯·æ±‚æ•°æ®å¹¶å¯¹æ¥å±•ç¤º"><a href="#é¡µé¢è¯·æ±‚æ•°æ®å¹¶å¯¹æ¥å±•ç¤º" class="headerlink" title="é¡µé¢è¯·æ±‚æ•°æ®å¹¶å¯¹æ¥å±•ç¤º"></a>é¡µé¢è¯·æ±‚æ•°æ®å¹¶å¯¹æ¥å±•ç¤º</h3><ul><li>è¿™é‡Œå±•ç¤ºæ•°æ®ç”¨çš„ Echarts </li><li>Echarts çš„è¯ï¼Œéœ€è¦å…³æ³¨å®ƒçš„ options å†…éœ€è¦ä¼ å…¥çš„æ•°æ®ç»“æ„</li><li><p>ç„¶ååœ¨ ajax è¯·æ±‚è·å¾—æ•°æ®åï¼Œèµ‹ç»™å¯¹åº”çš„ä½ç½®å³å¯</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAreaData</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url: <span class="string">"/getAreaData"</span>,</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">            center_option.series[<span class="number">0</span>].data=data.data;</span><br><span class="line">            center.setOption(center_option);</span><br><span class="line">        &#125;,</span><br><span class="line">        error:<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li><li><p>ä½¿ç”¨ Echarts çš„ wordCloud éœ€è¦æ³¨æ„çš„æ˜¯ 5.0 ç‰ˆæœ¬ä¸æ”¯æŒ</p></li><li>éœ€è¦åˆ‡æ¢ 5.0 ä¹‹å‰çš„ç‰ˆæœ¬</li><li>è¿™æ ·çš„è¯ï¼Œå¯ä»¥åœ¨é¡¹ç›®ä¸­å¼•å…¥ä¸¤ä¸ªä¸åŒç‰ˆæœ¬çš„ Echarts.js </li><li>ç„¶åæ‰“å¼€å…¶ä¸­ä¸€ä¸ªï¼ŒæŠŠå†…éƒ¨çš„ echarts å¯¹è±¡å…¨éƒ¨ä¿®æ”¹<ul><li>æ¯”å¦‚éœ€è¦å•ç‹¬æŠŠ 4.0 ç‰ˆæœ¬çš„åšå¤„ç†ï¼Œå°±æ‰“å¼€è¯¥ js æ–‡ä»¶ï¼Œå°†å…¨éƒ¨é»˜è®¤çš„ echarts å¯¹è±¡ä¿®æ”¹æˆ echarts4</li><li>åŒºåˆ†å¼€ä¸åŒç‰ˆæœ¬</li></ul></li><li>æœ€åè·å–å¯¹è±¡çš„æ—¶å€™ä½¿ç”¨ echarts4 å³å¯</li></ul><h2 id="æ ‘è“æ´¾éƒ¨ç½²æµ‹è¯•"><a href="#æ ‘è“æ´¾éƒ¨ç½²æµ‹è¯•" class="headerlink" title="æ ‘è“æ´¾éƒ¨ç½²æµ‹è¯•"></a>æ ‘è“æ´¾éƒ¨ç½²æµ‹è¯•</h2><h3 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h3><ul><li>é…ç½®å¥½åŸºæœ¬ç¯å¢ƒ</li><li>ç„¶åç›´æ¥é€šè¿‡ python å‘½ä»¤å¯åŠ¨ flask å³å¯</li><li><p>éœ€è¦å¯¹å¤–è®¿é—®å°±éœ€è¦è®¾ç½®ä¸€ä¸‹ host</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run(host=<span class="string">"0.0.0.0"</span>)</span><br></pre></td></tr></table></figure></div></li><li><p>æµè§ˆå™¨è¾“å…¥ ip:5000 å³å¯çœ‹åˆ°æœåŠ¡</p></li></ul><h3 id="Nginx-åä»£"><a href="#Nginx-åä»£" class="headerlink" title="Nginx åä»£"></a>Nginx åä»£</h3><ul><li>é…ç½®å¥½ nginx ,å°†æœåŠ¡çš„åœ°å€ä»£ç†åˆ° nginx</li><li>æ‰¾åˆ°é…ç½®æ–‡ä»¶ï¼Œæˆ‘çš„æ ‘è“æ´¾é»˜è®¤çš„ nginx é…ç½®æ–‡ä»¶æ˜¯ <code>/etc/nginx/nginx.conf</code></li><li><p>ä¸»è¦é…ç½®</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">    upstream hgo &#123;</span><br><span class="line"></span><br><span class="line">        server 127.0.0.1:5000 weight=10;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       8080 default_server;</span><br><span class="line">        listen       [::]:8080 default_server;</span><br><span class="line">        server_name  _;</span><br><span class="line">        root         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">         Load configuration files <span class="keyword">for</span> the default server block.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">         include /etc/nginx/default.d/*.conf;</span></span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">                proxy_pass http://hgo;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">        location = /404.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div></li><li><p>æ•´ä¸ªé…ç½®æ–‡ä»¶</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> For more information on configuration, see:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   * Official English Documentation: http://nginx.org/en/docs/</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   * Official Russian Documentation: http://nginx.org/ru/docs/</span></span><br><span class="line"></span><br><span class="line">user nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log /var/log/nginx/error.log;</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span></span><br><span class="line">include /usr/share/nginx/modules/*.conf;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '</span><br><span class="line">                      '$status $body_bytes_sent "$http_referer" '</span><br><span class="line">                      '"$http_user_agent" "$http_x_forwarded_for"';</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile            on;</span><br><span class="line">    tcp_nopush          on;</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_timeout   65;</span><br><span class="line">    types_hash_max_size 2048;</span><br><span class="line"></span><br><span class="line">    include             /etc/nginx/mime.types;</span><br><span class="line">    default_type        application/octet-stream;</span><br><span class="line"></span><br><span class="line">    # Load modular configuration files from the /etc/nginx/conf.d directory.</span><br><span class="line">    # See http://nginx.org/en/docs/ngx_core_module.html#include</span><br><span class="line">    # for more information.</span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line"></span><br><span class="line">    upstream hgo &#123;</span><br><span class="line"></span><br><span class="line">        server 127.0.0.1:5000 weight=10;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       8080 default_server;</span><br><span class="line">        listen       [::]:8080 default_server;</span><br><span class="line">        server_name  _;</span><br><span class="line">        root         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">         Load configuration files <span class="keyword">for</span> the default server block.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">         include /etc/nginx/default.d/*.conf;</span></span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">                proxy_pass http://hgo;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">        location = /404.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Settings <span class="keyword">for</span> a TLS enabled server.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    server &#123;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        listen       443 ssl http2 default_server;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        listen       [::]:443 ssl http2 default_server;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        server_name  _;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        root         /usr/share/nginx/html;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">        ssl_certificate <span class="string">"/etc/pki/nginx/server.crt"</span>;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        ssl_certificate_key <span class="string">"/etc/pki/nginx/private/server.key"</span>;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        ssl_session_cache shared:SSL:1m;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        ssl_session_timeout  10m;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        ssl_ciphers HIGH:!aNULL:!MD5;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        ssl_prefer_server_ciphers on;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">        <span class="comment"># Load configuration files for the default server block.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">        include /etc/nginx/default.d/*.conf;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">        location / &#123;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        &#125;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">        error_page 404 /404.html;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        location = /404.html &#123;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        &#125;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">        error_page 500 502 503 504 /50x.html;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        location = /50x.html &#123;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        &#125;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    &#125;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li><li><p>è¿™æ ·ä¸€æ¥å°±å¯é€šè¿‡ nginx ä»£ç†å‡ºæ¥çš„åœ°å€å»è®¿é—®æœåŠ¡å™¨å†…éƒ¨çš„åœ°å€äº†</p></li></ul><h3 id="ä½¿ç”¨-WSGI-æœåŠ¡"><a href="#ä½¿ç”¨-WSGI-æœåŠ¡" class="headerlink" title="ä½¿ç”¨ WSGI æœåŠ¡"></a>ä½¿ç”¨ WSGI æœåŠ¡</h3><ul><li>ä¸å»ºè®®ç›´æ¥ç”¨ python å‘½ä»¤å»å¯åŠ¨ flask </li><li>ä½¿ç”¨ gunicorn å°†æœåŠ¡å¯åŠ¨</li><li><code>gunicorn -b 127.0.0.1:5000 -D app:app</code></li><li><code>gunicorn -b 127.0.0.1:5000 -D æ–‡ä»¶å:æ–‡ä»¶å†…éƒ¨çš„ flask å¯¹è±¡å</code><ul><li><code>app = Flask(__name__)</code></li></ul></li></ul><h3 id="å®šæ—¶ä»»åŠ¡"><a href="#å®šæ—¶ä»»åŠ¡" class="headerlink" title="å®šæ—¶ä»»åŠ¡"></a>å®šæ—¶ä»»åŠ¡</h3><ul><li><code>crontab -l</code> æŸ¥çœ‹æ­£åœ¨æ‰§è¡Œçš„å®šæ—¶ä»»åŠ¡</li><li><p><code>crontab -e</code> ç¼–è¾‘å®šæ—¶ä»»åŠ¡</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Edit this file to introduce tasks to be run by cron.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Each task to run has to be defined through a single line</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> indicating with different fields when the task will be run</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> and what <span class="built_in">command</span> to run <span class="keyword">for</span> the task</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> To define the time you can provide concrete values <span class="keyword">for</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> minute (m), hour (h), day of month (dom), month (mon),</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> and day of week (dow) or use <span class="string">'*'</span> <span class="keyword">in</span> these fields (<span class="keyword">for</span> <span class="string">'any'</span>).</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Notice that tasks will be started based on the cron<span class="string">'s system</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> daemon<span class="string">'s notion of time and timezones.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Output of the crontab <span class="built_in">jobs</span> (including errors) is sent through</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> email to the user the crontab file belongs to (unless redirected).</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> For example, you can run a backup of all your user accounts</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> at 5 a.m every week with:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> For more information see the manual pages of crontab(5) and cron(8)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> m h  dom mon dow   <span class="built_in">command</span></span></span><br><span class="line">45 * * * * python3 /home/pi/Documents/FkZi/gunicorn/virus.py dd &gt;&gt; /home/pi/Documents/log/dd 2&gt;&amp;1 &amp;</span><br><span class="line">45 * * * * python3 /home/pi/Documents/FkZi/gunicorn/virus.py vd &gt;&gt; /home/pi/Documents/log/vd 2&gt;&amp;1 &amp;</span><br><span class="line">45 * * * * python3 /home/pi/Documents/FkZi/gunicorn/virus.py hp &gt;&gt; /home/pi/Documents/log/hp 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure></div></li><li><p>å®šæ—¶ä»»åŠ¡æ‰§è¡ŒæˆåŠŸå¯åœ¨å¯¹åº”çš„ç›®å½•çœ‹åˆ°ç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶ <code>/home/pi/Documents/log/dd</code></p></li><li>å¯çœ‹åˆ°å¯¹åº”çš„å‚æ•°è®¾ç½®</li><li><code>virus.py hp</code> è¿™é‡Œæ˜¯ç»™ py è„šæœ¬ä¼ é€’å‚æ•°</li><li>éœ€è¦åœ¨æ–‡ä»¶å†…è®¾ç½®<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    length = len(sys.argv)</span><br><span class="line">    <span class="keyword">if</span> length == <span class="number">1</span>:</span><br><span class="line">        s = <span class="string">"""</span></span><br><span class="line"><span class="string">                è¯·è¾“å…¥å‚æ•°ï¼š</span></span><br><span class="line"><span class="string">                dd æ›´æ–°è¯¦ç»†æ•°æ®</span></span><br><span class="line"><span class="string">                vd æ›´æ–°æ±‡æ€»æ•°æ®</span></span><br><span class="line"><span class="string">                hp æ›´æ–°çƒ­ç‚¹ä¿¡æ¯</span></span><br><span class="line"><span class="string">            """</span></span><br><span class="line">        print(s)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        order = sys.argv[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">if</span> order == <span class="string">"vd"</span>:</span><br><span class="line">            update_virus_data()</span><br><span class="line">        <span class="keyword">elif</span> order == <span class="string">"dd"</span>:</span><br><span class="line">            update_daily_data()</span><br><span class="line">        <span class="keyword">elif</span> order == <span class="string">"hp"</span>:</span><br><span class="line">            update_hotPoint()</span><br></pre></td></tr></table></figure></div></li></ul><h2 id="ç”Ÿäº§æœåŠ¡å™¨éƒ¨ç½²"><a href="#ç”Ÿäº§æœåŠ¡å™¨éƒ¨ç½²" class="headerlink" title="ç”Ÿäº§æœåŠ¡å™¨éƒ¨ç½²"></a>ç”Ÿäº§æœåŠ¡å™¨éƒ¨ç½²</h2><ul><li>å’Œåœ¨æµ‹è¯•ç¯å¢ƒä¸€æ ·çš„æ­¥éª¤å³å¯ï¼Œè¿™é‡Œç”Ÿäº§çš„è®¾å¤‡ä¸º x86 çš„ Linux,OS ä¸º CentOS</li><li>å…ˆæ‹‰é¡¹ç›®åˆ°è®¾å¤‡é‡Œï¼ŒæŠŠä¾èµ–å®‰è£…å¥½</li><li>å°†é¡¹ç›®å¯åŠ¨èµ·æ¥ï¼Œé…ç½® nginx æŠŠç«¯å£ä»£ç†å‡ºæ¥</li><li>ç„¶åç”¨ gunicorn å¯åŠ¨é¡¹ç›®</li><li>è®¾ç½®å®šæ—¶ä»»åŠ¡</li><li>æµ‹è¯•å®šæ—¶ä»»åŠ¡çš„è„šæœ¬ï¼ŒæŠŠä¾èµ–è£…å¥½ï¼Œä¸»è¦é—®é¢˜åœ¨ chromedirver<ul><li>ğŸ‘‰ <a href="https://cloud.tencent.com/developer/article/1647905" target="_blank" rel="noopener">çˆ¬è™«åœ¨linuxä¸‹å¯åŠ¨selenium-å®‰è£…è°·æ­Œæµè§ˆå™¨å’Œé©±åŠ¨</a></li></ul></li><li>â€˜chromedriverâ€™ executable needs to be in PATH. Please see <a href="https://sites.google.com/a/chromium.org/chromedriver/home" target="_blank" rel="noopener">https://sites.google.com/a/chromium.org/chromedriver/home</a><ul><li>å¦‚æœå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œåœ¨ä»£ç é‡ŒæŒ‡å®š chrome å¯¹è±¡é©±åŠ¨è·¯å¾„å³å¯</li></ul></li></ul><h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><h3 id="print-cursor-execute-sql-ä¸ºç©º"><a href="#print-cursor-execute-sql-ä¸ºç©º" class="headerlink" title="print(cursor.execute(sql)) ä¸ºç©º"></a>print(cursor.execute(sql)) ä¸ºç©º</h3><ul><li>å› ä¸ºæ‰§è¡Œçš„è¯­å¥æœªéæŸ¥è¯¢è¯­å¥ï¼Œåªæœ‰æŸ¥è¯¢è¯­å¥æ‰æœ‰è¿”å›å€¼</li><li>å…¶ä»–è¯­å¥ï¼Œå¦‚æ’å…¥è¯­å¥ç­‰ï¼Œéƒ½éœ€è¦æäº¤äº‹åŠ¡ commit() ä¹‹åæ‰èƒ½å¾—åˆ°è¿”å›å€¼ </li></ul><h3 id="åœ¨-selenium-ä¸­è·å–æµè§ˆå™¨å¯¹è±¡çš„æ—¶å€™ï¼Œæµè§ˆå™¨å¯åŠ¨åä¸€ä¼šå°±å…³é—­äº†"><a href="#åœ¨-selenium-ä¸­è·å–æµè§ˆå™¨å¯¹è±¡çš„æ—¶å€™ï¼Œæµè§ˆå™¨å¯åŠ¨åä¸€ä¼šå°±å…³é—­äº†" class="headerlink" title="åœ¨ selenium ä¸­è·å–æµè§ˆå™¨å¯¹è±¡çš„æ—¶å€™ï¼Œæµè§ˆå™¨å¯åŠ¨åä¸€ä¼šå°±å…³é—­äº†"></a>åœ¨ selenium ä¸­è·å–æµè§ˆå™¨å¯¹è±¡çš„æ—¶å€™ï¼Œæµè§ˆå™¨å¯åŠ¨åä¸€ä¼šå°±å…³é—­äº†</h3><ul><li>å› ä¸ºè·å–æµè§ˆå™¨çš„å¯¹è±¡åœ¨æ–¹æ³•ä¸­ï¼Œæ–¹æ³•æ‰§è¡Œå®Œæµè§ˆå™¨è‡ªç„¶å°±è·Ÿç€å…³é—­äº†</li><li>å¦‚æœéœ€è¦æµè§ˆå™¨ä¸€ç›´å­˜åœ¨ï¼ŒæŠŠæµè§ˆå™¨å¯¹è±¡åœ¨æ–¹æ³•å¤–éƒ¨ï¼Œä½¿å…¶æˆä¸ºå…¨å±€å¯¹è±¡å°±å¯ä»¥äº†</li></ul><h3 id="æ ‘è“æ´¾-arm-æ¶æ„å®‰è£…çš„-nginx-é»˜è®¤é…ç½®ç¼ºå¤±"><a href="#æ ‘è“æ´¾-arm-æ¶æ„å®‰è£…çš„-nginx-é»˜è®¤é…ç½®ç¼ºå¤±" class="headerlink" title="æ ‘è“æ´¾ arm æ¶æ„å®‰è£…çš„ nginx é»˜è®¤é…ç½®ç¼ºå¤±"></a>æ ‘è“æ´¾ arm æ¶æ„å®‰è£…çš„ nginx é»˜è®¤é…ç½®ç¼ºå¤±</h3><ul><li>æ‰¾åˆ°å¯¹çš„ä½ç½®çš„é…ç½®æ–‡ä»¶</li><li>ç„¶åå¯ä»¥ä»å…¶ä»–å·²å®‰è£… nginx çš„è®¾å¤‡ä¸­æŠŠ é…ç½®æ–‡ä»¶ ä¼ è¿‡æ¥</li></ul><h3 id="nginx-æ²¡æœ‰æŠŠæœåŠ¡ä»£ç†å‡ºæ¥"><a href="#nginx-æ²¡æœ‰æŠŠæœåŠ¡ä»£ç†å‡ºæ¥" class="headerlink" title="nginx æ²¡æœ‰æŠŠæœåŠ¡ä»£ç†å‡ºæ¥"></a>nginx æ²¡æœ‰æŠŠæœåŠ¡ä»£ç†å‡ºæ¥</h3><ul><li><p>å¯èƒ½éœ€è¦é…ç½®ä¸€ä¸‹ç»„å’Œç”¨ root æ¥å¯åŠ¨</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- `groupadd nginx` </span><br><span class="line">- `useradd -g nginx nginx -s /sbin/nologin`</span><br></pre></td></tr></table></figure></div></li><li><p>è¿˜éœ€è¦å…³æ³¨å½“å‰çš„ç”¨æˆ·å’Œ root ç”¨æˆ·çš„åŒ…æ˜¯å¦æœ‰ nginx</p></li></ul><h3 id="arm-æ¶æ„çš„-chromedriver-ç‰ˆæœ¬"><a href="#arm-æ¶æ„çš„-chromedriver-ç‰ˆæœ¬" class="headerlink" title="arm æ¶æ„çš„ chromedriver ç‰ˆæœ¬"></a>arm æ¶æ„çš„ chromedriver ç‰ˆæœ¬</h3><ul><li>é¦–å…ˆæ˜¯è¦ç¡®ä¿ chrome æµè§ˆå™¨å’Œ chromedriver ç‰ˆæœ¬ä¸€è‡´</li><li>arm æ¶æ„çš„ chromedriver å®åœ¨éš¾æ‰¾ï¼Œæ ‘è“æ´¾ 4b é‡Œçš„ chromiun çš„ç‰ˆæœ¬ä¸º 78<ul><li>arm æ¶æ„çš„ chromedriver ç‰ˆæœ¬ä¸º 78 æ ¹æœ¬æ‰¾ä¸åˆ° </li></ul></li><li>è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥æ¢ä¸ªæ€è·¯ï¼ŒæŠŠæµè§ˆå™¨å’Œé©±åŠ¨éƒ½å‡çº§åˆ°æœ€æ–°å³å¯</li><li><code>sudo apt-get install chromium-browser</code> æ›´æ–°æœ€æ–°</li><li><code>chromium-browser --version</code></li><li>ğŸ‘‰ <a href="https://mirrors.tuna.tsinghua.edu.cn/raspberrypi/pool/main/c/chromium-browser/" target="_blank" rel="noopener">mirrors.tuna.tsinghua.edu.cn</a></li><li><code>sudo apt-get install chromium-chromedriver</code> ä¸‹è½½æµè§ˆå™¨é©±åŠ¨ï¼Œé»˜è®¤ä¸‹äº†æœ€æ–°çš„</li><li>ğŸ‘‰ <a href="https://launchpad.net/+search?field.text=chromium-chromedriver+armhf" target="_blank" rel="noopener">Launchpad.net</a></li></ul><h3 id="mysql-å’Œ-mariadb-çš„-group-by-å­—æ®µ"><a href="#mysql-å’Œ-mariadb-çš„-group-by-å­—æ®µ" class="headerlink" title="mysql å’Œ mariadb çš„ group by å­—æ®µ"></a>mysql å’Œ mariadb çš„ group by å­—æ®µ</h3><ul><li>[Err] 1055 - Expression #3 of SELECT list is not in GROUP BY clause and contains nonaggregated column â€˜virus.tencent_virus_data.lastUpdateTimeâ€™ which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by</li><li>ğŸ‘‰<a href="https://www.cnblogs.com/Wayou/p/mysql_group_by_issue.html" target="_blank" rel="noopener">MySQL GROUP BY çš„é—®é¢˜</a></li><li>ğŸ‘‰<a href="https://cloud.tencent.com/developer/article/1533773" target="_blank" rel="noopener">sql_modeä¹‹only_full_group_by</a></li></ul><h3 id="mysql-å’Œ-mariadb-çš„-group-by-ç»“æœé¡ºåº"><a href="#mysql-å’Œ-mariadb-çš„-group-by-ç»“æœé¡ºåº" class="headerlink" title="mysql å’Œ mariadb çš„ group by ç»“æœé¡ºåº"></a>mysql å’Œ mariadb çš„ group by ç»“æœé¡ºåº</h3><ul><li>ğŸ‘‰<a href="https://www.coder.work/article/508344" target="_blank" rel="noopener">mysql - MariaDBä¸Šçš„â€œGROUP BYâ€çš„è¡Œä¸ºä¸MySQLä¸åŒ</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;åˆ†ææ¥å£æ•°æ®ç»“æ„&quot;&gt;&lt;a href=&quot;#åˆ†ææ¥å£æ•°æ®ç»“æ„&quot; class=&quot;headerlink&quot; title=&quot;åˆ†ææ¥å£æ•°æ®ç»“æ„&quot;&gt;&lt;/a&gt;åˆ†ææ¥å£æ•°æ®ç»“æ„&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;æ‰¾åˆ°æ•°æ®çš„æ¥å£ä¿¡æ¯ä¹‹åï¼Œè¯·æ±‚è·å–æ•°æ®å¹¶é€å±‚åˆ†ææ•°æ®ç»“æ„&lt;/li&gt;
&lt;li&gt;ç„¶åæå–éœ€è¦çš„æ•°æ®&lt;/li&gt;
&lt;li&gt;æœ€åå°è£…æˆæ–¹æ³•&lt;figure class=&quot;highlight py&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;get_tencent_virus_data&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    headers = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;User-Agent&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                      &lt;span class=&quot;string&quot;&gt;&#39;/537.36 (KHTML, like Gecko) Chrome/53.0.2785.143 Safar&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                      &lt;span class=&quot;string&quot;&gt;&#39;i/537.36&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# https://news.qq.com/zt2020/page/feiyan.htm#/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    url = &lt;span class=&quot;string&quot;&gt;&quot;https://view.inews.qq.com/g2/getOnsInfo?name=disease_h5&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    res = requests.get(url, headers=headers)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    res.encoding = &lt;span class=&quot;string&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    getSource = json.loads(res.text)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sourceData = json.loads(getSource[&lt;span class=&quot;string&quot;&gt;&quot;data&quot;&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    lastUpdateTime = sourceData[&lt;span class=&quot;string&quot;&gt;&quot;lastUpdateTime&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# æœ€åæ›´æ–°æ—¶é—´&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    chinaTotal = sourceData[&lt;span class=&quot;string&quot;&gt;&quot;chinaTotal&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# æ€»æƒ…å†µ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    chinaAdd = sourceData[&lt;span class=&quot;string&quot;&gt;&quot;chinaAdd&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# æ€»ç¡®è¯Š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    areaTree = sourceData[&lt;span class=&quot;string&quot;&gt;&quot;areaTree&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# å›½å®¶&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# å›½å®¶åˆ—è¡¨,ä¸­å›½&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    name = areaTree[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# ä¸­å›½&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    today = areaTree[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;today&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# ä»Šå¤©æ–°å¢ç¡®è¯Š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    total = areaTree[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;total&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# ä»Šæ—¥æ€»æƒ…å†µ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    provinces = areaTree[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;children&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# 34ä¸ªçœä»½&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# print(name)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# print(today)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# print(total)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# ä»Šæ—¥ç¡®è¯Šï¼Œç›®å‰ç¡®è¯Šï¼Œæ€»ç¡®è¯Šï¼Œæ€»æ­»äº¡æ•°ï¼Œæ€»æ­»äº¡æ¦‚ç‡ï¼Œæ€»åº·å¤æ•°ï¼Œæ€»åº·å¤æ¦‚ç‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    daily_data = [name, today[&lt;span class=&quot;string&quot;&gt;&quot;confirm&quot;&lt;/span&gt;], total[&lt;span class=&quot;string&quot;&gt;&quot;nowConfirm&quot;&lt;/span&gt;], total[&lt;span class=&quot;string&quot;&gt;&quot;confirm&quot;&lt;/span&gt;], total[&lt;span class=&quot;string&quot;&gt;&quot;dead&quot;&lt;/span&gt;], total[&lt;span class=&quot;string&quot;&gt;&quot;deadRate&quot;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  total[&lt;span class=&quot;string&quot;&gt;&quot;heal&quot;&lt;/span&gt;], total[&lt;span class=&quot;string&quot;&gt;&quot;healRate&quot;&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    today_details = []&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; province &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; provinces:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# print(province[&quot;name&quot;])  # çœå&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# print(province[&quot;today&quot;])&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# print(province[&quot;total&quot;])&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        province_name_ = province[&lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# çœæ‰€å±åŸå¸‚&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; city &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; province[&lt;span class=&quot;string&quot;&gt;&quot;children&quot;&lt;/span&gt;]:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            city_name_ = city[&lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            city_today_confirm_ = city[&lt;span class=&quot;string&quot;&gt;&quot;today&quot;&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;confirm&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# è¯¥åŸå¸‚ä»Šæ—¥ç¡®è¯Š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            city_total_confirm_ = city[&lt;span class=&quot;string&quot;&gt;&quot;total&quot;&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;confirm&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# è¯¥åŸå¸‚æ€»ç¡®è¯Š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            city_total_heal_ = city[&lt;span class=&quot;string&quot;&gt;&quot;total&quot;&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;heal&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# è¯¥åŸå¸‚æ€»åº·å¤&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            city_total_heal_rate_ = city[&lt;span class=&quot;string&quot;&gt;&quot;total&quot;&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;healRate&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# è¯¥åŸå¸‚æ€»åº·å¤æ¦‚ç‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            city_total_dead_ = city[&lt;span class=&quot;string&quot;&gt;&quot;total&quot;&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;dead&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# è¯¥åŸå¸‚æ€»æ­»äº¡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            city_total_dead_rate_ = city[&lt;span class=&quot;string&quot;&gt;&quot;total&quot;&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;deadRate&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# è¯¥åŸå¸‚æ€»æ­»äº¡æ¦‚ç‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            today_details.append([lastUpdateTime, province_name_, city_name_, city_today_confirm_,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                  city_total_confirm_, city_total_heal_, city_total_heal_rate_,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                  city_total_dead_, city_total_dead_rate_&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                  ])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; today_details, daily_data&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
    
      <category term="Linux" scheme="http://www.orekiyuta.cn/tags/Linux/"/>
    
      <category term="Selenium" scheme="http://www.orekiyuta.cn/tags/Selenium/"/>
    
      <category term="ChromeDriver" scheme="http://www.orekiyuta.cn/tags/ChromeDriver/"/>
    
      <category term="JavaScript" scheme="http://www.orekiyuta.cn/tags/JavaScript/"/>
    
      <category term="Python" scheme="http://www.orekiyuta.cn/tags/Python/"/>
    
      <category term="MySQL" scheme="http://www.orekiyuta.cn/tags/MySQL/"/>
    
      <category term="Flask" scheme="http://www.orekiyuta.cn/tags/Flask/"/>
    
      <category term="Mariadb" scheme="http://www.orekiyuta.cn/tags/Mariadb/"/>
    
      <category term="RaspberryPi" scheme="http://www.orekiyuta.cn/tags/RaspberryPi/"/>
    
      <category term="Nginx" scheme="http://www.orekiyuta.cn/tags/Nginx/"/>
    
      <category term="Chromium" scheme="http://www.orekiyuta.cn/tags/Chromium/"/>
    
      <category term="BeautifulSoup" scheme="http://www.orekiyuta.cn/tags/BeautifulSoup/"/>
    
      <category term="Echarts" scheme="http://www.orekiyuta.cn/tags/Echarts/"/>
    
      <category term="Gunicorn" scheme="http://www.orekiyuta.cn/tags/Gunicorn/"/>
    
      <category term="Crontab" scheme="http://www.orekiyuta.cn/tags/Crontab/"/>
    
      <category term="Arm" scheme="http://www.orekiyuta.cn/tags/Arm/"/>
    
  </entry>
  
  <entry>
    <title>In Jupyter Notebook</title>
    <link href="http://www.orekiyuta.cn/archives/inJupyterNotebook/"/>
    <id>http://www.orekiyuta.cn/archives/inJupyterNotebook/</id>
    <published>2020-12-30T14:29:11.000Z</published>
    <updated>2020-12-30T15:38:05.120Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Configure"><a href="#Configure" class="headerlink" title="Configure"></a>Configure</h2><ul><li><code>pip install notebook</code></li><li><code>jupyter notebook</code> å¯åŠ¨,å·¥ä½œç©ºé—´æ˜¯å½“å‰ç›®å½•</li><li><code>jupyter notebook --generate-config</code> åˆ›å»ºé…ç½®æ–‡ä»¶ï¼ŒæŒ‡å®šå·¥ä½œç©ºé—´çš„ç›®å½•</li><li><code>c.NotebookApp.notebook_dir = r&#39;F:\Code&#39;</code>æ‰“å¼€é…ç½®æ–‡ä»¶æ‰¾åˆ°è¿™ä¸ªé…ç½®å¹¶ä¿®æ”¹<a id="more"></a><h2 id="QuickStart"><a href="#QuickStart" class="headerlink" title="QuickStart"></a>QuickStart</h2></li><li>è¿›å…¥ç¼–è¾‘å™¨åï¼Œå¯ä»¥è¿›è¡Œæ–‡æœ¬æ“ä½œ</li><li>ç‚¹å‡»å³ä¾§çš„ New ,æ–°å»ºæ–‡ä»¶<br><img src="/images/inJupyterNotebook/Snipaste_2020-12-30_22-49-43.png" alt></li><li>ç»¿è‰²ä¸ºç¼–è¾‘æ¨¡å¼ï¼Œè“è‰²ä¸ºå‘½ä»¤æ¨¡å¼ï¼ˆæŒ‰ ESC åˆ‡æ¢ï¼‰</li><li><img src="/images/inJupyterNotebook/Snipaste_2020-12-30_22-53-12.png" alt></li><li><img src="/images/inJupyterNotebook/Snipaste_2020-12-30_22-52-56.png" alt>      </li><li><p>å•å…ƒæ ¼ç±»å‹æœ‰ä¸¤ç§ï¼Œé»˜è®¤æ˜¯ä»£ç ç±»å‹</p><ul><li>åœ¨å‘½ä»¤æ¨¡å¼æŒ‰ Y åˆ‡æ¢ä¸ºä»£ç ç±»å‹</li><li>æŒ‰ M åˆ‡æ¢ä¸º Markdown æ–‡æœ¬ç±»å‹<br><img src="/images/inJupyterNotebook/Snipaste_2020-12-30_22-55-20.png" alt></li></ul></li><li><p>åœ¨å•å…ƒæ ¼ç±»è¾“å…¥å†…å®¹åï¼Œctrl + enter æ‰§è¡Œ</p><ul><li>ä»£ç å•å…ƒæ ¼ä¸ºæ‰§è¡Œä»£ç ï¼ŒMarkdown å•å…ƒæ ¼ä¸ºè¾“å‡ºæ–‡æœ¬æ ·å¼<br><img src="/images/inJupyterNotebook/Snipaste_2020-12-30_22-56-59.png" alt></li></ul></li><li><p>å¸¸ç”¨å¿«æ·é”®</p><ul><li>ctrl + enter æ‰§è¡Œå¹¶å…‰æ ‡åœç•™åœ¨å½“å‰å•å…ƒæ ¼</li><li>shift + enter æ‰§è¡Œå¹¶åœ¨ä¸‹é¢åˆ›å»ºæ–°å•å…ƒæ ¼ï¼Œè¿›å…¥å‘½ä»¤æ¨¡å¼</li><li>alt + enter æ‰§è¡Œå¹¶åœ¨ä¸‹é¢åˆ›å»ºæ–°å•å…ƒæ ¼ï¼Œè¿›å…¥ç¼–è¾‘æ¨¡å¼</li><li>å•å…ƒæ ¼ç±»å‹åˆ‡æ¢ Y / M</li><li>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼ŒA åœ¨ä¸Šä¸€è¡Œæ’å…¥å•å…ƒæ ¼</li><li>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼ŒB åœ¨ä¸‹ä¸€è¡Œæ’å…¥å•å…ƒæ ¼</li><li>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼ŒDD åˆ é™¤å½“å‰å•å…ƒæ ¼</li></ul></li><li><p>ä½¿ç”¨æµ‹è¯•<br><img src="/images/inJupyterNotebook/Snipaste_2020-12-30_23-27-24.png" alt></p></li><li>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯,æ¯ä¸ªå•å…ƒæ ¼æ˜¯å•ç‹¬æ‰§è¡Œçš„,åˆ†å•å…ƒæ ¼å†™ä»£ç çš„è¯,è¦ä»ä¸Šåˆ°åˆ°ä¸‹æŒ‰é¡ºåºæ‰§è¡Œå„ä¸ªå•å…ƒæ ¼</li></ul><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li>ğŸ‘‰ <a href="https://jupyter.org/" target="_blank" rel="noopener">jupyter</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Configure&quot;&gt;&lt;a href=&quot;#Configure&quot; class=&quot;headerlink&quot; title=&quot;Configure&quot;&gt;&lt;/a&gt;Configure&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pip install notebook&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;jupyter notebook&lt;/code&gt; å¯åŠ¨,å·¥ä½œç©ºé—´æ˜¯å½“å‰ç›®å½•&lt;/li&gt;
&lt;li&gt;&lt;code&gt;jupyter notebook --generate-config&lt;/code&gt; åˆ›å»ºé…ç½®æ–‡ä»¶ï¼ŒæŒ‡å®šå·¥ä½œç©ºé—´çš„ç›®å½•&lt;/li&gt;
&lt;li&gt;&lt;code&gt;c.NotebookApp.notebook_dir = r&amp;#39;F:\Code&amp;#39;&lt;/code&gt;æ‰“å¼€é…ç½®æ–‡ä»¶æ‰¾åˆ°è¿™ä¸ªé…ç½®å¹¶ä¿®æ”¹
    
    </summary>
    
    
    
      <category term="Jupyter" scheme="http://www.orekiyuta.cn/tags/Jupyter/"/>
    
  </entry>
  
</feed>
