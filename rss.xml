<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Canoe</title>
  
  <subtitle>ã€Œã‚ãã§ãªã—ã€</subtitle>
  <link href="/rss.xml" rel="self"/>
  
  <link href="http://www.orekiyuta.cn/"/>
  <updated>2021-01-20T16:17:57.279Z</updated>
  <id>http://www.orekiyuta.cn/</id>
  
  <author>
    <name>Orekiyuta</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MySQL Split String By Procedure</title>
    <link href="http://www.orekiyuta.cn/archives/mysqlSplitStringByProcedure/"/>
    <id>http://www.orekiyuta.cn/archives/mysqlSplitStringByProcedure/</id>
    <published>2021-01-20T16:17:23.000Z</published>
    <updated>2021-01-20T16:17:57.279Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
    
      <category term="MySQL" scheme="http://www.orekiyuta.cn/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQL Sync to Mariadb</title>
    <link href="http://www.orekiyuta.cn/archives/mysqlSyncToMariadb/"/>
    <id>http://www.orekiyuta.cn/archives/mysqlSyncToMariadb/</id>
    <published>2021-01-20T12:43:04.000Z</published>
    <updated>2021-01-20T13:08:24.882Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Unkown-collation-â€™utf8mb4-0900-ai-ciâ€™"><a href="#Unkown-collation-â€™utf8mb4-0900-ai-ciâ€™" class="headerlink" title="Unkown collation:â€™utf8mb4_0900_ai_ciâ€™"></a>Unkown collation:â€™utf8mb4_0900_ai_ciâ€™</h2><ul><li>æŠŠ MySQL æ•°æ®åŒæ­¥åˆ° Mariadb å‡ºç°æ’åºè§„åˆ™ä¸ä¸€è‡´</li><li>MySQL æ•°æ®åº“é»˜è®¤å­—ç¬¦é›†å’Œæ’åºè§„åˆ™<br><img src="/images/mysqlSyncToMariadb/Snipaste_2021-01-20_21-07-07.png" alt></li><li>MySQL è½¬å‚¨çš„ SQL æ–‡ä»¶é»˜è®¤<code>DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci</code></li><li>Mariadb æ•°æ®åº“é»˜è®¤å­—ç¬¦é›†å’Œæ’åºè§„åˆ™<br><img src="/images/mysqlSyncToMariadb/Snipaste_2021-01-20_20-47-17.png" alt></li><li>Mariadb è½¬å‚¨çš„ SQL æ–‡ä»¶é»˜è®¤<code>DEFAULT CHARSET=utf8mb4;</code></li></ul><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><ul><li>åœ¨ Mariadb ä¸­æ’åºè§„åˆ™æ²¡æœ‰ utf8mb4_0900_ai_ci </li><li>è§£å†³æ–¹æ³•æ˜¯ ï¼šè½¬å‚¨ MySQL æ•°æ®ï¼Œç„¶åæŠŠ SQL æ–‡ä»¶é‡Œçš„ <code>COLLATE=utf8mb4_0900_ai_ci</code>å…¨éƒ¨æ›¿æ¢æˆ <code>COLLATE=utf8mb4_general_ci</code> å³å¯<ul><li>æˆ–è€…æ˜¯æŠŠ SQL æ–‡ä»¶é‡Œçš„ <code>COLLATE=utf8mb4_0900_ai_ci</code> å»æ‰</li></ul></li><li>æ€»çš„æ¥è¯´å°±æ˜¯æŠŠè®¾ç½®é…æˆä¸€è‡´å°±å¯ä»¥äº†</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Unkown-collation-â€™utf8mb4-0900-ai-ciâ€™&quot;&gt;&lt;a href=&quot;#Unkown-collation-â€™utf8mb4-0900-ai-ciâ€™&quot; class=&quot;headerlink&quot; title=&quot;Unkown collation:â€™
      
    
    </summary>
    
    
    
      <category term="MySQL" scheme="http://www.orekiyuta.cn/tags/MySQL/"/>
    
      <category term="Mariadb" scheme="http://www.orekiyuta.cn/tags/Mariadb/"/>
    
  </entry>
  
  <entry>
    <title>Local-anywhere and CORS</title>
    <link href="http://www.orekiyuta.cn/archives/localAnywhereAndCORS/"/>
    <id>http://www.orekiyuta.cn/archives/localAnywhereAndCORS/</id>
    <published>2021-01-19T17:36:34.000Z</published>
    <updated>2021-01-19T17:43:24.654Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Scene"><a href="#Scene" class="headerlink" title="Scene"></a>Scene</h2><ul><li>æ‰“å¼€ä¸€ä¸ª html åŠ è½½äº†æœ¬åœ°ç›®å½•ä¸‹çš„æ–‡ä»¶å±…ç„¶è·¨åŸŸäº†ï¼ŒåŸå› åœ¨äºæœ¬åœ°æ–‡ä»¶çš„ä½¿ç”¨çš„æ˜¯ file åè®®</li><li>CORS ç­–ç•¥åªæ”¯æŒè¿™äº›åè®®ï¼šhttpã€dataã€ chromeã€chrome-extension ä»¥åŠ https</li><li>è¿™æ ·çš„è¯ï¼Œå¯ä»¥ç›´æ¥è½¬ä¸ªåè®®å°±å¥½äº†</li></ul><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><ul><li>èµ·ä¸ªåè®®æœåŠ¡</li><li><code>npm i anywhere -g</code> å®‰è£… anywhere</li><li><code>anywhere -h</code> åœ¨æ–‡ä»¶ç›®å½•å¯åŠ¨æœåŠ¡</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Scene&quot;&gt;&lt;a href=&quot;#Scene&quot; class=&quot;headerlink&quot; title=&quot;Scene&quot;&gt;&lt;/a&gt;Scene&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;æ‰“å¼€ä¸€ä¸ª html åŠ è½½äº†æœ¬åœ°ç›®å½•ä¸‹çš„æ–‡ä»¶å±…ç„¶è·¨åŸŸäº†ï¼ŒåŸå› åœ¨äºæœ¬åœ°æ–‡ä»¶çš„ä½¿ç”¨çš„æ˜¯ file åè®®&lt;/li
      
    
    </summary>
    
    
    
      <category term="CORS" scheme="http://www.orekiyuta.cn/tags/CORS/"/>
    
  </entry>
  
  <entry>
    <title>Reptiles and Raspberries</title>
    <link href="http://www.orekiyuta.cn/archives/reptilesAndRaspberries/"/>
    <id>http://www.orekiyuta.cn/archives/reptilesAndRaspberries/</id>
    <published>2021-01-08T13:49:18.000Z</published>
    <updated>2021-01-10T18:16:44.067Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åˆ†ææ¥å£æ•°æ®ç»“æ„"><a href="#åˆ†ææ¥å£æ•°æ®ç»“æ„" class="headerlink" title="åˆ†ææ¥å£æ•°æ®ç»“æ„"></a>åˆ†ææ¥å£æ•°æ®ç»“æ„</h2><ul><li>æ‰¾åˆ°æ•°æ®çš„æ¥å£ä¿¡æ¯ä¹‹åï¼Œè¯·æ±‚è·å–æ•°æ®å¹¶é€å±‚åˆ†ææ•°æ®ç»“æ„</li><li>ç„¶åæå–éœ€è¦çš„æ•°æ®</li><li>æœ€åå°è£…æˆæ–¹æ³•<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_tencent_virus_data</span><span class="params">()</span>:</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit'</span></span><br><span class="line">                      <span class="string">'/537.36 (KHTML, like Gecko) Chrome/53.0.2785.143 Safar'</span></span><br><span class="line">                      <span class="string">'i/537.36'</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># https://news.qq.com/zt2020/page/feiyan.htm#/</span></span><br><span class="line">    url = <span class="string">"https://view.inews.qq.com/g2/getOnsInfo?name=disease_h5"</span></span><br><span class="line">    res = requests.get(url, headers=headers)</span><br><span class="line">    res.encoding = <span class="string">"utf-8"</span></span><br><span class="line">    getSource = json.loads(res.text)</span><br><span class="line">    sourceData = json.loads(getSource[<span class="string">"data"</span>])</span><br><span class="line"></span><br><span class="line">    lastUpdateTime = sourceData[<span class="string">"lastUpdateTime"</span>]  <span class="comment"># æœ€åæ›´æ–°æ—¶é—´</span></span><br><span class="line">    chinaTotal = sourceData[<span class="string">"chinaTotal"</span>]  <span class="comment"># æ€»æƒ…å†µ</span></span><br><span class="line">    chinaAdd = sourceData[<span class="string">"chinaAdd"</span>]  <span class="comment"># æ€»ç¡®è¯Š</span></span><br><span class="line">    areaTree = sourceData[<span class="string">"areaTree"</span>]  <span class="comment"># å›½å®¶</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å›½å®¶åˆ—è¡¨,ä¸­å›½</span></span><br><span class="line">    name = areaTree[<span class="number">0</span>][<span class="string">"name"</span>]  <span class="comment"># ä¸­å›½</span></span><br><span class="line">    today = areaTree[<span class="number">0</span>][<span class="string">"today"</span>]  <span class="comment"># ä»Šå¤©æ–°å¢ç¡®è¯Š</span></span><br><span class="line">    total = areaTree[<span class="number">0</span>][<span class="string">"total"</span>]  <span class="comment"># ä»Šæ—¥æ€»æƒ…å†µ</span></span><br><span class="line">    provinces = areaTree[<span class="number">0</span>][<span class="string">"children"</span>]  <span class="comment"># 34ä¸ªçœä»½</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># print(name)</span></span><br><span class="line">    <span class="comment"># print(today)</span></span><br><span class="line">    <span class="comment"># print(total)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä»Šæ—¥ç¡®è¯Šï¼Œç›®å‰ç¡®è¯Šï¼Œæ€»ç¡®è¯Šï¼Œæ€»æ­»äº¡æ•°ï¼Œæ€»æ­»äº¡æ¦‚ç‡ï¼Œæ€»åº·å¤æ•°ï¼Œæ€»åº·å¤æ¦‚ç‡</span></span><br><span class="line">    daily_data = [name, today[<span class="string">"confirm"</span>], total[<span class="string">"nowConfirm"</span>], total[<span class="string">"confirm"</span>], total[<span class="string">"dead"</span>], total[<span class="string">"deadRate"</span>],</span><br><span class="line">                  total[<span class="string">"heal"</span>], total[<span class="string">"healRate"</span>]]</span><br><span class="line"></span><br><span class="line">    today_details = []</span><br><span class="line">    <span class="keyword">for</span> province <span class="keyword">in</span> provinces:</span><br><span class="line">        <span class="comment"># print(province["name"])  # çœå</span></span><br><span class="line">        <span class="comment"># print(province["today"])</span></span><br><span class="line">        <span class="comment"># print(province["total"])</span></span><br><span class="line">        province_name_ = province[<span class="string">"name"</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># çœæ‰€å±åŸå¸‚</span></span><br><span class="line">        <span class="keyword">for</span> city <span class="keyword">in</span> province[<span class="string">"children"</span>]:</span><br><span class="line">            city_name_ = city[<span class="string">"name"</span>]</span><br><span class="line">            city_today_confirm_ = city[<span class="string">"today"</span>][<span class="string">"confirm"</span>]  <span class="comment"># è¯¥åŸå¸‚ä»Šæ—¥ç¡®è¯Š</span></span><br><span class="line">            city_total_confirm_ = city[<span class="string">"total"</span>][<span class="string">"confirm"</span>]  <span class="comment"># è¯¥åŸå¸‚æ€»ç¡®è¯Š</span></span><br><span class="line">            city_total_heal_ = city[<span class="string">"total"</span>][<span class="string">"heal"</span>]  <span class="comment"># è¯¥åŸå¸‚æ€»åº·å¤</span></span><br><span class="line">            city_total_heal_rate_ = city[<span class="string">"total"</span>][<span class="string">"healRate"</span>]  <span class="comment"># è¯¥åŸå¸‚æ€»åº·å¤æ¦‚ç‡</span></span><br><span class="line">            city_total_dead_ = city[<span class="string">"total"</span>][<span class="string">"dead"</span>]  <span class="comment"># è¯¥åŸå¸‚æ€»æ­»äº¡</span></span><br><span class="line">            city_total_dead_rate_ = city[<span class="string">"total"</span>][<span class="string">"deadRate"</span>]  <span class="comment"># è¯¥åŸå¸‚æ€»æ­»äº¡æ¦‚ç‡</span></span><br><span class="line">            today_details.append([lastUpdateTime, province_name_, city_name_, city_today_confirm_,</span><br><span class="line">                                  city_total_confirm_, city_total_heal_, city_total_heal_rate_,</span><br><span class="line">                                  city_total_dead_, city_total_dead_rate_</span><br><span class="line">                                  ])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> today_details, daily_data</span><br></pre></td></tr></table></figure></div></li></ul><a id="more"></a><h2 id="æ•°æ®åº“è¿æ¥"><a href="#æ•°æ®åº“è¿æ¥" class="headerlink" title="æ•°æ®åº“è¿æ¥"></a>æ•°æ®åº“è¿æ¥</h2><ul><li>è¿™é‡Œä¸»è¦åœ¨äºå»ºç«‹æ•°æ®åº“è¿æ¥ï¼Œå¹¶å–å¾—æ¸¸æ ‡å»æ“ä½œæ•°æ®</li><li>è¿æ¥æ•°æ®åº“æ“ä½œå®Œæ¯•ä¹‹åéœ€è¦åŠæ—¶å…³é—­è¿æ¥<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mariadb_conn</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        conn = mariadb.connect(</span><br><span class="line">            user=<span class="string">"root"</span>,</span><br><span class="line">            password=<span class="string">"raspberry"</span>,</span><br><span class="line">            host=<span class="string">"192.168.137.47"</span>,</span><br><span class="line">            port=<span class="number">3306</span>,</span><br><span class="line">            database=<span class="string">"virus"</span></span><br><span class="line">        )</span><br><span class="line">        cursor = conn.cursor()</span><br><span class="line">        <span class="keyword">return</span> conn, cursor</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> mariadb.Error <span class="keyword">as</span> e:</span><br><span class="line">        print(<span class="string">f"Error connecting to MariaDB Platform: <span class="subst">&#123;e&#125;</span>"</span>)</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mariadb_conn_close</span><span class="params">(conn, cursor)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> cursor:</span><br><span class="line">        cursor.close()</span><br><span class="line">    <span class="keyword">if</span> conn:</span><br><span class="line">        conn.close()</span><br></pre></td></tr></table></figure></div></li></ul><h2 id="è·å–æ•°æ®å¹¶æŒä¹…åŒ–"><a href="#è·å–æ•°æ®å¹¶æŒä¹…åŒ–" class="headerlink" title="è·å–æ•°æ®å¹¶æŒä¹…åŒ–"></a>è·å–æ•°æ®å¹¶æŒä¹…åŒ–</h2><ul><li>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯æ¸¸æ ‡çš„æ“ä½œ <code>cursor.execute()</code></li><li>å¦‚æœæ˜¯æŸ¥è¯¢è¯­å¥çš„è¯ï¼Œæ¸¸æ ‡æ‰§è¡Œä¹‹åå°±èƒ½å¾—åˆ°è¿”å›çš„æ•°æ®</li><li>å…¶ä»–çš„è¯­å¥éœ€è¦æäº¤äº‹åŠ¡<code>conn.commit()</code>æ‰èƒ½å¾—åˆ°è¿”å›çš„æ•°æ®<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›´æ–°æ¯æ—¥çš„è¯¦æƒ…æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update_virus_data</span><span class="params">()</span>:</span></span><br><span class="line">    cursor = <span class="literal">None</span></span><br><span class="line">    conn = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        virus_data = get_tencent_virus_data()[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># conn, cursor = mariadb_conn("root", "raspberry", "192.168.137.165", 3306, "virus")</span></span><br><span class="line">        conn, cursor = mariadb_conn()</span><br><span class="line">        setDataTime = time.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>, time.localtime(time.time()))</span><br><span class="line">        sql_insert_data = <span class="string">"insert into tencent_virus_data(lastUpdateTime,province_name_,"</span> \</span><br><span class="line">                          <span class="string">"city_name_,city_today_confirm_,city_total_confirm_,"</span> \</span><br><span class="line">                          <span class="string">"city_total_heal_,city_total_heal_rate_,"</span> \</span><br><span class="line">                          <span class="string">"city_total_dead_,city_total_dead_rate_,"</span> \</span><br><span class="line">                          <span class="string">"setDataTime"</span><span class="string">") values (%s,%s,%s,%s,%s,%s,%s,%s,%s,%s)"</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># å–æ•°æ®åº“æœ€åä¸€ä¸ªè®°å½•çš„æ—¶é—´å­—æ®µ</span></span><br><span class="line">        sql_lastTime = <span class="string">"select lastUpdateTime from tencent_virus_data order by id desc limit 1"</span></span><br><span class="line">        cursor.execute(sql_lastTime)</span><br><span class="line">        lastUpdateTime = cursor.fetchone()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç¬¬ä¸€æ¬¡åˆå§‹åŒ–æ•°æ®</span></span><br><span class="line">        <span class="keyword">if</span> lastUpdateTime <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            print(<span class="string">f"<span class="subst">&#123;time.asctime()&#125;</span>    ---&gt;    æ»´æ»´ï¼åˆå§‹åŒ–æœ€åˆçš„æ•°æ®ï¼"</span>)</span><br><span class="line">            <span class="keyword">for</span> item <span class="keyword">in</span> virus_data:</span><br><span class="line">                item.append(setDataTime)</span><br><span class="line">                print(item)</span><br><span class="line">                cursor.execute(sql_insert_data, item)</span><br><span class="line">            conn.commit()</span><br><span class="line">            print(<span class="string">f"<span class="subst">&#123;time.asctime()&#125;</span>    ---&gt;    å—’å—’ï¼åˆå§‹åŒ–æ•°æ®å®Œæ¯•ï¼"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># éç¬¬ä¸€æ¬¡æ›´æ–°æ•°æ®</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># virus_data[0][0] æ‹¿ç¬¬ä¸€æ¡æ•°æ®çš„æ—¶é—´å­—æ®µ,å› ä¸ºæ¯æ¡æ•°æ®æ—¶é—´éƒ½æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">            dataNowTime = datetime.strptime(virus_data[<span class="number">0</span>][<span class="number">0</span>], <span class="string">'%Y-%m-%d %H:%M:%S'</span>)</span><br><span class="line">            <span class="comment"># æ•°æ®åº“æœ€æ–°è®°å½•æ—¶é—´ ä¸ å½“å‰è¯·æ±‚çš„æ•°æ®æ—¶é—´å¯¹æ¯”ï¼Œåˆ¤æ–­æ˜¯å¦æ›´æ–°æ•°æ®</span></span><br><span class="line">            <span class="keyword">if</span> dataNowTime &gt; lastUpdateTime[<span class="number">0</span>]:</span><br><span class="line">                print(<span class="string">f"<span class="subst">&#123;time.asctime()&#125;</span>    ---&gt;    æ»´æ»´ï¼å¼€å§‹æ›´æ–°æœ€æ–°æ•°æ®ï¼"</span>)</span><br><span class="line">                <span class="keyword">for</span> item <span class="keyword">in</span> virus_data:</span><br><span class="line">                    item.append(setDataTime)</span><br><span class="line">                    cursor.execute(sql_insert_data, item)</span><br><span class="line">                conn.commit()</span><br><span class="line">                print(<span class="string">f"<span class="subst">&#123;time.asctime()&#125;</span>    ---&gt;    å—’å—’ï¼æ›´æ–°æœ€æ–°æ•°æ®å®Œæ¯•ï¼"</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(<span class="string">f"<span class="subst">&#123;time.asctime()&#125;</span>    ---&gt;    å—¯ï¼å·²æ˜¯æœ€æ–°æ•°æ®ï¼"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        traceback.print_exc()</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        mariadb_conn_close(conn, cursor)</span><br></pre></td></tr></table></figure></div></li></ul><h2 id="ä»é¡µé¢æŠ“å–æ•°æ®"><a href="#ä»é¡µé¢æŠ“å–æ•°æ®" class="headerlink" title="ä»é¡µé¢æŠ“å–æ•°æ®"></a>ä»é¡µé¢æŠ“å–æ•°æ®</h2><h3 id="ä¸€èˆ¬çš„é¡µé¢ï¼Œç›´æ¥è¯·æ±‚è§£æè·å–å³å¯"><a href="#ä¸€èˆ¬çš„é¡µé¢ï¼Œç›´æ¥è¯·æ±‚è§£æè·å–å³å¯" class="headerlink" title="ä¸€èˆ¬çš„é¡µé¢ï¼Œç›´æ¥è¯·æ±‚è§£æè·å–å³å¯"></a>ä¸€èˆ¬çš„é¡µé¢ï¼Œç›´æ¥è¯·æ±‚è§£æè·å–å³å¯</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">baidu_hotPoint</span><span class="params">()</span>:</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit'</span></span><br><span class="line">                      <span class="string">'/537.36 (KHTML, like Gecko) Chrome/53.0.2785.143 Safar'</span></span><br><span class="line">                      <span class="string">'i/537.36'</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    url = <span class="string">"http://top.baidu.com/buzz?b=1&amp;fr=topindex"</span></span><br><span class="line"></span><br><span class="line">    res = requests.get(url, headers=headers)</span><br><span class="line">    res.encoding = <span class="string">"gb2312"</span></span><br><span class="line">    html = res.text</span><br><span class="line">    soup = BeautifulSoup(html, <span class="string">"lxml"</span>)</span><br><span class="line">    titles = soup.find_all(name=<span class="string">"a"</span>, attrs=&#123;<span class="string">"class"</span>: <span class="string">"list-title"</span>&#125;)</span><br><span class="line">    content = [title.text <span class="keyword">for</span> title <span class="keyword">in</span> titles]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> content</span><br></pre></td></tr></table></figure></div><h3 id="å¦‚æœé¡µé¢ç”¨çš„æ˜¯-JS-åŠ è½½çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨-selenium-æ¨¡æ‹Ÿäººå·¥è·å–"><a href="#å¦‚æœé¡µé¢ç”¨çš„æ˜¯-JS-åŠ è½½çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨-selenium-æ¨¡æ‹Ÿäººå·¥è·å–" class="headerlink" title="å¦‚æœé¡µé¢ç”¨çš„æ˜¯ JS åŠ è½½çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ selenium æ¨¡æ‹Ÿäººå·¥è·å–"></a>å¦‚æœé¡µé¢ç”¨çš„æ˜¯ JS åŠ è½½çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ selenium æ¨¡æ‹Ÿäººå·¥è·å–</h3><ul><li>åœ¨è¿™é‡Œéœ€è¦æµè§ˆå™¨å’Œæµè§ˆå™¨é©±åŠ¨é…åˆ</li><li>è·å¾—å’Œ chrome æµè§ˆå™¨ç‰ˆæœ¬ä¸€è‡´çš„ chromedriver é©±åŠ¨</li><li>ğŸ‘‰ <a href="https://npm.taobao.org/mirrors/chromedriver/" target="_blank" rel="noopener">https://npm.taobao.org/mirrors/chromedriver/</a><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sogou_hotSearch</span><span class="params">()</span>:</span></span><br><span class="line">    headers = <span class="string">'user-agent="MQQBrowser/26 Mozilla/5.0 (Linux; U; Android 2.3.7; zh-cn; MB200 Build/GRJ22; '</span> \</span><br><span class="line">              <span class="string">'CyanogenMod-7) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1" '</span></span><br><span class="line"></span><br><span class="line">    url = <span class="string">"https://sa.sogou.com/new-weball/page/sgs/epidemic?type_page=VR"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line"></span><br><span class="line">    options = ChromeOptions()</span><br><span class="line">    options.add_argument(headers)</span><br><span class="line">    options.add_argument(<span class="string">"--headless"</span>)  <span class="comment"># éšè—æµè§ˆå™¨</span></span><br><span class="line">    options.add_argument(<span class="string">"--no-sandbox"</span>)  <span class="comment"># linux éœ€è¦ç¦ç”¨è¿™ä¸ª</span></span><br><span class="line">    options.add_argument(<span class="string">"--disable-gpu"</span>)</span><br><span class="line">    options.add_argument(<span class="string">'blink-settings=imagesEnabled=false'</span>)  <span class="comment"># ä¸åŠ è½½å›¾ç‰‡èµ„æº</span></span><br><span class="line">    chrome = Chrome(executable_path=<span class="string">"./chromedriver.exe"</span>, options=options)  <span class="comment"># è·¯å¾„åŠ è½½é©±åŠ¨</span></span><br><span class="line">    <span class="comment"># chrome = Chrome(options=options)</span></span><br><span class="line">    chrome.get(url)</span><br><span class="line">    el_lis = chrome.find_elements_by_xpath(<span class="string">'//*[@id="no_active_pane"]/div/div/div[2]/ul/li'</span>)</span><br><span class="line">    content = [el_li.text <span class="keyword">for</span> el_li <span class="keyword">in</span> el_lis]</span><br><span class="line">    chrome.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> content</span><br></pre></td></tr></table></figure></div></li></ul><h2 id="å»ºç«‹-Web-æœåŠ¡"><a href="#å»ºç«‹-Web-æœåŠ¡" class="headerlink" title="å»ºç«‹ Web æœåŠ¡"></a>å»ºç«‹ Web æœåŠ¡</h2><h3 id="æ•°æ®äº¤äº’"><a href="#æ•°æ®äº¤äº’" class="headerlink" title="æ•°æ®äº¤äº’"></a>æ•°æ®äº¤äº’</h3><ul><li>è¿™é‡Œä½¿ç”¨ flask å»ºç«‹ç®€å•çš„è¯·æ±‚æœåŠ¡</li><li><p>åœ¨æœåŠ¡ç«¯è¿”å›é¡µé¢éœ€è¦ç”¨åˆ° render_template</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> render_template</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/', methods=["get", "post"])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">"index.html"</span>)</span><br></pre></td></tr></table></figure></div></li><li><p>æ¥ç€åœ¨é¡µé¢å‘é€ ajax è¯·æ±‚å¯¹åº”çš„è·¯ç”±å³å¯</p></li></ul><h3 id="å»ºç«‹å·¥å…·ç±»æ¥å¤„ç†æ•°æ®"><a href="#å»ºç«‹å·¥å…·ç±»æ¥å¤„ç†æ•°æ®" class="headerlink" title="å»ºç«‹å·¥å…·ç±»æ¥å¤„ç†æ•°æ®"></a>å»ºç«‹å·¥å…·ç±»æ¥å¤„ç†æ•°æ®</h3><ul><li>åœ¨é¡¹ç›®æ ¹è·¯å¾„å»ºä¸€ä¸ª xxx.py æ¥ä¸“é—¨å¤„ç†æ•°æ®<ul><li>æ•°æ®åº“è¿æ¥æ–¹æ³•</li><li>æŸ¥è¯¢ç±»æ–¹æ³•</li><li>æ¯ä¸ªæ•°æ®æ¥å£æ–¹æ³•<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_time</span><span class="params">()</span>:</span></span><br><span class="line">    time_str = time.strftime(<span class="string">"%Y&#123;&#125;%m&#123;&#125;%d&#123;&#125; %X"</span>)</span><br><span class="line">    <span class="keyword">return</span> time_str.format(<span class="string">"å¹´"</span>, <span class="string">"æœˆ"</span>, <span class="string">"æ—¥"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mariadb_conn</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        conn = mariadb.connect(</span><br><span class="line">            user=<span class="string">"root"</span>,</span><br><span class="line">            password=<span class="string">"raspberry"</span>,</span><br><span class="line">            host=<span class="string">"192.168.137.47"</span>,</span><br><span class="line">            port=<span class="number">3306</span>,</span><br><span class="line">            database=<span class="string">"virus"</span></span><br><span class="line">        )</span><br><span class="line">        cursor = conn.cursor()</span><br><span class="line">        <span class="keyword">return</span> conn, cursor</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> mariadb.Error <span class="keyword">as</span> e:</span><br><span class="line">        print(<span class="string">f"Error connecting to MariaDB Platform: <span class="subst">&#123;e&#125;</span>"</span>)</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mariadb_conn_close</span><span class="params">(conn, cursor)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> cursor:</span><br><span class="line">        cursor.close()</span><br><span class="line">    <span class="keyword">if</span> conn:</span><br><span class="line">        conn.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(sql, *args)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    :param sql:</span></span><br><span class="line"><span class="string">    :param args</span></span><br><span class="line"><span class="string">    :return è¿”å›æŸ¥è¯¢ç»“æœ ((),())</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    conn, cursor = mariadb_conn()</span><br><span class="line">    cursor.execute(sql, args)</span><br><span class="line">    res = cursor.fetchall()</span><br><span class="line">    mariadb_conn_close(conn, cursor)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_daily_data</span><span class="params">()</span>:</span></span><br><span class="line">    sql = <span class="string">"select today_confirm,total_nowConfirm,"</span> \</span><br><span class="line">          <span class="string">"total_confirm,total_dead,total_deadRate,"</span> \</span><br><span class="line">          <span class="string">"total_heal,total_healRate from daily_data "</span> \</span><br><span class="line">          <span class="string">"where setDataTime=(select setDataTime from daily_data "</span> \</span><br><span class="line">          <span class="string">"order by setDataTime desc limit 1)"</span></span><br><span class="line">    res = query(sql)</span><br><span class="line">    <span class="keyword">return</span> res[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ°å›¾æ•´ä½“æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_area_data</span><span class="params">()</span>:</span></span><br><span class="line">    sql = <span class="string">"select province_name_,sum(city_total_confirm_) "</span> \</span><br><span class="line">          <span class="string">"from tencent_virus_data where lastUpdateTime=("</span> \</span><br><span class="line">          <span class="string">"select lastUpdateTime from tencent_virus_data "</span> \</span><br><span class="line">          <span class="string">"order by lastUpdateTime desc limit 1) "</span> \</span><br><span class="line">          <span class="string">"group by province_name_"</span></span><br><span class="line">    res = query(sql)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ€»è¶‹åŠ¿æœ€è¿‘åå¤©</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_GeneralTrend_data</span><span class="params">()</span>:</span></span><br><span class="line">    sql = <span class="string">"select today_confirm,total_nowConfirm,total_confirm,"</span> \</span><br><span class="line">          <span class="string">"total_dead,total_heal,setDataTime from daily_data "</span> \</span><br><span class="line">          <span class="string">"order by  id desc limit 10"</span></span><br><span class="line">    res = query(sql)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"><span class="comment"># get_GeneralTrend_data()[1:] # ä»ç¬¬äºŒæ¡æ•°æ®å¼€å§‹å–</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»Šæ—¥æœ‰æ–°å¢ç¡®è¯Šçš„çœå¸‚</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_todayNewConfrim_data</span><span class="params">()</span>:</span></span><br><span class="line">    sql = <span class="string">"select CONCAT(province_name_,'-',city_name_) as province_city,"</span> \</span><br><span class="line">          <span class="string">"city_today_confirm_,lastUpdateTime from tencent_virus_data "</span> \</span><br><span class="line">          <span class="string">"where city_today_confirm_ &gt;0 and lastUpdateTime=("</span> \</span><br><span class="line">          <span class="string">"select lastUpdateTime from tencent_virus_data "</span> \</span><br><span class="line">          <span class="string">"ORDER BY lastUpdateTime desc limit 1 )"</span></span><br><span class="line"></span><br><span class="line">    res = query(sql)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›®å‰å„çœå¸‚ç´¯è®¡ç¡®è¯Šæ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_confrimUntilNow</span><span class="params">()</span>:</span></span><br><span class="line">    sql = <span class="string">"select province_name_,sum(city_total_confirm_),lastUpdateTime "</span> \</span><br><span class="line">          <span class="string">"from tencent_virus_data where lastUpdateTime = ( "</span> \</span><br><span class="line">          <span class="string">"select lastUpdateTime from tencent_virus_data "</span> \</span><br><span class="line">          <span class="string">"order by lastUpdateTime desc limit 1) "</span> \</span><br><span class="line">          <span class="string">"group by province_name_"</span></span><br><span class="line"></span><br><span class="line">    res = query(sql)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–æœ€æ–°50æ¡çƒ­æœæ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_hotPoint</span><span class="params">()</span>:</span></span><br><span class="line">    sql = <span class="string">"select content,setDataTime from  hotpoint order by id desc limit 50"</span></span><br><span class="line">    res = query(sql)</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></div></li></ul></li></ul><h3 id="å»ºç«‹è·¯ç”±è°ƒç”¨å·¥å…·ç±»æ–¹æ³•è¿”å›æ•°æ®å€¼"><a href="#å»ºç«‹è·¯ç”±è°ƒç”¨å·¥å…·ç±»æ–¹æ³•è¿”å›æ•°æ®å€¼" class="headerlink" title="å»ºç«‹è·¯ç”±è°ƒç”¨å·¥å…·ç±»æ–¹æ³•è¿”å›æ•°æ®å€¼"></a>å»ºç«‹è·¯ç”±è°ƒç”¨å·¥å…·ç±»æ–¹æ³•è¿”å›æ•°æ®å€¼</h3><ul><li>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯éœ€è¦å¼•å…¥å†™å¥½çš„å·¥å…·ç±»<ul><li><code>import xxx</code></li></ul></li><li>åœ¨è¿™é‡Œå¾—åˆ°å·¥å…·ç±»æŸ¥è¯¢æ•°æ®åº“å¾—åˆ°çš„å€¼ï¼Œå†åšè¿›ä¸€æ­¥å¤„ç†è¿”å›ç»™é¡µé¢å…³æ³¨çš„æ•°æ®ç»“æ„<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route('/', methods=["get", "post"])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">"index.html"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route("/getTime")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_time</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> utils.get_time()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route("/getDailyData")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_daily_data</span><span class="params">()</span>:</span></span><br><span class="line">    data = utils.get_daily_data()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">"today_confirm"</span>: data[<span class="number">0</span>],</span><br><span class="line">                    <span class="string">"total_nowConfirm"</span>: data[<span class="number">1</span>],</span><br><span class="line">                    <span class="string">"total_confirm"</span>: data[<span class="number">2</span>],</span><br><span class="line">                    <span class="string">"total_dead"</span>: data[<span class="number">3</span>],</span><br><span class="line">                    <span class="string">"total_deadRate"</span>: data[<span class="number">4</span>],</span><br><span class="line">                    <span class="string">"total_heal"</span>: data[<span class="number">5</span>],</span><br><span class="line">                    <span class="string">"total_healRate"</span>: data[<span class="number">6</span>]&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route("/getAreaData")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_area_data</span><span class="params">()</span>:</span></span><br><span class="line">    areaData = []</span><br><span class="line">    <span class="keyword">for</span> city <span class="keyword">in</span> utils.get_area_data():</span><br><span class="line">        areaData.append(&#123;<span class="string">"name"</span>: city[<span class="number">0</span>], <span class="string">"value"</span>: int(city[<span class="number">1</span>])&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">"data"</span>: areaData&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route("/getGeneralTrend")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_generalTrend_data</span><span class="params">()</span>:</span></span><br><span class="line">    gT_data = utils.get_GeneralTrend_data()</span><br><span class="line">    today_confirm, total_nowConfirm, total_confirm = [], [], []</span><br><span class="line">    total_dead, total_heal, setDataTime = [], [], []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> a, b, c, d, e, f <span class="keyword">in</span> gT_data:</span><br><span class="line">        today_confirm.append(a)</span><br><span class="line">        total_nowConfirm.append(b)</span><br><span class="line">        total_confirm.append(c)</span><br><span class="line">        total_dead.append(d)</span><br><span class="line">        total_heal.append(e)</span><br><span class="line">        setDataTime.append(f.strftime(<span class="string">"%m-%d"</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># reverse() æ²¡æœ‰è¿”å›å€¼</span></span><br><span class="line">    today_confirm.reverse()</span><br><span class="line">    total_nowConfirm.reverse()</span><br><span class="line">    total_confirm.reverse()</span><br><span class="line">    total_dead.reverse()</span><br><span class="line">    total_heal.reverse()</span><br><span class="line">    setDataTime.reverse()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">"today_confirm"</span>: today_confirm,</span><br><span class="line">                    <span class="string">"total_nowConfirm"</span>: total_nowConfirm,</span><br><span class="line">                    <span class="string">"total_confirm"</span>: total_confirm,</span><br><span class="line">                    <span class="string">"total_dead"</span>: total_dead,</span><br><span class="line">                    <span class="string">"total_heal"</span>: total_heal,</span><br><span class="line">                    <span class="string">"setDataTime"</span>: setDataTime&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route("/getTodayNewConfrim")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_todayNewConfrim_data</span><span class="params">()</span>:</span></span><br><span class="line">    tNC_data = utils.get_todayNewConfrim_data()</span><br><span class="line">    province_city, city_today_confirm_ = [], []</span><br><span class="line">    setDateTime = <span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> tNC_data:</span><br><span class="line">        province_city.append(i[<span class="number">0</span>])</span><br><span class="line">        city_today_confirm_.append(i[<span class="number">1</span>])</span><br><span class="line">        setDateTime = i[<span class="number">2</span>].strftime(<span class="string">"%Y/%m/%d"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">"setDateTime"</span>: setDateTime,</span><br><span class="line">                    <span class="string">"city_today_confirm_"</span>: city_today_confirm_,</span><br><span class="line">                    <span class="string">"province_city"</span>: province_city&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route("/getConfrimUntilNow")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_confrimUntilNow_data</span><span class="params">()</span>:</span></span><br><span class="line">    cUN_data = utils.get_confrimUntilNow()</span><br><span class="line">    provinces = []</span><br><span class="line">    setDateTime = <span class="string">""</span></span><br><span class="line">    provinceConfrim = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> cUN_data:</span><br><span class="line">        provinces.append(i[<span class="number">0</span>])</span><br><span class="line">        setDateTime = i[<span class="number">2</span>].strftime(<span class="string">"%Y/%m/%d"</span>)</span><br><span class="line">        pC = int(decimal.Decimal(i[<span class="number">1</span>]).quantize(decimal.Decimal(<span class="string">'0'</span>)))  <span class="comment"># æŠŠ Decimal è½¬æ¢æˆå¯ç”¨äº json åºåˆ—åŒ–çš„ int ç±»å‹</span></span><br><span class="line">        provinceConfrim.append(&#123;<span class="string">"name"</span>: i[<span class="number">0</span>], <span class="string">"value"</span>: pC&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">"provinces"</span>: provinces,</span><br><span class="line">                    <span class="string">"provinceConfrim"</span>: provinceConfrim,</span><br><span class="line">                    <span class="string">"setDateTime"</span>: setDateTime&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route("/getHotPoint")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_hotPoint_data</span><span class="params">()</span>:</span></span><br><span class="line">    hP_data = utils.get_hotPoint()</span><br><span class="line">    keywords = []</span><br><span class="line">    setDataTime = <span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> hP_data:</span><br><span class="line">        content = i[<span class="number">0</span>]</span><br><span class="line">        keyword_weight = extract_tags(content, topK=<span class="number">20</span>, withWeight=<span class="literal">True</span>)</span><br><span class="line">        setDataTime = i[<span class="number">1</span>].strftime(<span class="string">"%Y/%m/%d"</span>)</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> keyword_weight:</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> j[<span class="number">0</span>].isdigit():  <span class="comment"># å¦‚æœæ˜¯æ•°å­—å°±ä¸åŠ å…¥æ•°ç»„</span></span><br><span class="line">                weight = <span class="number">20</span> * round(j[<span class="number">1</span>], <span class="number">1</span>)</span><br><span class="line">                keywords.append(&#123;<span class="string">"name"</span>: j[<span class="number">0</span>], <span class="string">"value"</span>: str(weight)&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">"keywords"</span>: keywords,</span><br><span class="line">                    <span class="string">"setDataTime"</span>: setDataTime&#125;)</span><br></pre></td></tr></table></figure></div></li></ul><h3 id="é¡µé¢è¯·æ±‚æ•°æ®å¹¶å¯¹æ¥å±•ç¤º"><a href="#é¡µé¢è¯·æ±‚æ•°æ®å¹¶å¯¹æ¥å±•ç¤º" class="headerlink" title="é¡µé¢è¯·æ±‚æ•°æ®å¹¶å¯¹æ¥å±•ç¤º"></a>é¡µé¢è¯·æ±‚æ•°æ®å¹¶å¯¹æ¥å±•ç¤º</h3><ul><li>è¿™é‡Œå±•ç¤ºæ•°æ®ç”¨çš„ Echarts </li><li>Echarts çš„è¯ï¼Œéœ€è¦å…³æ³¨å®ƒçš„ options å†…éœ€è¦ä¼ å…¥çš„æ•°æ®ç»“æ„</li><li><p>ç„¶ååœ¨ ajax è¯·æ±‚è·å¾—æ•°æ®åï¼Œèµ‹ç»™å¯¹åº”çš„ä½ç½®å³å¯</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAreaData</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url: <span class="string">"/getAreaData"</span>,</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">            center_option.series[<span class="number">0</span>].data=data.data;</span><br><span class="line">            center.setOption(center_option);</span><br><span class="line">        &#125;,</span><br><span class="line">        error:<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li><li><p>ä½¿ç”¨ Echarts çš„ wordCloud éœ€è¦æ³¨æ„çš„æ˜¯ 5.0 ç‰ˆæœ¬ä¸æ”¯æŒ</p></li><li>éœ€è¦åˆ‡æ¢ 5.0 ä¹‹å‰çš„ç‰ˆæœ¬</li><li>è¿™æ ·çš„è¯ï¼Œå¯ä»¥åœ¨é¡¹ç›®ä¸­å¼•å…¥ä¸¤ä¸ªä¸åŒç‰ˆæœ¬çš„ Echarts.js </li><li>ç„¶åæ‰“å¼€å…¶ä¸­ä¸€ä¸ªï¼ŒæŠŠå†…éƒ¨çš„ echarts å¯¹è±¡å…¨éƒ¨ä¿®æ”¹<ul><li>æ¯”å¦‚éœ€è¦å•ç‹¬æŠŠ 4.0 ç‰ˆæœ¬çš„åšå¤„ç†ï¼Œå°±æ‰“å¼€è¯¥ js æ–‡ä»¶ï¼Œå°†å…¨éƒ¨é»˜è®¤çš„ echarts å¯¹è±¡ä¿®æ”¹æˆ echarts4</li><li>åŒºåˆ†å¼€ä¸åŒç‰ˆæœ¬</li></ul></li><li>æœ€åè·å–å¯¹è±¡çš„æ—¶å€™ä½¿ç”¨ echarts4 å³å¯</li></ul><h2 id="æ ‘è“æ´¾éƒ¨ç½²æµ‹è¯•"><a href="#æ ‘è“æ´¾éƒ¨ç½²æµ‹è¯•" class="headerlink" title="æ ‘è“æ´¾éƒ¨ç½²æµ‹è¯•"></a>æ ‘è“æ´¾éƒ¨ç½²æµ‹è¯•</h2><h3 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h3><ul><li>é…ç½®å¥½åŸºæœ¬ç¯å¢ƒ</li><li>ç„¶åç›´æ¥é€šè¿‡ python å‘½ä»¤å¯åŠ¨ flask å³å¯</li><li><p>éœ€è¦å¯¹å¤–è®¿é—®å°±éœ€è¦è®¾ç½®ä¸€ä¸‹ host</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run(host=<span class="string">"0.0.0.0"</span>)</span><br></pre></td></tr></table></figure></div></li><li><p>æµè§ˆå™¨è¾“å…¥ ip:5000 å³å¯çœ‹åˆ°æœåŠ¡</p></li></ul><h3 id="Nginx-åä»£"><a href="#Nginx-åä»£" class="headerlink" title="Nginx åä»£"></a>Nginx åä»£</h3><ul><li>é…ç½®å¥½ nginx ,å°†æœåŠ¡çš„åœ°å€ä»£ç†åˆ° nginx</li><li>æ‰¾åˆ°é…ç½®æ–‡ä»¶ï¼Œæˆ‘çš„æ ‘è“æ´¾é»˜è®¤çš„ nginx é…ç½®æ–‡ä»¶æ˜¯ <code>/etc/nginx/nginx.conf</code></li><li><p>ä¸»è¦é…ç½®</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">    upstream hgo &#123;</span><br><span class="line"></span><br><span class="line">        server 127.0.0.1:5000 weight=10;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       8080 default_server;</span><br><span class="line">        listen       [::]:8080 default_server;</span><br><span class="line">        server_name  _;</span><br><span class="line">        root         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">         Load configuration files <span class="keyword">for</span> the default server block.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">         include /etc/nginx/default.d/*.conf;</span></span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">                proxy_pass http://hgo;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">        location = /404.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div></li><li><p>æ•´ä¸ªé…ç½®æ–‡ä»¶</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> For more information on configuration, see:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   * Official English Documentation: http://nginx.org/en/docs/</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   * Official Russian Documentation: http://nginx.org/ru/docs/</span></span><br><span class="line"></span><br><span class="line">user nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log /var/log/nginx/error.log;</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span></span><br><span class="line">include /usr/share/nginx/modules/*.conf;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '</span><br><span class="line">                      '$status $body_bytes_sent "$http_referer" '</span><br><span class="line">                      '"$http_user_agent" "$http_x_forwarded_for"';</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile            on;</span><br><span class="line">    tcp_nopush          on;</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_timeout   65;</span><br><span class="line">    types_hash_max_size 2048;</span><br><span class="line"></span><br><span class="line">    include             /etc/nginx/mime.types;</span><br><span class="line">    default_type        application/octet-stream;</span><br><span class="line"></span><br><span class="line">    # Load modular configuration files from the /etc/nginx/conf.d directory.</span><br><span class="line">    # See http://nginx.org/en/docs/ngx_core_module.html#include</span><br><span class="line">    # for more information.</span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line"></span><br><span class="line">    upstream hgo &#123;</span><br><span class="line"></span><br><span class="line">        server 127.0.0.1:5000 weight=10;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       8080 default_server;</span><br><span class="line">        listen       [::]:8080 default_server;</span><br><span class="line">        server_name  _;</span><br><span class="line">        root         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">         Load configuration files <span class="keyword">for</span> the default server block.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">         include /etc/nginx/default.d/*.conf;</span></span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">                proxy_pass http://hgo;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">        location = /404.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Settings <span class="keyword">for</span> a TLS enabled server.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    server &#123;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        listen       443 ssl http2 default_server;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        listen       [::]:443 ssl http2 default_server;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        server_name  _;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        root         /usr/share/nginx/html;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">        ssl_certificate <span class="string">"/etc/pki/nginx/server.crt"</span>;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        ssl_certificate_key <span class="string">"/etc/pki/nginx/private/server.key"</span>;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        ssl_session_cache shared:SSL:1m;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        ssl_session_timeout  10m;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        ssl_ciphers HIGH:!aNULL:!MD5;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        ssl_prefer_server_ciphers on;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">        <span class="comment"># Load configuration files for the default server block.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">        include /etc/nginx/default.d/*.conf;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">        location / &#123;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        &#125;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">        error_page 404 /404.html;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        location = /404.html &#123;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        &#125;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">        error_page 500 502 503 504 /50x.html;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        location = /50x.html &#123;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        &#125;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    &#125;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li><li><p>è¿™æ ·ä¸€æ¥å°±å¯é€šè¿‡ nginx ä»£ç†å‡ºæ¥çš„åœ°å€å»è®¿é—®æœåŠ¡å™¨å†…éƒ¨çš„åœ°å€äº†</p></li></ul><h3 id="ä½¿ç”¨-WSGI-æœåŠ¡"><a href="#ä½¿ç”¨-WSGI-æœåŠ¡" class="headerlink" title="ä½¿ç”¨ WSGI æœåŠ¡"></a>ä½¿ç”¨ WSGI æœåŠ¡</h3><ul><li>ä¸å»ºè®®ç›´æ¥ç”¨ python å‘½ä»¤å»å¯åŠ¨ flask </li><li>ä½¿ç”¨ gunicorn å°†æœåŠ¡å¯åŠ¨</li><li><code>gunicorn -b 127.0.0.1:5000 -D app:app</code></li><li><code>gunicorn -b 127.0.0.1:5000 -D æ–‡ä»¶å:æ–‡ä»¶å†…éƒ¨çš„ flask å¯¹è±¡å</code><ul><li><code>app = Flask(__name__)</code></li></ul></li></ul><h3 id="å®šæ—¶ä»»åŠ¡"><a href="#å®šæ—¶ä»»åŠ¡" class="headerlink" title="å®šæ—¶ä»»åŠ¡"></a>å®šæ—¶ä»»åŠ¡</h3><ul><li><code>crontab -l</code> æŸ¥çœ‹æ­£åœ¨æ‰§è¡Œçš„å®šæ—¶ä»»åŠ¡</li><li><p><code>crontab -e</code> ç¼–è¾‘å®šæ—¶ä»»åŠ¡</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Edit this file to introduce tasks to be run by cron.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Each task to run has to be defined through a single line</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> indicating with different fields when the task will be run</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> and what <span class="built_in">command</span> to run <span class="keyword">for</span> the task</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> To define the time you can provide concrete values <span class="keyword">for</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> minute (m), hour (h), day of month (dom), month (mon),</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> and day of week (dow) or use <span class="string">'*'</span> <span class="keyword">in</span> these fields (<span class="keyword">for</span> <span class="string">'any'</span>).</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Notice that tasks will be started based on the cron<span class="string">'s system</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> daemon<span class="string">'s notion of time and timezones.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Output of the crontab <span class="built_in">jobs</span> (including errors) is sent through</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> email to the user the crontab file belongs to (unless redirected).</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> For example, you can run a backup of all your user accounts</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> at 5 a.m every week with:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> For more information see the manual pages of crontab(5) and cron(8)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> m h  dom mon dow   <span class="built_in">command</span></span></span><br><span class="line">45 * * * * python3 /home/pi/Documents/FkZi/gunicorn/virus.py dd &gt;&gt; /home/pi/Documents/log/dd 2&gt;&amp;1 &amp;</span><br><span class="line">45 * * * * python3 /home/pi/Documents/FkZi/gunicorn/virus.py vd &gt;&gt; /home/pi/Documents/log/vd 2&gt;&amp;1 &amp;</span><br><span class="line">45 * * * * python3 /home/pi/Documents/FkZi/gunicorn/virus.py hp &gt;&gt; /home/pi/Documents/log/hp 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure></div></li><li><p>å®šæ—¶ä»»åŠ¡æ‰§è¡ŒæˆåŠŸå¯åœ¨å¯¹åº”çš„ç›®å½•çœ‹åˆ°ç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶ <code>/home/pi/Documents/log/dd</code></p></li><li>å¯çœ‹åˆ°å¯¹åº”çš„å‚æ•°è®¾ç½®</li><li><code>virus.py hp</code> è¿™é‡Œæ˜¯ç»™ py è„šæœ¬ä¼ é€’å‚æ•°</li><li>éœ€è¦åœ¨æ–‡ä»¶å†…è®¾ç½®<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    length = len(sys.argv)</span><br><span class="line">    <span class="keyword">if</span> length == <span class="number">1</span>:</span><br><span class="line">        s = <span class="string">"""</span></span><br><span class="line"><span class="string">                è¯·è¾“å…¥å‚æ•°ï¼š</span></span><br><span class="line"><span class="string">                dd æ›´æ–°è¯¦ç»†æ•°æ®</span></span><br><span class="line"><span class="string">                vd æ›´æ–°æ±‡æ€»æ•°æ®</span></span><br><span class="line"><span class="string">                hp æ›´æ–°çƒ­ç‚¹ä¿¡æ¯</span></span><br><span class="line"><span class="string">            """</span></span><br><span class="line">        print(s)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        order = sys.argv[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">if</span> order == <span class="string">"vd"</span>:</span><br><span class="line">            update_virus_data()</span><br><span class="line">        <span class="keyword">elif</span> order == <span class="string">"dd"</span>:</span><br><span class="line">            update_daily_data()</span><br><span class="line">        <span class="keyword">elif</span> order == <span class="string">"hp"</span>:</span><br><span class="line">            update_hotPoint()</span><br></pre></td></tr></table></figure></div></li></ul><h2 id="ç”Ÿäº§æœåŠ¡å™¨éƒ¨ç½²"><a href="#ç”Ÿäº§æœåŠ¡å™¨éƒ¨ç½²" class="headerlink" title="ç”Ÿäº§æœåŠ¡å™¨éƒ¨ç½²"></a>ç”Ÿäº§æœåŠ¡å™¨éƒ¨ç½²</h2><ul><li>å’Œåœ¨æµ‹è¯•ç¯å¢ƒä¸€æ ·çš„æ­¥éª¤å³å¯ï¼Œè¿™é‡Œç”Ÿäº§çš„è®¾å¤‡ä¸º x86 çš„ Linux,OS ä¸º CentOS</li><li>å…ˆæ‹‰é¡¹ç›®åˆ°è®¾å¤‡é‡Œï¼ŒæŠŠä¾èµ–å®‰è£…å¥½</li><li>å°†é¡¹ç›®å¯åŠ¨èµ·æ¥ï¼Œé…ç½® nginx æŠŠç«¯å£ä»£ç†å‡ºæ¥</li><li>ç„¶åç”¨ gunicorn å¯åŠ¨é¡¹ç›®</li><li>è®¾ç½®å®šæ—¶ä»»åŠ¡</li><li>æµ‹è¯•å®šæ—¶ä»»åŠ¡çš„è„šæœ¬ï¼ŒæŠŠä¾èµ–è£…å¥½ï¼Œä¸»è¦é—®é¢˜åœ¨ chromedirver<ul><li>ğŸ‘‰ <a href="https://cloud.tencent.com/developer/article/1647905" target="_blank" rel="noopener">çˆ¬è™«åœ¨linuxä¸‹å¯åŠ¨selenium-å®‰è£…è°·æ­Œæµè§ˆå™¨å’Œé©±åŠ¨</a></li></ul></li><li>â€˜chromedriverâ€™ executable needs to be in PATH. Please see <a href="https://sites.google.com/a/chromium.org/chromedriver/home" target="_blank" rel="noopener">https://sites.google.com/a/chromium.org/chromedriver/home</a><ul><li>å¦‚æœå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œåœ¨ä»£ç é‡ŒæŒ‡å®š chrome å¯¹è±¡é©±åŠ¨è·¯å¾„å³å¯</li></ul></li></ul><h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><h3 id="print-cursor-execute-sql-ä¸ºç©º"><a href="#print-cursor-execute-sql-ä¸ºç©º" class="headerlink" title="print(cursor.execute(sql)) ä¸ºç©º"></a>print(cursor.execute(sql)) ä¸ºç©º</h3><ul><li>å› ä¸ºæ‰§è¡Œçš„è¯­å¥æœªéæŸ¥è¯¢è¯­å¥ï¼Œåªæœ‰æŸ¥è¯¢è¯­å¥æ‰æœ‰è¿”å›å€¼</li><li>å…¶ä»–è¯­å¥ï¼Œå¦‚æ’å…¥è¯­å¥ç­‰ï¼Œéƒ½éœ€è¦æäº¤äº‹åŠ¡ commit() ä¹‹åæ‰èƒ½å¾—åˆ°è¿”å›å€¼ </li></ul><h3 id="åœ¨-selenium-ä¸­è·å–æµè§ˆå™¨å¯¹è±¡çš„æ—¶å€™ï¼Œæµè§ˆå™¨å¯åŠ¨åä¸€ä¼šå°±å…³é—­äº†"><a href="#åœ¨-selenium-ä¸­è·å–æµè§ˆå™¨å¯¹è±¡çš„æ—¶å€™ï¼Œæµè§ˆå™¨å¯åŠ¨åä¸€ä¼šå°±å…³é—­äº†" class="headerlink" title="åœ¨ selenium ä¸­è·å–æµè§ˆå™¨å¯¹è±¡çš„æ—¶å€™ï¼Œæµè§ˆå™¨å¯åŠ¨åä¸€ä¼šå°±å…³é—­äº†"></a>åœ¨ selenium ä¸­è·å–æµè§ˆå™¨å¯¹è±¡çš„æ—¶å€™ï¼Œæµè§ˆå™¨å¯åŠ¨åä¸€ä¼šå°±å…³é—­äº†</h3><ul><li>å› ä¸ºè·å–æµè§ˆå™¨çš„å¯¹è±¡åœ¨æ–¹æ³•ä¸­ï¼Œæ–¹æ³•æ‰§è¡Œå®Œæµè§ˆå™¨è‡ªç„¶å°±è·Ÿç€å…³é—­äº†</li><li>å¦‚æœéœ€è¦æµè§ˆå™¨ä¸€ç›´å­˜åœ¨ï¼ŒæŠŠæµè§ˆå™¨å¯¹è±¡åœ¨æ–¹æ³•å¤–éƒ¨ï¼Œä½¿å…¶æˆä¸ºå…¨å±€å¯¹è±¡å°±å¯ä»¥äº†</li></ul><h3 id="æ ‘è“æ´¾-arm-æ¶æ„å®‰è£…çš„-nginx-é»˜è®¤é…ç½®ç¼ºå¤±"><a href="#æ ‘è“æ´¾-arm-æ¶æ„å®‰è£…çš„-nginx-é»˜è®¤é…ç½®ç¼ºå¤±" class="headerlink" title="æ ‘è“æ´¾ arm æ¶æ„å®‰è£…çš„ nginx é»˜è®¤é…ç½®ç¼ºå¤±"></a>æ ‘è“æ´¾ arm æ¶æ„å®‰è£…çš„ nginx é»˜è®¤é…ç½®ç¼ºå¤±</h3><ul><li>æ‰¾åˆ°å¯¹çš„ä½ç½®çš„é…ç½®æ–‡ä»¶</li><li>ç„¶åå¯ä»¥ä»å…¶ä»–å·²å®‰è£… nginx çš„è®¾å¤‡ä¸­æŠŠ é…ç½®æ–‡ä»¶ ä¼ è¿‡æ¥</li></ul><h3 id="nginx-æ²¡æœ‰æŠŠæœåŠ¡ä»£ç†å‡ºæ¥"><a href="#nginx-æ²¡æœ‰æŠŠæœåŠ¡ä»£ç†å‡ºæ¥" class="headerlink" title="nginx æ²¡æœ‰æŠŠæœåŠ¡ä»£ç†å‡ºæ¥"></a>nginx æ²¡æœ‰æŠŠæœåŠ¡ä»£ç†å‡ºæ¥</h3><ul><li><p>å¯èƒ½éœ€è¦é…ç½®ä¸€ä¸‹ç»„å’Œç”¨ root æ¥å¯åŠ¨</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- `groupadd nginx` </span><br><span class="line">- `useradd -g nginx nginx -s /sbin/nologin`</span><br></pre></td></tr></table></figure></div></li><li><p>è¿˜éœ€è¦å…³æ³¨å½“å‰çš„ç”¨æˆ·å’Œ root ç”¨æˆ·çš„åŒ…æ˜¯å¦æœ‰ nginx</p></li></ul><h3 id="arm-æ¶æ„çš„-chromedriver-ç‰ˆæœ¬"><a href="#arm-æ¶æ„çš„-chromedriver-ç‰ˆæœ¬" class="headerlink" title="arm æ¶æ„çš„ chromedriver ç‰ˆæœ¬"></a>arm æ¶æ„çš„ chromedriver ç‰ˆæœ¬</h3><ul><li>é¦–å…ˆæ˜¯è¦ç¡®ä¿ chrome æµè§ˆå™¨å’Œ chromedriver ç‰ˆæœ¬ä¸€è‡´</li><li>arm æ¶æ„çš„ chromedriver å®åœ¨éš¾æ‰¾ï¼Œæ ‘è“æ´¾ 4b é‡Œçš„ chromiun çš„ç‰ˆæœ¬ä¸º 78<ul><li>arm æ¶æ„çš„ chromedriver ç‰ˆæœ¬ä¸º 78 æ ¹æœ¬æ‰¾ä¸åˆ° </li></ul></li><li>è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥æ¢ä¸ªæ€è·¯ï¼ŒæŠŠæµè§ˆå™¨å’Œé©±åŠ¨éƒ½å‡çº§åˆ°æœ€æ–°å³å¯</li><li><code>sudo apt-get install chromium-browser</code> æ›´æ–°æœ€æ–°</li><li><code>chromium-browser --version</code></li><li>ğŸ‘‰ <a href="https://mirrors.tuna.tsinghua.edu.cn/raspberrypi/pool/main/c/chromium-browser/" target="_blank" rel="noopener">mirrors.tuna.tsinghua.edu.cn</a></li><li><code>sudo apt-get install chromium-chromedriver</code> ä¸‹è½½æµè§ˆå™¨é©±åŠ¨ï¼Œé»˜è®¤ä¸‹äº†æœ€æ–°çš„</li><li>ğŸ‘‰ <a href="https://launchpad.net/+search?field.text=chromium-chromedriver+armhf" target="_blank" rel="noopener">Launchpad.net</a></li></ul><h3 id="mysql-å’Œ-mariadb-çš„-group-by-å­—æ®µ"><a href="#mysql-å’Œ-mariadb-çš„-group-by-å­—æ®µ" class="headerlink" title="mysql å’Œ mariadb çš„ group by å­—æ®µ"></a>mysql å’Œ mariadb çš„ group by å­—æ®µ</h3><ul><li>[Err] 1055 - Expression #3 of SELECT list is not in GROUP BY clause and contains nonaggregated column â€˜virus.tencent_virus_data.lastUpdateTimeâ€™ which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by</li><li>ğŸ‘‰<a href="https://www.cnblogs.com/Wayou/p/mysql_group_by_issue.html" target="_blank" rel="noopener">MySQL GROUP BY çš„é—®é¢˜</a></li><li>ğŸ‘‰<a href="https://cloud.tencent.com/developer/article/1533773" target="_blank" rel="noopener">sql_modeä¹‹only_full_group_by</a></li></ul><h3 id="mysql-å’Œ-mariadb-çš„-group-by-ç»“æœé¡ºåº"><a href="#mysql-å’Œ-mariadb-çš„-group-by-ç»“æœé¡ºåº" class="headerlink" title="mysql å’Œ mariadb çš„ group by ç»“æœé¡ºåº"></a>mysql å’Œ mariadb çš„ group by ç»“æœé¡ºåº</h3><ul><li>ğŸ‘‰<a href="https://www.coder.work/article/508344" target="_blank" rel="noopener">mysql - MariaDBä¸Šçš„â€œGROUP BYâ€çš„è¡Œä¸ºä¸MySQLä¸åŒ</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;åˆ†ææ¥å£æ•°æ®ç»“æ„&quot;&gt;&lt;a href=&quot;#åˆ†ææ¥å£æ•°æ®ç»“æ„&quot; class=&quot;headerlink&quot; title=&quot;åˆ†ææ¥å£æ•°æ®ç»“æ„&quot;&gt;&lt;/a&gt;åˆ†ææ¥å£æ•°æ®ç»“æ„&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;æ‰¾åˆ°æ•°æ®çš„æ¥å£ä¿¡æ¯ä¹‹åï¼Œè¯·æ±‚è·å–æ•°æ®å¹¶é€å±‚åˆ†ææ•°æ®ç»“æ„&lt;/li&gt;
&lt;li&gt;ç„¶åæå–éœ€è¦çš„æ•°æ®&lt;/li&gt;
&lt;li&gt;æœ€åå°è£…æˆæ–¹æ³•&lt;figure class=&quot;highlight py&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;get_tencent_virus_data&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    headers = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;User-Agent&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                      &lt;span class=&quot;string&quot;&gt;&#39;/537.36 (KHTML, like Gecko) Chrome/53.0.2785.143 Safar&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                      &lt;span class=&quot;string&quot;&gt;&#39;i/537.36&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# https://news.qq.com/zt2020/page/feiyan.htm#/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    url = &lt;span class=&quot;string&quot;&gt;&quot;https://view.inews.qq.com/g2/getOnsInfo?name=disease_h5&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    res = requests.get(url, headers=headers)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    res.encoding = &lt;span class=&quot;string&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    getSource = json.loads(res.text)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sourceData = json.loads(getSource[&lt;span class=&quot;string&quot;&gt;&quot;data&quot;&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    lastUpdateTime = sourceData[&lt;span class=&quot;string&quot;&gt;&quot;lastUpdateTime&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# æœ€åæ›´æ–°æ—¶é—´&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    chinaTotal = sourceData[&lt;span class=&quot;string&quot;&gt;&quot;chinaTotal&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# æ€»æƒ…å†µ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    chinaAdd = sourceData[&lt;span class=&quot;string&quot;&gt;&quot;chinaAdd&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# æ€»ç¡®è¯Š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    areaTree = sourceData[&lt;span class=&quot;string&quot;&gt;&quot;areaTree&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# å›½å®¶&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# å›½å®¶åˆ—è¡¨,ä¸­å›½&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    name = areaTree[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# ä¸­å›½&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    today = areaTree[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;today&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# ä»Šå¤©æ–°å¢ç¡®è¯Š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    total = areaTree[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;total&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# ä»Šæ—¥æ€»æƒ…å†µ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    provinces = areaTree[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;children&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# 34ä¸ªçœä»½&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# print(name)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# print(today)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# print(total)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# ä»Šæ—¥ç¡®è¯Šï¼Œç›®å‰ç¡®è¯Šï¼Œæ€»ç¡®è¯Šï¼Œæ€»æ­»äº¡æ•°ï¼Œæ€»æ­»äº¡æ¦‚ç‡ï¼Œæ€»åº·å¤æ•°ï¼Œæ€»åº·å¤æ¦‚ç‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    daily_data = [name, today[&lt;span class=&quot;string&quot;&gt;&quot;confirm&quot;&lt;/span&gt;], total[&lt;span class=&quot;string&quot;&gt;&quot;nowConfirm&quot;&lt;/span&gt;], total[&lt;span class=&quot;string&quot;&gt;&quot;confirm&quot;&lt;/span&gt;], total[&lt;span class=&quot;string&quot;&gt;&quot;dead&quot;&lt;/span&gt;], total[&lt;span class=&quot;string&quot;&gt;&quot;deadRate&quot;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  total[&lt;span class=&quot;string&quot;&gt;&quot;heal&quot;&lt;/span&gt;], total[&lt;span class=&quot;string&quot;&gt;&quot;healRate&quot;&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    today_details = []&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; province &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; provinces:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# print(province[&quot;name&quot;])  # çœå&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# print(province[&quot;today&quot;])&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# print(province[&quot;total&quot;])&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        province_name_ = province[&lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# çœæ‰€å±åŸå¸‚&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; city &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; province[&lt;span class=&quot;string&quot;&gt;&quot;children&quot;&lt;/span&gt;]:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            city_name_ = city[&lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            city_today_confirm_ = city[&lt;span class=&quot;string&quot;&gt;&quot;today&quot;&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;confirm&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# è¯¥åŸå¸‚ä»Šæ—¥ç¡®è¯Š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            city_total_confirm_ = city[&lt;span class=&quot;string&quot;&gt;&quot;total&quot;&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;confirm&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# è¯¥åŸå¸‚æ€»ç¡®è¯Š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            city_total_heal_ = city[&lt;span class=&quot;string&quot;&gt;&quot;total&quot;&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;heal&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# è¯¥åŸå¸‚æ€»åº·å¤&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            city_total_heal_rate_ = city[&lt;span class=&quot;string&quot;&gt;&quot;total&quot;&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;healRate&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# è¯¥åŸå¸‚æ€»åº·å¤æ¦‚ç‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            city_total_dead_ = city[&lt;span class=&quot;string&quot;&gt;&quot;total&quot;&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;dead&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# è¯¥åŸå¸‚æ€»æ­»äº¡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            city_total_dead_rate_ = city[&lt;span class=&quot;string&quot;&gt;&quot;total&quot;&lt;/span&gt;][&lt;span class=&quot;string&quot;&gt;&quot;deadRate&quot;&lt;/span&gt;]  &lt;span class=&quot;comment&quot;&gt;# è¯¥åŸå¸‚æ€»æ­»äº¡æ¦‚ç‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            today_details.append([lastUpdateTime, province_name_, city_name_, city_today_confirm_,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                  city_total_confirm_, city_total_heal_, city_total_heal_rate_,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                  city_total_dead_, city_total_dead_rate_&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                  ])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; today_details, daily_data&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
    
      <category term="Linux" scheme="http://www.orekiyuta.cn/tags/Linux/"/>
    
      <category term="Selenium" scheme="http://www.orekiyuta.cn/tags/Selenium/"/>
    
      <category term="ChromeDriver" scheme="http://www.orekiyuta.cn/tags/ChromeDriver/"/>
    
      <category term="JavaScript" scheme="http://www.orekiyuta.cn/tags/JavaScript/"/>
    
      <category term="MySQL" scheme="http://www.orekiyuta.cn/tags/MySQL/"/>
    
      <category term="Flask" scheme="http://www.orekiyuta.cn/tags/Flask/"/>
    
      <category term="Python" scheme="http://www.orekiyuta.cn/tags/Python/"/>
    
      <category term="Mariadb" scheme="http://www.orekiyuta.cn/tags/Mariadb/"/>
    
      <category term="RaspberryPi" scheme="http://www.orekiyuta.cn/tags/RaspberryPi/"/>
    
      <category term="Nginx" scheme="http://www.orekiyuta.cn/tags/Nginx/"/>
    
      <category term="Chromium" scheme="http://www.orekiyuta.cn/tags/Chromium/"/>
    
      <category term="BeautifulSoup" scheme="http://www.orekiyuta.cn/tags/BeautifulSoup/"/>
    
      <category term="Echarts" scheme="http://www.orekiyuta.cn/tags/Echarts/"/>
    
      <category term="Gunicorn" scheme="http://www.orekiyuta.cn/tags/Gunicorn/"/>
    
      <category term="Crontab" scheme="http://www.orekiyuta.cn/tags/Crontab/"/>
    
      <category term="Arm" scheme="http://www.orekiyuta.cn/tags/Arm/"/>
    
  </entry>
  
  <entry>
    <title>In Jupyter Notebook</title>
    <link href="http://www.orekiyuta.cn/archives/inJupyterNotebook/"/>
    <id>http://www.orekiyuta.cn/archives/inJupyterNotebook/</id>
    <published>2020-12-30T14:29:11.000Z</published>
    <updated>2020-12-30T15:38:05.120Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Configure"><a href="#Configure" class="headerlink" title="Configure"></a>Configure</h2><ul><li><code>pip install notebook</code></li><li><code>jupyter notebook</code> å¯åŠ¨,å·¥ä½œç©ºé—´æ˜¯å½“å‰ç›®å½•</li><li><code>jupyter notebook --generate-config</code> åˆ›å»ºé…ç½®æ–‡ä»¶ï¼ŒæŒ‡å®šå·¥ä½œç©ºé—´çš„ç›®å½•</li><li><code>c.NotebookApp.notebook_dir = r&#39;F:\Code&#39;</code>æ‰“å¼€é…ç½®æ–‡ä»¶æ‰¾åˆ°è¿™ä¸ªé…ç½®å¹¶ä¿®æ”¹<a id="more"></a><h2 id="QuickStart"><a href="#QuickStart" class="headerlink" title="QuickStart"></a>QuickStart</h2></li><li>è¿›å…¥ç¼–è¾‘å™¨åï¼Œå¯ä»¥è¿›è¡Œæ–‡æœ¬æ“ä½œ</li><li>ç‚¹å‡»å³ä¾§çš„ New ,æ–°å»ºæ–‡ä»¶<br><img src="/images/inJupyterNotebook/Snipaste_2020-12-30_22-49-43.png" alt></li><li>ç»¿è‰²ä¸ºç¼–è¾‘æ¨¡å¼ï¼Œè“è‰²ä¸ºå‘½ä»¤æ¨¡å¼ï¼ˆæŒ‰ ESC åˆ‡æ¢ï¼‰</li><li><img src="/images/inJupyterNotebook/Snipaste_2020-12-30_22-53-12.png" alt></li><li><img src="/images/inJupyterNotebook/Snipaste_2020-12-30_22-52-56.png" alt>      </li><li><p>å•å…ƒæ ¼ç±»å‹æœ‰ä¸¤ç§ï¼Œé»˜è®¤æ˜¯ä»£ç ç±»å‹</p><ul><li>åœ¨å‘½ä»¤æ¨¡å¼æŒ‰ Y åˆ‡æ¢ä¸ºä»£ç ç±»å‹</li><li>æŒ‰ M åˆ‡æ¢ä¸º Markdown æ–‡æœ¬ç±»å‹<br><img src="/images/inJupyterNotebook/Snipaste_2020-12-30_22-55-20.png" alt></li></ul></li><li><p>åœ¨å•å…ƒæ ¼ç±»è¾“å…¥å†…å®¹åï¼Œctrl + enter æ‰§è¡Œ</p><ul><li>ä»£ç å•å…ƒæ ¼ä¸ºæ‰§è¡Œä»£ç ï¼ŒMarkdown å•å…ƒæ ¼ä¸ºè¾“å‡ºæ–‡æœ¬æ ·å¼<br><img src="/images/inJupyterNotebook/Snipaste_2020-12-30_22-56-59.png" alt></li></ul></li><li><p>å¸¸ç”¨å¿«æ·é”®</p><ul><li>ctrl + enter æ‰§è¡Œå¹¶å…‰æ ‡åœç•™åœ¨å½“å‰å•å…ƒæ ¼</li><li>shift + enter æ‰§è¡Œå¹¶åœ¨ä¸‹é¢åˆ›å»ºæ–°å•å…ƒæ ¼ï¼Œè¿›å…¥å‘½ä»¤æ¨¡å¼</li><li>alt + enter æ‰§è¡Œå¹¶åœ¨ä¸‹é¢åˆ›å»ºæ–°å•å…ƒæ ¼ï¼Œè¿›å…¥ç¼–è¾‘æ¨¡å¼</li><li>å•å…ƒæ ¼ç±»å‹åˆ‡æ¢ Y / M</li><li>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼ŒA åœ¨ä¸Šä¸€è¡Œæ’å…¥å•å…ƒæ ¼</li><li>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼ŒB åœ¨ä¸‹ä¸€è¡Œæ’å…¥å•å…ƒæ ¼</li><li>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼ŒDD åˆ é™¤å½“å‰å•å…ƒæ ¼</li></ul></li><li><p>ä½¿ç”¨æµ‹è¯•<br><img src="/images/inJupyterNotebook/Snipaste_2020-12-30_23-27-24.png" alt></p></li><li>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯,æ¯ä¸ªå•å…ƒæ ¼æ˜¯å•ç‹¬æ‰§è¡Œçš„,åˆ†å•å…ƒæ ¼å†™ä»£ç çš„è¯,è¦ä»ä¸Šåˆ°åˆ°ä¸‹æŒ‰é¡ºåºæ‰§è¡Œå„ä¸ªå•å…ƒæ ¼</li></ul><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li>ğŸ‘‰ <a href="https://jupyter.org/" target="_blank" rel="noopener">jupyter</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Configure&quot;&gt;&lt;a href=&quot;#Configure&quot; class=&quot;headerlink&quot; title=&quot;Configure&quot;&gt;&lt;/a&gt;Configure&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pip install notebook&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;jupyter notebook&lt;/code&gt; å¯åŠ¨,å·¥ä½œç©ºé—´æ˜¯å½“å‰ç›®å½•&lt;/li&gt;
&lt;li&gt;&lt;code&gt;jupyter notebook --generate-config&lt;/code&gt; åˆ›å»ºé…ç½®æ–‡ä»¶ï¼ŒæŒ‡å®šå·¥ä½œç©ºé—´çš„ç›®å½•&lt;/li&gt;
&lt;li&gt;&lt;code&gt;c.NotebookApp.notebook_dir = r&amp;#39;F:\Code&amp;#39;&lt;/code&gt;æ‰“å¼€é…ç½®æ–‡ä»¶æ‰¾åˆ°è¿™ä¸ªé…ç½®å¹¶ä¿®æ”¹
    
    </summary>
    
    
    
      <category term="Jupyter" scheme="http://www.orekiyuta.cn/tags/Jupyter/"/>
    
  </entry>
  
  <entry>
    <title>Flask Run</title>
    <link href="http://www.orekiyuta.cn/archives/flaskRun/"/>
    <id>http://www.orekiyuta.cn/archives/flaskRun/</id>
    <published>2020-12-28T14:08:59.000Z</published>
    <updated>2021-01-08T13:54:49.935Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Quickstart"><a href="#Quickstart" class="headerlink" title="Quickstart"></a>Quickstart</h2><ul><li><p>On PowerShell</p>  <div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir flk</span><br><span class="line">cd flk</span><br><span class="line">py -m venv venv</span><br><span class="line">pip install flask</span><br><span class="line">mk hello.py</span><br><span class="line">New-Item hello.py -type file</span><br></pre></td></tr></table></figure></div></li><li><p>åœ¨ hello.py å†™å…¥ </p>  <div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line"><span class="keyword">return</span> <span class="string">'Hello, World!'</span></span><br></pre></td></tr></table></figure></div></li><li><p>run</p>  <div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$env:FLASK_APP = <span class="string">"hello.py"</span></span><br><span class="line">flask run</span><br></pre></td></tr></table></figure></div></li><li><p>get / post</p>  <div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello, World!'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/name')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">elias</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello, elias!'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/login', methods=['GET', 'POST'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">'POST'</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"A"</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"B"</span></span><br></pre></td></tr></table></figure></div></li></ul><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li>ğŸ‘‰<a href="https://flask.palletsprojects.com/en/1.1.x/" target="_blank" rel="noopener">Flask</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Quickstart&quot;&gt;&lt;a href=&quot;#Quickstart&quot; class=&quot;headerlink&quot; title=&quot;Quickstart&quot;&gt;&lt;/a&gt;Quickstart&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;On PowerShell&lt;/p&gt;
  &lt;div clas
      
    
    </summary>
    
    
    
      <category term="Flask" scheme="http://www.orekiyuta.cn/tags/Flask/"/>
    
      <category term="Python" scheme="http://www.orekiyuta.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Scrapy Learning Log</title>
    <link href="http://www.orekiyuta.cn/archives/scrapyLearningLog/"/>
    <id>http://www.orekiyuta.cn/archives/scrapyLearningLog/</id>
    <published>2020-12-27T13:53:56.000Z</published>
    <updated>2020-12-27T16:11:10.345Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Scrapy-è°ƒè¯•"><a href="#Scrapy-è°ƒè¯•" class="headerlink" title="Scrapy è°ƒè¯•"></a>Scrapy è°ƒè¯•</h2><h3 id="é€šè¿‡-Shell-å±‚å±‚è°ƒè¯•"><a href="#é€šè¿‡-Shell-å±‚å±‚è°ƒè¯•" class="headerlink" title="é€šè¿‡ Shell å±‚å±‚è°ƒè¯•"></a>é€šè¿‡ Shell å±‚å±‚è°ƒè¯•</h3><ul><li><code>scrapy shell http://doc.scrapy.org/en/latest/_static/selectors-sample1.html</code></li><li>ç„¶åç”¨é€‰æ‹©å™¨ç­›é€‰</li></ul><h3 id="IDE-debug-å¯åŠ¨-Shell"><a href="#IDE-debug-å¯åŠ¨-Shell" class="headerlink" title="IDE debug å¯åŠ¨ Shell"></a>IDE debug å¯åŠ¨ Shell</h3><ul><li><p>åœ¨ä»£ç ä¸­åŠ å…¥</p>  <div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scrapy.shell <span class="keyword">import</span> inspect_response</span><br><span class="line">inspect_response(response, self)</span><br></pre></td></tr></table></figure></div></li><li><p><code>scrapy crwal AAA</code> å¯åŠ¨é¡¹ç›®</p></li><li>ç„¶åé¡¹ç›®æ‰§è¡Œåˆ°ä¸Šé¢ä¸¤å¥æ’å…¥çš„ä½ç½®çš„æ—¶å€™ï¼Œå°±ä¼šå¯åŠ¨ Shell </li><li>æ¥ç€å°±åœ¨ Shell é‡Œè°ƒè¯•<br><img src="/images/scrapyLearningLog/Snipaste_2020-12-27_22-04-22.png" alt></li></ul><a id="more"></a><h3 id="ç›´æ¥åœ¨-IDE-é‡Œè°ƒè¯•"><a href="#ç›´æ¥åœ¨-IDE-é‡Œè°ƒè¯•" class="headerlink" title="ç›´æ¥åœ¨ IDE é‡Œè°ƒè¯•"></a>ç›´æ¥åœ¨ IDE é‡Œè°ƒè¯•</h3><ul><li>æ–°å»ºæ–‡ä»¶å†™å…¥  <div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scrapy <span class="keyword">import</span> cmdline</span><br><span class="line"><span class="comment"># douban ä¸ºè¦è°ƒè¯•çš„æ–‡ä»¶å</span></span><br><span class="line">name = <span class="string">'douban'</span></span><br><span class="line">cmd = <span class="string">'scrapy crawl &#123;0&#125;'</span>.format(name)</span><br><span class="line">cmdline.execute(cmd.split())</span><br></pre></td></tr></table></figure></div></li></ul><p><img src="/images/scrapyLearningLog/Snipaste_2020-12-27_22-06-33.png" alt></p><ul><li>ç„¶ååˆ°è¦è°ƒè¯•çš„æ–‡ä»¶é‡Œè®¾ç½®æ–­ç‚¹</li><li>æœ€åå›åˆ°ä¸Šé¢æ–°å»ºçš„æ–‡ä»¶é‡Œé¢å³é”® debug å³å¯</li></ul><h2 id="è®¾ç½®è¯·æ±‚å¤´"><a href="#è®¾ç½®è¯·æ±‚å¤´" class="headerlink" title="è®¾ç½®è¯·æ±‚å¤´"></a>è®¾ç½®è¯·æ±‚å¤´</h2><ul><li>æœ‰æ—¶å€™ä¸è®¾ç½®è¯·æ±‚å¤´ï¼Œä¼šè¢«æ‹’ç»è®¿é—® 403</li><li><p>scrapy æœ‰ä¸¤ç§æ–¹å¼è®¾ç½®è¯·æ±‚å¤´ï¼Œä¸€ç§æ˜¯åœ¨ settings.py é‡Œé…ç½®</p>  <div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USER_AGENT = <span class="string">'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36'</span></span><br></pre></td></tr></table></figure></div></li><li><p>å¦ä¸€ç§æ˜¯åœ¨å‡½æ•°é‡Œå†™</p>  <div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoubanSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">   headers = &#123;</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) '</span></span><br><span class="line">                    <span class="string">'Chrome/53.0.2785.143 Safari/537.36'</span>,</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div></li><li><p>ç„¶ååœ¨ start_request()é‡Œè°ƒç”¨</p>  <div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoubanSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">name = <span class="string">'douban'</span></span><br><span class="line">allowed_domains = [<span class="string">'movie.douban.com/top250'</span>]</span><br><span class="line"><span class="comment"># æŠŠ è¿™é‡Œçš„ start_urls å†™åœ¨ start_requests() é‡Œèƒ½æ‰§è¡Œæ›´å¤šæ“ä½œï¼Œè¿™é‡Œçš„åªæ˜¯ç®€å•çš„è®¾ç½® url</span></span><br><span class="line"><span class="comment"># start_urls = ['http://movie.douban.com/top250/']</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) '</span></span><br><span class="line">                <span class="string">'Chrome/53.0.2785.143 Safari/537.36'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™äº›æ–¹æ³•å‚æ•° self åº”è¯¥æ˜¯æŒ‡ä¸Šé¢å®šä¹‰çš„é‚£äº›å˜é‡</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">start_requests</span><span class="params">(self)</span>:</span></span><br><span class="line">    url = <span class="string">'https://movie.douban.com/top250'</span></span><br><span class="line">    <span class="keyword">yield</span> Request(url, headers=self.headers)</span><br></pre></td></tr></table></figure></div></li></ul><h2 id="è¯·æ±‚ä¸‹ä¸€é¡µ-ä½†æ²¡è¿”å›"><a href="#è¯·æ±‚ä¸‹ä¸€é¡µ-ä½†æ²¡è¿”å›" class="headerlink" title="è¯·æ±‚ä¸‹ä¸€é¡µ,ä½†æ²¡è¿”å›"></a>è¯·æ±‚ä¸‹ä¸€é¡µ,ä½†æ²¡è¿”å›</h2><ul><li>DEBUG: Filtered offsite request to</li><li>åŸå› æ˜¯ request çš„åœ°å€å’Œ allow_domain é‡Œé¢çš„å†²çªï¼Œä»è€Œè¢«è¿‡æ»¤æ‰,å¯ä»¥åœç”¨è¿‡æ»¤åŠŸèƒ½<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="DIFF"><figure class="iseeu highlight /diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">next_url = response.xpath('//span[@class="next"]/a/@href').extract_first()</span><br><span class="line">if next_url:</span><br><span class="line">next_url = 'https://movie.douban.com/top250' + next_url</span><br><span class="line"><span class="deletion">-yield Request(next_url, headers=self.headers)</span></span><br><span class="line"><span class="addition">+yield Request(next_url, headers=self.headers, dont_filter=True)</span></span><br></pre></td></tr></table></figure></div></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Scrapy-è°ƒè¯•&quot;&gt;&lt;a href=&quot;#Scrapy-è°ƒè¯•&quot; class=&quot;headerlink&quot; title=&quot;Scrapy è°ƒè¯•&quot;&gt;&lt;/a&gt;Scrapy è°ƒè¯•&lt;/h2&gt;&lt;h3 id=&quot;é€šè¿‡-Shell-å±‚å±‚è°ƒè¯•&quot;&gt;&lt;a href=&quot;#é€šè¿‡-Shell-å±‚å±‚è°ƒè¯•&quot; class=&quot;headerlink&quot; title=&quot;é€šè¿‡ Shell å±‚å±‚è°ƒè¯•&quot;&gt;&lt;/a&gt;é€šè¿‡ Shell å±‚å±‚è°ƒè¯•&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;scrapy shell http://doc.scrapy.org/en/latest/_static/selectors-sample1.html&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ç„¶åç”¨é€‰æ‹©å™¨ç­›é€‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;IDE-debug-å¯åŠ¨-Shell&quot;&gt;&lt;a href=&quot;#IDE-debug-å¯åŠ¨-Shell&quot; class=&quot;headerlink&quot; title=&quot;IDE debug å¯åŠ¨ Shell&quot;&gt;&lt;/a&gt;IDE debug å¯åŠ¨ Shell&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;åœ¨ä»£ç ä¸­åŠ å…¥&lt;/p&gt;
  &lt;figure class=&quot;highlight py&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; scrapy.shell &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; inspect_response&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;inspect_response(response, self)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;scrapy crwal AAA&lt;/code&gt; å¯åŠ¨é¡¹ç›®&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;ç„¶åé¡¹ç›®æ‰§è¡Œåˆ°ä¸Šé¢ä¸¤å¥æ’å…¥çš„ä½ç½®çš„æ—¶å€™ï¼Œå°±ä¼šå¯åŠ¨ Shell &lt;/li&gt;
&lt;li&gt;æ¥ç€å°±åœ¨ Shell é‡Œè°ƒè¯•&lt;br&gt;&lt;img src=&quot;/images/scrapyLearningLog/Snipaste_2020-12-27_22-04-22.png&quot; alt&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
    
      <category term="Python" scheme="http://www.orekiyuta.cn/tags/Python/"/>
    
      <category term="Scrapy" scheme="http://www.orekiyuta.cn/tags/Scrapy/"/>
    
  </entry>
  
  <entry>
    <title>Step into Scrapy</title>
    <link href="http://www.orekiyuta.cn/archives/stepIntoScrapy/"/>
    <id>http://www.orekiyuta.cn/archives/stepIntoScrapy/</id>
    <published>2020-12-26T11:24:56.000Z</published>
    <updated>2020-12-27T09:56:15.823Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><ul><li><code>pip install scrapy</code></li><li><code>scrapy</code> æŸ¥çœ‹ç”¨æ³•</li><li><code>scrapy startproject getTiobe</code> æ–°å»º scrapy é¡¹ç›®</li><li><code>cd getTiobe\spiders</code> è¿›å…¥è¯¥ç›®å½•</li><li><code>scrapy genspider tiobe www.tiobe.com/tiobe-index</code> ç”Ÿæˆè¯¥é“¾æ¥çš„çˆ¬è™«æ–‡ä»¶<br><img src="/images/stepIntoScrapy/Snipaste_2020-12-26_19-34-43.png" alt><a id="more"></a><h2 id="è·å–"><a href="#è·å–" class="headerlink" title="è·å–"></a>è·å–</h2></li><li>è·å–è¯¥å…ƒç´ å¯¹åº”çš„ css é€‰æ‹©å™¨<br><img src="/images/stepIntoScrapy/Snipaste_2020-12-26_19-36-35.png" alt></li><li>ä¿®æ”¹ parse æ–¹æ³•</li><li><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PY"><figure class="iseeu highlight /py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> response.css(<span class="string">'#top20 &gt; tbody &gt; tr'</span>):</span><br><span class="line">    <span class="keyword">yield</span> &#123;</span><br><span class="line">        <span class="string">'rank_this-year'</span>: item.css(<span class="string">'td:nth-child(1)::text'</span>).get().strip(),</span><br><span class="line">        <span class="string">'rank_last-year'</span>: item.css(<span class="string">'td:nth-child(2)::text'</span>).get().strip(),</span><br><span class="line">        <span class="string">'programming_language'</span>: item.css(<span class="string">'td:nth-child(4)::text'</span>).get().strip(),</span><br><span class="line">        <span class="string">'ratings'</span>: item.css(<span class="string">'td:nth-child(5)::text'</span>).get().strip(),</span><br><span class="line">        <span class="string">'change'</span>: item.css(<span class="string">'td:nth-child(6)::text'</span>).get().strip(),</span><br><span class="line">        <span class="string">'date'</span>: time.strftime(<span class="string">'%Y/%m/%d %H:%M:%S'</span>, time.localtime(time.time()))</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div></li></ul><h2 id="å®æ–½"><a href="#å®æ–½" class="headerlink" title="å®æ–½"></a>å®æ–½</h2><ul><li><p>åœ¨ spiders ç›®å½•ä¸‹çš„ settings.py è®¾ç½®å¯¼å‡º json æ ¼å¼</p><ul><li><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FEED_FORMAT = &quot;json&quot;</span><br><span class="line">FEED_URI = &quot;tiobe.json&quot;</span><br></pre></td></tr></table></figure></div></li></ul></li><li><p><code>scrapy crawl tiobe</code></p></li><li>å°±å¯ä»¥åœ¨é¡¹ç›®çš„ç›®å½•ä¸‹æ‰¾åˆ° tiobe.json è·å¾—çš„æ•°æ®äº†</li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li>ğŸ‘‰ <a href="https://blog.csdn.net/mieleizhi0522/article/details/82142856" target="_blank" rel="noopener">pythonä¸­yieldçš„ç”¨æ³•è¯¦è§£â€”â€”æœ€ç®€å•ï¼Œæœ€æ¸…æ™°çš„è§£é‡Š</a></li><li>ğŸ‘‰ <a href="https://scrapy.org/" target="_blank" rel="noopener">https://scrapy.org/</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;é…ç½®&quot;&gt;&lt;a href=&quot;#é…ç½®&quot; class=&quot;headerlink&quot; title=&quot;é…ç½®&quot;&gt;&lt;/a&gt;é…ç½®&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pip install scrapy&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;scrapy&lt;/code&gt; æŸ¥çœ‹ç”¨æ³•&lt;/li&gt;
&lt;li&gt;&lt;code&gt;scrapy startproject getTiobe&lt;/code&gt; æ–°å»º scrapy é¡¹ç›®&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cd getTiobe\spiders&lt;/code&gt; è¿›å…¥è¯¥ç›®å½•&lt;/li&gt;
&lt;li&gt;&lt;code&gt;scrapy genspider tiobe www.tiobe.com/tiobe-index&lt;/code&gt; ç”Ÿæˆè¯¥é“¾æ¥çš„çˆ¬è™«æ–‡ä»¶&lt;br&gt;&lt;img src=&quot;/images/stepIntoScrapy/Snipaste_2020-12-26_19-34-43.png&quot; alt&gt;
    
    </summary>
    
    
    
      <category term="Python" scheme="http://www.orekiyuta.cn/tags/Python/"/>
    
      <category term="Scrapy" scheme="http://www.orekiyuta.cn/tags/Scrapy/"/>
    
  </entry>
  
  <entry>
    <title>Batch Note</title>
    <link href="http://www.orekiyuta.cn/archives/batchNote/"/>
    <id>http://www.orekiyuta.cn/archives/batchNote/</id>
    <published>2020-12-12T17:17:13.000Z</published>
    <updated>2021-01-09T14:51:08.053Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æœç´¢å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶"><a href="#æœç´¢å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶" class="headerlink" title="æœç´¢å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶"></a>æœç´¢å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="variable">%%i</span> <span class="keyword">in</span> (*.*) <span class="keyword">do</span> <span class="built_in">echo</span> "<span class="variable">%%i</span>"</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure></div><h3 id="æœç´¢å½“å‰ç›®å½•ä¸‹è¢«ç­›é€‰çš„æ–‡ä»¶"><a href="#æœç´¢å½“å‰ç›®å½•ä¸‹è¢«ç­›é€‰çš„æ–‡ä»¶" class="headerlink" title="æœç´¢å½“å‰ç›®å½•ä¸‹è¢«ç­›é€‰çš„æ–‡ä»¶"></a>æœç´¢å½“å‰ç›®å½•ä¸‹è¢«ç­›é€‰çš„æ–‡ä»¶</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="variable">%%i</span> <span class="keyword">in</span> (*.<span class="built_in">md</span>) <span class="keyword">do</span> <span class="built_in">echo</span> "<span class="variable">%%i</span>"</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure></div><p>å¯ç”¨æ­£åˆ™è¡¨è¾¾å¼<br><a id="more"></a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="variable">%%i</span> <span class="keyword">in</span> (?.<span class="built_in">md</span>) <span class="keyword">do</span> <span class="built_in">echo</span> "<span class="variable">%%i</span>"</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure></div><p>ä¸Šé¢è¡¨ç¤ºæœç´¢åªæœ‰ä¸€ä¸ªå­—ç¬¦åï¼Œä¸”åç¼€ä¸º md çš„æ–‡ä»¶</p><h3 id="ä»¥ç®¡ç†å‘˜èº«ä»½æ‰§è¡Œå‘½ä»¤"><a href="#ä»¥ç®¡ç†å‘˜èº«ä»½æ‰§è¡Œå‘½ä»¤" class="headerlink" title="ä»¥ç®¡ç†å‘˜èº«ä»½æ‰§è¡Œå‘½ä»¤"></a>ä»¥ç®¡ç†å‘˜èº«ä»½æ‰§è¡Œå‘½ä»¤</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%<span class="number">1</span> mshta vbscript:CreateObject("Shell.Application").ShellExecute("<span class="built_in">cmd</span>.exe","/c %~s0 ::","","runas",<span class="number">1</span>)(window.close)&amp;&amp;<span class="keyword">exit</span></span><br></pre></td></tr></table></figure></div><p>å†™åœ¨è„šæœ¬æ–‡ä»¶é¡¶éƒ¨å³å¯</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">setlocal</span> EnableDelayedExpansion</span><br><span class="line"><span class="built_in">color</span> <span class="number">3</span>e</span><br><span class="line"></span><br><span class="line"><span class="built_in">PUSHD</span> %~DP0 &amp; <span class="built_in">cd</span> /d "%~dp0"</span><br><span class="line">%<span class="number">1</span> %<span class="number">2</span></span><br><span class="line">mshta vbscript:createobject("shell.application").shellexecute("%~s0","<span class="keyword">goto</span> :runas","","runas",<span class="number">1</span>)(window.close)&amp;<span class="keyword">goto</span> :eof</span><br><span class="line">:runas</span><br><span class="line"> </span><br><span class="line">::å¡«å†™è‡ªå·±çš„è„šæœ¬</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> æ‰§è¡Œå®Œæ¯•,ä»»æ„é”®é€€å‡º</span><br><span class="line"></span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="built_in">NUL</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span> REG.exe query "HKU\S-<span class="number">1</span>-<span class="number">5</span>-<span class="number">19</span>" || (</span><br><span class="line">    <span class="built_in">ECHO</span> <span class="built_in">SET</span> UAC = CreateObject^("Shell.Application"^) &gt; "<span class="variable">%TEMP%</span>\Getadmin.vbs"</span><br><span class="line">    <span class="built_in">ECHO</span> UAC.ShellExecute "%~f0", "%<span class="number">1</span>", "", "runas", <span class="number">1</span> &gt;&gt; "<span class="variable">%TEMP%</span>\Getadmin.vbs"</span><br><span class="line">    "<span class="variable">%TEMP%</span>\Getadmin.vbs"</span><br><span class="line">    <span class="built_in">DEL</span> /f /q "<span class="variable">%TEMP%</span>\Getadmin.vbs" <span class="number">2</span>&gt;<span class="built_in">NUL</span></span><br><span class="line">    <span class="keyword">Exit</span> /b</span><br><span class="line">)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="built_in">nul</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span> "<span class="variable">%SYSTEMROOT%</span>\system32\<span class="built_in">cacls</span>.exe" "<span class="variable">%SYSTEMROOT%</span>\system32\config\system"</span><br><span class="line"><span class="keyword">if</span> '<span class="variable">%errorlevel%</span>' <span class="keyword">NEQ</span> '<span class="number">0</span>' (</span><br><span class="line"><span class="keyword">goto</span> UACPrompt</span><br><span class="line">) <span class="keyword">else</span> ( <span class="keyword">goto</span> gotAdmin )</span><br><span class="line">:UACPrompt</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">Set</span> UAC = CreateObject^("Shell.Application"^) &gt; "<span class="variable">%temp%</span>\getadmin.vbs"</span><br><span class="line"><span class="built_in">echo</span> UAC.ShellExecute "%~s0", "", "", "runas", <span class="number">1</span> &gt;&gt; "<span class="variable">%temp%</span>\getadmin.vbs"</span><br><span class="line">"<span class="variable">%temp%</span>\getadmin.vbs"</span><br><span class="line"><span class="keyword">exit</span> /B</span><br><span class="line">:gotAdmin</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">exist</span> "<span class="variable">%temp%</span>\getadmin.vbs" ( <span class="built_in">del</span> "<span class="variable">%temp%</span>\getadmin.vbs" )</span><br></pre></td></tr></table></figure></div><h3 id="åœ¨æŒ‡å®šç›®å½•ä¸‹æ‰“å¼€-git-bash"><a href="#åœ¨æŒ‡å®šç›®å½•ä¸‹æ‰“å¼€-git-bash" class="headerlink" title="åœ¨æŒ‡å®šç›®å½•ä¸‹æ‰“å¼€ git-bash"></a>åœ¨æŒ‡å®šç›®å½•ä¸‹æ‰“å¼€ git-bash</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">start</span> C:\Program" "Files\Git\git-bash.exe --<span class="built_in">cd</span>=f:\Code\</span><br></pre></td></tr></table></figure></div><p>è·¯å¾„é‡Œçš„ç©ºæ ¼éœ€è¦ç”¨åŒå¼•å·<br><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> f: </span><br><span class="line"><span class="keyword">call</span> <span class="built_in">cd</span> Code\</span><br><span class="line"><span class="built_in">start</span> C:\Program" "Files\Git\git-bash.exe</span><br></pre></td></tr></table></figure></div></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> /p input="è¾“å…¥è¦åœ¨git-bashä¸­æ‰“å¼€çš„é¡¹ç›®è·¯å¾„:"</span><br><span class="line"><span class="built_in">start</span> c:\Program" "Files\Git\git-bash.exe --<span class="built_in">cd</span>=<span class="variable">%input%</span></span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure></div><p>è¾“å…¥çš„é¡¹ç›®è·¯å¾„éœ€è¦åœ¨åŒä¸€ä¸ªç›˜ç¬¦ï¼Œå› ä¸ºåˆ‡æ¢ç›˜ç¬¦ä¸ç”¨ cd</p><h3 id="è¾“å‡ºå†…å®¹åˆ°å‰ªè´´æ¿"><a href="#è¾“å‡ºå†…å®¹åˆ°å‰ªè´´æ¿" class="headerlink" title="è¾“å‡ºå†…å®¹åˆ°å‰ªè´´æ¿"></a>è¾“å‡ºå†…å®¹åˆ°å‰ªè´´æ¿</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Windows\System&gt; clip /?</span><br><span class="line"></span><br><span class="line">CLIP</span><br><span class="line"></span><br><span class="line">æè¿°:</span><br><span class="line">    å°†å‘½ä»¤è¡Œå·¥å…·çš„è¾“å‡ºé‡å®šå‘åˆ° Windows å‰ªè´´æ¿ã€‚è¿™ä¸ªæ–‡æœ¬è¾“å‡ºå¯ä»¥è¢«ç²˜è´´</span><br><span class="line">    åˆ°å…¶ä»–ç¨‹åºä¸­ã€‚</span><br><span class="line"></span><br><span class="line">å‚æ•°åˆ—è¡¨:</span><br><span class="line">    /?                  æ˜¾ç¤ºæ­¤å¸®åŠ©æ¶ˆæ¯ã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹:</span><br><span class="line">    <span class="built_in">DIR</span> | CLIP          å°†ä¸€ä»½å½“å‰ç›®å½•åˆ—è¡¨çš„å‰¯æœ¬æ”¾å…¥ Windows å‰ªè´´æ¿ã€‚</span><br><span class="line"></span><br><span class="line">    CLIP &lt; README.TXT   å°† readme.txt çš„ä¸€ä»½æ–‡æœ¬æ”¾å…¥ Windows å‰ªè´´æ¿ã€‚</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> elias | clip</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> /p="<span class="variable">%date%</span>"&lt;<span class="built_in">nul</span> | clip</span><br></pre></td></tr></table></figure></div><h3 id="è¿ç»­æ‰§è¡Œå‘½ä»¤"><a href="#è¿ç»­æ‰§è¡Œå‘½ä»¤" class="headerlink" title="è¿ç»­æ‰§è¡Œå‘½ä»¤"></a>è¿ç»­æ‰§è¡Œå‘½ä»¤</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> f: </span><br><span class="line"><span class="keyword">call</span> <span class="built_in">cd</span> Code\</span><br><span class="line"><span class="keyword">call</span> hexo clean</span><br><span class="line"><span class="keyword">call</span> hexo g</span><br><span class="line"><span class="keyword">call</span> hexo d</span><br></pre></td></tr></table></figure></div><p>è¿™é‡Œæ¯ä¸ªå‘½ä»¤å‰é¢æœ€å¥½ä¿ç•™ call ,æ²¡æœ‰ call çš„è¯, cmd ä¼šåœ¨ä¸­é€”å…³é—­</p><h3 id="é…ç½®-java-ç¯å¢ƒå˜é‡"><a href="#é…ç½®-java-ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½® java ç¯å¢ƒå˜é‡"></a>é…ç½® java ç¯å¢ƒå˜é‡</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line">%<span class="number">1</span> mshta vbscript:CreateObject(â€œShell.Applicationâ€).ShellExecute(â€œ<span class="built_in">cmd</span>.exeâ€,"/c %~s0 ::","",â€œrunasâ€,<span class="number">1</span>)(window.close)&amp;&amp;<span class="keyword">exit</span> </span><br><span class="line"><span class="built_in">echo</span> æ­£åœ¨è®¾ç½® Java ç¯å¢ƒå˜é‡</span><br><span class="line">wmic ENVIRONMENT create name="JAVA_HOME",username="&lt;system&gt;",VariableValue="C:\Program Files (x86)\Java\jdk1.<span class="number">7</span>.<span class="number">0</span>_79"</span><br><span class="line">wmic ENVIRONMENT create name="CLASSPATH",username="&lt;system&gt;",VariableValue=".;<span class="variable">%%J</span>AVA_HOME<span class="variable">%%\</span>lib;<span class="variable">%%J</span>AVA_HOME<span class="variable">%%\</span>lib\tools.jar"</span><br><span class="line">wmic ENVIRONMENT where "name='<span class="built_in">PATH</span>' and username='&lt;system&gt;'" <span class="built_in">set</span> VariableValue="<span class="variable">%path%</span>;<span class="variable">%%J</span>AVA_HOME<span class="variable">%%\</span>bin;<span class="variable">%%J</span>AVA_HOME<span class="variable">%%\</span>jre\bin;"</span><br><span class="line"><span class="built_in">echo</span> è®¾ç½®å®Œæˆ</span><br><span class="line"><span class="keyword">call</span> java -version</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure></div><h3 id="è·å–æ—¶é—´"><a href="#è·å–æ—¶é—´" class="headerlink" title="è·å–æ—¶é—´"></a>è·å–æ—¶é—´</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">%date%</span> <span class="variable">%time%</span></span><br></pre></td></tr></table></figure></div><h3 id="æˆªå–å­—ç¬¦ä¸²"><a href="#æˆªå–å­—ç¬¦ä¸²" class="headerlink" title="æˆªå–å­—ç¬¦ä¸²"></a>æˆªå–å­—ç¬¦ä¸²</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">%date:~0,4%</span></span><br></pre></td></tr></table></figure></div><p>å¼€å§‹ä½ç½® 0ï¼Œæˆªå–å­—ç¬¦æ•° 4</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> str=<span class="number">123456789</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">%str:~3,4%</span></span><br></pre></td></tr></table></figure></div><h3 id="è¯­éŸ³è¯»å–"><a href="#è¯­éŸ³è¯»å–" class="headerlink" title="è¯­éŸ³è¯»å–"></a>è¯­éŸ³è¯»å–</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mshta vbscript:CreateObject("SAPI.SpVoice").speak("elias")(Window.close)</span><br></pre></td></tr></table></figure></div><h3 id="å†…å®¹é‡å®šå‘"><a href="#å†…å®¹é‡å®šå‘" class="headerlink" title="å†…å®¹é‡å®šå‘"></a>å†…å®¹é‡å®šå‘</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ipconfig</span> &gt; d:ip.txt</span><br></pre></td></tr></table></figure></div><ul><li>å°†å†…å®¹é‡å®šå‘è¾“å‡ºåˆ°æ–°çš„ä½ç½®</li><li><code>&gt;</code>   è¦†ç›–å¼é‡å®šå‘</li><li><code>&gt;&gt;</code>  å¢é‡å¼é‡å®šå‘</li><li><code>&gt;nul</code> é‡å®šå‘åˆ°ç©ºè®¾å¤‡ nul,æ‰€ä»¥æ²¡æœ‰è¾“å‡ºå†…å®¹</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;æœç´¢å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶&quot;&gt;&lt;a href=&quot;#æœç´¢å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;æœç´¢å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶&quot;&gt;&lt;/a&gt;æœç´¢å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶&lt;/h3&gt;&lt;figure class=&quot;highlight bat&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;%%i&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; (*.*) &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &quot;&lt;span class=&quot;variable&quot;&gt;%%i&lt;/span&gt;&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;pause&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;æœç´¢å½“å‰ç›®å½•ä¸‹è¢«ç­›é€‰çš„æ–‡ä»¶&quot;&gt;&lt;a href=&quot;#æœç´¢å½“å‰ç›®å½•ä¸‹è¢«ç­›é€‰çš„æ–‡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;æœç´¢å½“å‰ç›®å½•ä¸‹è¢«ç­›é€‰çš„æ–‡ä»¶&quot;&gt;&lt;/a&gt;æœç´¢å½“å‰ç›®å½•ä¸‹è¢«ç­›é€‰çš„æ–‡ä»¶&lt;/h3&gt;&lt;figure class=&quot;highlight bat&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;%%i&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; (*.&lt;span class=&quot;built_in&quot;&gt;md&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &quot;&lt;span class=&quot;variable&quot;&gt;%%i&lt;/span&gt;&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;pause&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¯ç”¨æ­£åˆ™è¡¨è¾¾å¼&lt;br&gt;
    
    </summary>
    
    
    
      <category term="Batch" scheme="http://www.orekiyuta.cn/tags/Batch/"/>
    
  </entry>
  
  <entry>
    <title>Fish:The Friendly Interactive Shell</title>
    <link href="http://www.orekiyuta.cn/archives/Thefriendlyinteractiveshell/"/>
    <id>http://www.orekiyuta.cn/archives/Thefriendlyinteractiveshell/</id>
    <published>2020-12-11T18:18:43.000Z</published>
    <updated>2020-12-12T15:01:37.416Z</updated>
    
    <content type="html"><![CDATA[<ul><li><code>$ sudo apt-get install fish</code></li><li><code>fish</code> å¯åŠ¨ fish</li><li><p>æœ‰ä¸‹åˆ’çº¿æç¤ºè¡¨æ˜è·¯å¾„å­˜åœ¨</p><ul><li><img src="/images/fishShell/Snipaste_2020-12-12_02-51-05.png" alt></li></ul></li><li><p>æ— æ•ˆå‘½ä»¤æ˜¾ç¤ºçº¢è‰²ï¼Œæœ‰æ•ˆå‘½ä»¤ä¸ºè“è‰²</p><ul><li><img src="/images/fishShell/Snipaste_2020-12-12_02-52-37.png" alt></li></ul></li><li><p>è¾“å…¥å‘½ä»¤åï¼Œfish ä¼šæœ‰å†å²è®°å½•æç¤ºå’ŒçŒœæµ‹æç¤ºï¼ŒæŒ‰ä¸‹ tab ä¹Ÿæœ‰æç¤º</p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;&lt;code&gt;$ sudo apt-get install fish&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fish&lt;/code&gt; å¯åŠ¨ fish&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æœ‰ä¸‹åˆ’çº¿æç¤ºè¡¨æ˜è·¯å¾„å­˜åœ¨&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;img src=&quot;/images
      
    
    </summary>
    
    
    
      <category term="Linux" scheme="http://www.orekiyuta.cn/tags/Linux/"/>
    
      <category term="Shell" scheme="http://www.orekiyuta.cn/tags/Shell/"/>
    
  </entry>
  
</feed>
